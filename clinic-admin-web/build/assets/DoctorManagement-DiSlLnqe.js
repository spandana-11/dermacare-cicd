import{r as d,_ as ta,R as ue,c as Ee,P as M,u as sa,j as e,B as A,a as ia,b as ra,Q as oa,a6 as Te,h as he,F as na,H as la,W as ca,y as da}from"./index-BpN0qZrt.js";import{b as pe}from"./index.esm-BAveQmLP.js";import{u as ma,G as ua}from"./DoctorAPI-CObUeR_O.js";import{c as ge}from"./capitalizeWords-CuwF8AcI.js";import{C as f}from"./CFormLabel-DO0eStXP.js";import{S as U}from"./react-select.esm-BTk9WeoW.js";import{L as ha}from"./loader-OBkaezw1.js";import{F as pa}from"./index.es-BjxbXZ9o.js";import{h as ga}from"./index-BS1iOPDO.js";import{C as xa,a as fa,b as ba}from"./CModalHeader-DLH-68_W.js";import{C as $,a as p}from"./CRow-D0GPXItY.js";import{C as I}from"./CFormInput-DMF4wKOV.js";import{C as R}from"./CFormSelect-DDJD4c8G.js";import{C as va}from"./CFormTextarea-BePoUAyB.js";import{C as xe}from"./CFormCheck-NaJdnRUj.js";import{C as ja}from"./CModalFooter-Dm04Litg.js";import"./defineProperty-DevPl9dM.js";import"./slicedToArray-D6Gft5C9.js";import"./CNavItem-DIVzBTzM.js";const fe=d.forwardRef((n,m)=>{var{className:N,id:S,invalid:y,label:b,reverse:u,size:j,type:T="checkbox",valid:q}=n,k=ta(n,["className","id","invalid","label","reverse","size","type","valid"]);return ue.createElement("div",{className:Ee("form-check form-switch",{"form-check-reverse":u,[`form-switch-${j}`]:j,"is-invalid":y,"is-valid":q},N)},ue.createElement("input",Object.assign({type:T,className:Ee("form-check-input",{"is-invalid":y,"is-valid":q}),id:S},k,{ref:m})),b&&ue.createElement(f,Object.assign({customClassName:"form-check-label"},S&&{htmlFor:S}),b))});fe.propTypes={className:M.string,id:M.string,invalid:M.bool,label:M.oneOfType([M.string,M.node]),reverse:M.bool,size:M.oneOf(["lg","xl"]),type:M.oneOf(["checkbox","radio"]),valid:M.bool};fe.displayName="CFormSwitch";const Na=({doctor:n})=>{const m=sa(),[N,S]=d.useState(n.doctorAvailabilityStatus||!1);if(!n)return null;const y=async b=>{const u=b.target.checked;S(u),await ma(n.doctorId,u)?A.success(`Availability set to ${u?"Available":"Not Available"}`):(A.error("Failed to update availability"),S(!u))};return e.jsxs("div",{className:"doctor-card",children:[e.jsx("div",{className:"doctor-avatar",children:e.jsx("img",{src:n.doctorPicture,alt:`Photo of Dr. ${n.doctorName||"Doctor"}`,onError:b=>{b.target.src!==window.location.origin+"/default-avatar.png"&&(b.target.src="/default-avatar.png")}})}),e.jsxs("div",{className:"doctor-info",children:[e.jsxs("h2",{children:[ge(n.doctorName),", ",ge(n.qualification)]}),e.jsx("p",{className:"speciality",children:ge(n.specialization)}),e.jsxs("p",{children:[n.experience," Years of experience"]}),e.jsxs("div",{className:"availability-toggle d-flex align-items-center gap-2 mt-2",children:[e.jsx("label",{htmlFor:`availability-${n.doctorId}`,className:"fw-bold mb-0  ",style:{whiteSpace:"nowrap"},children:"Doctor Availability"}),e.jsx(fe,{id:`availability-${n.doctorId}`,checked:N,onChange:y,style:{backgroundColor:"var(--color-black)",marginTop:"-10px",borderColor:"var(--color-bgcolor)"}})]})]}),e.jsxs("div",{className:"doctor-action d-flex flex-column align-items-center gap-2 p-2 border rounded shadow-sm",children:[e.jsx("button",{className:"btn btn-info w-100",onClick:()=>m(`/Doctor/${n.doctorId}`,{state:{doctor:n}}),"aria-label":`View details of Dr. ${n.doctorName}`,children:"View Details"}),e.jsxs("p",{className:"mb-0 ",style:{color:"var(--color-black)"},children:[e.jsx("strong",{children:"ID:"})," ",n.doctorId]})]}),e.jsx("style",{children:`
       .doctor-card {
  display: flex;
  align-items: flex-start;
  padding: 16px ;
  border: 1px solid #eaeaea;
  border-radius: 12px;
  margin-bottom: 16px;
  box-shadow: 0 2px 6px rgba(0,0,0,0.05);
  background-color: #fff;
  gap: 16px;
  transition: transform 0.2s ease, box-shadow 0.2s ease;
}

.doctor-card:hover {
  transform: translateY(-2px);
  box-shadow: 0 4px 10px rgba(0,0,0,0.1);
}

.doctor-avatar img {
  width: 90px;
  height: 90px;
  border-radius: 50%;
  object-fit: cover;
  border: 2px solid #f1f1f1;
  box-shadow: 0 2px 4px rgba(0,0,0,0.08);
}

.doctor-info {
  flex-grow: 1;
  padding: 0 10px;
}

.doctor-info h2 {
  color:var(--color-black);
  font-size: 18px;
  margin: 0 0 6px;
  font-weight: 700;
}

.speciality {
  margin: 4px 0;
  color:var(--color-black);
  font-size: 14px;
}

.doctor-info p {
 
  color:var(--color-black);
  font-size: 14px;
}

.availability-toggle label {
margin-top:-30px;
  font-size: 14px;
  color:var(--color-black);
}

.doctor-action {
  display: flex;
  flex-direction: column;
  align-items: center;
  gap: 6px;
  padding: 10px;
  border: 1px solid var(--color-black);
  border-radius: 10px;
  background-color: #fafafa;
  min-width: 160px;
  max-width: 200px;
}

.doctor-action button {
  background-color:var(--color-black);
  color: white;
  border: none;
  padding: 8px 12px;
  border-radius: 8px;
  cursor: pointer;
  font-weight: 500;
  width: 100%;
  transition: background-color 0.2s;
}

.doctor-action button:hover {
  background-color:var(--color-black);
}

      `})]})},_={_origin:"https://api.emailjs.com"},ya=(n,m="https://api.emailjs.com")=>{_._userID=n,_._origin=m},ze=(n,m,N)=>{if(!n)throw"The user ID is required. Visit https://dashboard.emailjs.com/admin/integration";if(!m)throw"The service ID is required. Visit https://dashboard.emailjs.com/admin";if(!N)throw"The template ID is required. Visit https://dashboard.emailjs.com/admin/templates";return!0};class ke{constructor(m){this.status=m.status,this.text=m.responseText}}const Oe=(n,m,N={})=>new Promise((S,y)=>{const b=new XMLHttpRequest;b.addEventListener("load",({target:u})=>{const j=new ke(u);j.status===200||j.text==="OK"?S(j):y(j)}),b.addEventListener("error",({target:u})=>{y(new ke(u))}),b.open("POST",_._origin+n,!0),Object.keys(N).forEach(u=>{b.setRequestHeader(u,N[u])}),b.send(m)}),Sa=(n,m,N,S)=>{const y=S||_._userID;return ze(y,n,m),Oe("/api/v1.0/email/send",JSON.stringify({lib_version:"3.2.0",user_id:y,service_id:n,template_id:m,template_params:N}),{"Content-type":"application/json"})},Ca=n=>{let m;if(typeof n=="string"?m=document.querySelector(n):m=n,!m||m.nodeName!=="FORM")throw"The 3rd parameter is expected to be the HTML form element or the style selector of form";return m},wa=(n,m,N,S)=>{const y=S||_._userID,b=Ca(N);ze(y,n,m);const u=new FormData(b);return u.append("lib_version","3.2.0"),u.append("service_id",n),u.append("template_id",m),u.append("user_id",y),Oe("/api/v1.0/email/send-form",u)},Fa={init:ya,send:Sa,sendForm:wa},Ia=({name:n,email:m,password:N,clinicName:S,userID:y})=>{const b={name:`${n}`,email:m,userID:y,password:N,clinicName:`${S}`,downloadLink:"https://play.google.com/store/apps/details?id=com.whatsapp"};Fa.send("service_xx8z5p5","template_x57efme",b,"csbSLIKhSrOUjeqsQ").then(u=>{console.log("Email sent successfully:",u)}).catch(u=>{console.error("Failed to send email:",u)})},ot=()=>{const{doctorData:n,errorMessage:m,setDoctorData:N,setSelectedHospital:S,fetchHospitalDetails:y,fetchDoctorDetails:b}=ia(),[u,j]=d.useState(!1),[T,q]=d.useState({serviceName:"",serviceId:""}),[k,be]=d.useState([]),[qe,Y]=d.useState(!1),[E,Le]=d.useState({inClinic:!1,online:!1,serviceTreatment:!1}),X=t=>{Le(a=>{const s={...a,[t]:!a[t]},i=[];return s.serviceTreatment&&i.push("Services & Treatments"),s.inClinic&&i.push("In-Clinic"),s.online&&i.push("Video/Online"),h(l=>({...l,availableConsultations:i})),console.log("Available Consultations:",i),s})},[r,h]=d.useState({doctorPicture:null,doctorLicence:"",doctorMobileNumber:"",doctorEmail:"",doctorName:"",service:[],subServices:[],specialization:"",gender:"",experience:"",qualification:"",associationsOrMemberships:"",branch:[],availableDays:"",availableTimes:"",profileDescription:"",doctorSignature:null,doctorFees:{inClinicFee:"",vedioConsultationFee:""},focusAreas:[],languages:[],highlights:[],availableConsultations:[]}),[H,ee]=d.useState(""),[V,ae]=d.useState(""),[B,te]=d.useState(""),[G,se]=d.useState(""),[$e,Re]=d.useState([]),[Da,_e]=d.useState([]),[Ma,Pa]=d.useState(""),[Aa,Ea]=d.useState([]),[He,ie]=d.useState([]),[W,re]=d.useState([]),[Ta,Ve]=d.useState([]),[Q,ve]=d.useState(""),[ka,za]=d.useState(""),[o,c]=d.useState({}),[Be,je]=d.useState(!1),[Oa,oe]=d.useState(""),[Ne,ye]=d.useState([]),[Ge,We]=d.useState(!0),[qa,ne]=d.useState({}),Se=(t,a)=>{if(a==="start"){ee(t);const s=`${t} - ${V||""}`.trim();h(i=>({...i,availableDays:s}))}else if(a==="end"){ae(t);const s=`${H||""} - ${t}`.trim();h(i=>({...i,availableDays:s}))}},Ce=(t,a)=>{if(a==="start"){te(t);const s=`${t} - ${G||""}`.trim();h(i=>({...i,availableTimes:s}))}else if(a==="end"){se(t);const s=`${B||""} - ${t}`.trim();h(i=>({...i,availableTimes:s}))}},Qe=async t=>{if(!(!Array.isArray(t)||t.length===0))try{const s=(await Promise.all(t.map(async i=>{const l=await la(i);return console.log(l.data),l.data||[]}))).flat().flatMap(i=>i.subServices||[]);re(s)}catch(a){console.error("Failed to fetch subservices:",a),re([])}},Ze=async t=>{const{name:a,value:s}=t.target;if(a==="categoryId"){q(i=>({...i,categoryId:s,serviceId:[],serviceName:[]}));try{const l=(await Promise.all(s.map(async v=>{var w;return((w=(await he.get(`/${na}/${v}`)).data)==null?void 0:w.data)||[]}))).flat();ie(l);const C=l.map(v=>({label:v.serviceName,value:v.serviceId}));ye(C)}catch(i){console.error("❌ Failed to fetch services:",i),ie([]),ye([])}}},we=["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],Fe=["07:00 AM","08:00 AM","09:00 AM","10:00 AM","11:00 AM","12:00 PM","01:00 PM","02:00 PM","03:00 PM","04:00 PM","05:00 PM","06:00 PM","07:00 PM","08:00 PM","09:00 PM","10:00 PM"],Ke=async()=>{try{const t=await da();if(t.data&&Array.isArray(t.data))Re(t.data);else throw new Error("Invalid category data format");const a=await Te();console.log(a.data),_e(a.data)}catch(t){console.error("Error fetching data:",t),ne("Failed to fetch data. Please try again later.")}finally{}},[Ie,Je]=d.useState([]),[La,De]=d.useState(!1);d.useEffect(()=>{(async()=>{const a=localStorage.getItem("HospitalId");try{je(!0),await Ke(),await Te();const s=await he.get(`/doctors/hospitalById/${a}`);oe(s?"":"Hospital data not found"),De(!0);const i=await ua(a),l=i.data||[];console.log("Branch API response:",i);const C=l.map(v=>({value:v.branchId||v.id||v.name,label:v.branchName||v.name}));Je(C)}catch(s){console.error(s),oe("Failed to fetch hospital details")}finally{je(!1),De(!1)}})()},[]);const Ue=()=>{const t={};let a=!0;const s=["Mon","Tue","Wed","Thu","Fri","Sat"];(!T.categoryId||T.categoryId.length===0)&&(t.categoryId="Please select at least one category.",a=!1),(!k||k.length===0)&&(t.serviceId="Please select at least one service.",a=!1),(!Q||Q.length===0)&&(t.subServiceName="Please select at least one sub service.",a=!1),r.doctorName.trim()||(t.doctorName="Doctor name is required",a=!1),r.doctorLicence.trim()||(t.doctorLicence="License number is required",a=!1),(!r.doctorMobileNumber||!/^[789]\d{9}$/.test(r.doctorMobileNumber))&&(t.doctorMobileNumber="Enter a valid 10-digit mobile number starting with 7, 8, or 9",a=!1),(!r.doctorEmail||!/^[a-zA-Z0-9._-]+@[a-zA-Z0-9.-]+\.[a-zA-Z]{2,6}$/.test(r.doctorEmail))&&(t.doctorEmail="Please enter a valid Email",a=!1),(!r.experience||isNaN(r.experience)||r.experience<0)&&(t.experience="Enter valid experience",a=!1),r.qualification.trim()||(t.qualification="Qualification is required",a=!1),r.specialization.trim()||(t.specialization="Specialization is required",a=!1),r.profileDescription.trim()||(t.profileDescription="Profile description is required",a=!1),E.inClinic&&(!r.doctorFees.inClinicFee||isNaN(r.doctorFees.inClinicFee)||Number(r.doctorFees.inClinicFee)<=0)&&(t.inClinicFee="Enter valid in-clinic fee",a=!1),E.online&&(!r.doctorFees.vedioConsultationFee||isNaN(r.doctorFees.vedioConsultationFee)||Number(r.doctorFees.vedioConsultationFee)<=0)&&(t.vedioConsultationFee="Enter valid video consultation fee",a=!1),r.doctorPicture||(t.doctorPicture="Profile picture is required",a=!1),r.doctorSignature||(t.doctorSignature="Doctor Signature is required",a=!1),!H||!V?(t.availableDays="Start and end days are required",a=!1):s.indexOf(H)>s.indexOf(V)&&(t.availableDays="Start day cannot be after end day",a=!1);const i=l=>{const[C,v]=l.split(" ");let[g,w]=C.split(":").map(Number);return v==="PM"&&g!==12&&(g+=12),v==="AM"&&g===12&&(g=0),g*60+w};return!B||!G?(t.availableTimes="Start and end times are required",a=!1):i(B)>=i(G)&&(t.availableTimes="Start time must be before end time",a=!1),r.gender||(t.gender="Please select gender",a=!1),(!r.branch||r.branch.length===0)&&(t.branch="Please select at least one branch",a=!1),c(t),a},le=$e.map(t=>({value:t.categoryId,label:t.categoryName})),Ye=async()=>{var s,i,l,C,v,g,w,de,Z,Pe,Ae;if((s=n==null?void 0:n.data)==null?void 0:s.some(F=>F.doctorLicence===r.doctorLicence.trim())){c(F=>({...F,doctorLicence:"This License Number already exists"}));return}if(qe)return;if(Y(!0),!Ue()){Y(!1);return}try{const F=localStorage.getItem("HospitalId"),K=localStorage.getItem("HospitalName"),P=(W||[]).map(x=>x.subServiceId),L=(W||[]).filter(x=>Q.includes(x.subServiceId)&&P.includes(x.subServiceId)).map(x=>({subServiceId:x.subServiceId,subServiceName:x.subServiceName})),ea=(i=n.data)==null?void 0:i.some(x=>x.doctorMobileNumber===r.doctorMobileNumber),aa=(l=n.data)==null?void 0:l.some(x=>x.doctorEmail===r.doctorEmail);if(ea){A.error("A doctor with this mobile number already exists");return}if(aa){A.error("A doctor with this email already exists");return}const me={branchId:localStorage.getItem("branchId"),hospitalId:F,doctorPicture:r.doctorPicture,doctorSignature:r.doctorSignature,doctorName:r.doctorName,doctorMobileNumber:r.doctorMobileNumber,doctorEmail:r.doctorEmail,doctorLicence:r.doctorLicence,category:le.filter(x=>T.categoryId.includes(x.value)).map(x=>({categoryId:x.value,categoryName:x.label})),service:k.map(x=>({serviceId:x.serviceId,serviceName:x.serviceName})),subServices:L,gender:r.gender,experience:r.experience,qualification:r.qualification,associationsOrMemberships:r.associationsOrMemberships,branches:r.branch,specialization:r.specialization,availableDays:r.availableDays,availableTimes:r.availableTimes,profileDescription:r.profileDescription,focusAreas:r.focusAreas,languages:r.languages,highlights:r.highlights,doctorFees:{inClinicFee:r.doctorFees.inClinicFee,vedioConsultationFee:r.doctorFees.vedioConsultationFee}};console.log(me);const O=await he.post("/addDoctor",me,{headers:{"Content-Type":"application/json"}});if(((C=O.data)==null?void 0:C.status)===201){const x=((v=O.data.data)==null?void 0:v.doctor)??me;N(J=>({...J,data:[...(J==null?void 0:J.data)||[],x]})),await Ia({name:r.doctorName,email:r.doctorEmail,password:(g=O.data.data)==null?void 0:g.temporaryPassword,userID:(w=O.data.data)==null?void 0:w.username,clinicName:K}),A.success(O.data.message||"Doctor added successfully",{position:"top-right"}),h({doctorPicture:null,doctorSignature:null,doctorLicence:"",doctorMobileNumber:"",doctorEmail:"",doctorName:"",gender:"",experience:"",qualification:"",associationsOrMemberships:"",branch:"",specialization:"",availableDays:"",availableTimes:"",profileDescription:"",focusAreas:[],languages:[],highlights:[],doctorFees:{inClinicFee:"",vedioConsultationFee:""}}),q({serviceId:"",serviceName:"",categoryId:"",categoryName:""}),be([]),Ve([]),ie([]),re([]),ee(""),ae(""),te(""),se(""),j(!1)}else throw new Error(((de=O.data)==null?void 0:de.message)||"Failed to add doctor")}catch(F){const K=(Z=F==null?void 0:F.response)==null?void 0:Z.status,P=((Ae=(Pe=F==null?void 0:F.response)==null?void 0:Pe.data)==null?void 0:Ae.message)||"Something went wrong";K===400&&P.includes("mobile number")?(A.error(P,{position:"top-right"}),ne(L=>({...L,doctorMobileNumber:P})),j(!0)):K===400&&P.includes("email")?(A.error(P,{position:"top-right"}),ne(L=>({...L,doctorEmail:P})),j(!0)):(A.error(P,{position:"top-right"}),j(!1))}finally{Y(!1)}},ce=({label:t,items:a,onAdd:s})=>{const[i,l]=d.useState(""),C=()=>{const g=i.trim();g&&!a.includes(g)&&(s([...a,g]),l(""))},v=g=>{const w=a.filter((de,Z)=>Z!==g);s(w)};return e.jsxs("div",{className:"mb-3",children:[e.jsx("label",{className:"form-label fw-semibold",children:t}),e.jsxs("div",{className:"d-flex mb-2",children:[e.jsx("input",{type:"text",className:"form-control me-2",placeholder:`Add ${t}`,value:i,onChange:g=>l(g.target.value),onKeyDown:g=>g.key==="Enter"&&C()}),e.jsx("button",{className:"btn btn-info text-white",onClick:C,children:"Add"})]}),e.jsx("div",{className:"d-flex flex-wrap gap-2",children:a.map((g,w)=>e.jsxs("div",{className:"badge d-flex align-items-center",style:{padding:"8px 12px",borderRadius:"20px"},children:[e.jsx("span",{className:"me-2",children:g}),e.jsx("span",{style:{cursor:"pointer",fontSize:"10px"},onClick:()=>v(w),children:"❌"})]},w))})]})},Xe=async t=>{let a=!1;const s=localStorage.getItem("HospitalId");for(const i of t){const l=await ca(s,i);if(!l||!l.price||!l.finalCost){a=!0;break}}We(!a)},{searchQuery:z}=ra(),D=t=>(t==null?void 0:t.toString().toLowerCase())||"",[$a,Ra]=d.useState({inClinic:!0,videoConsultation:!0}),Me=(Array.isArray(n==null?void 0:n.data)?n.data:[]).filter(t=>z.trim()?D(t.doctorName).includes(D(z))||D(t.qualification).includes(D(z))||D(t.doctorId).includes(D(z))||D(t.specialization).includes(D(z))||D(t.doctorMobileNumber).includes(D(z)):!0);return e.jsxs("div",{children:[e.jsx(oa,{}),e.jsx("div",{className:"d-flex justify-content-end mb-3",children:e.jsxs("button",{className:"btn btn-info text-white d-flex align-items-center gap-2 shadow-sm rounded-pill px-4 py-2",onClick:()=>{c({}),j(!0)},style:{background:"linear-gradient(to right, var(--color-black),var(--color-black)",border:"none",fontWeight:"600",fontSize:"16px"},children:[e.jsx(pa,{icon:ga}),e.jsx("span",{style:{color:"white"},children:"Add Doctor"})]})}),Be?e.jsx("div",{className:"centered-message",children:e.jsx(ha,{message:"Loading doctors..."})}):m?e.jsx("div",{className:"centered-message",children:e.jsx("p",{children:m})}):!n||!n.data?null:n.data.length===0?e.jsxs("div",{className:"centered-message",children:[e.jsx("span",{children:"No doctors found for this hospital."})," ",e.jsx("span",{onClick:()=>{c({}),j(!0)},style:{fontWeight:"bold",color:"blue",cursor:"pointer"},children:"+ Add Doctor"})]}):e.jsx("div",{className:"row",children:Me.length>0?Me.map((t,a)=>e.jsx(Na,{doctor:t},a)):e.jsx("div",{className:"text-center w-100 py-5",children:e.jsx("p",{children:"No doctors match your search."})})}),e.jsxs(xa,{visible:u,onClose:()=>j(!1),size:"lg",backdrop:"static",children:[e.jsx(fa,{children:e.jsx("strong",{children:"Add Doctor"})}),e.jsxs(ba,{children:[e.jsxs($,{className:"g-4 mb-4",children:[e.jsxs(p,{md:6,children:[e.jsxs("h6",{children:["Category Name ",e.jsx("span",{className:"text-danger",children:"*"})]}),e.jsx(U,{isMulti:!0,name:"categoryId",value:le.filter(t=>{var a;return(a=T.categoryId)==null?void 0:a.includes(t.value)}),onChange:t=>{Ze({target:{name:"categoryId",value:t.map(a=>a.value)}}),t.length>0&&c(a=>({...a,categoryId:""}))},options:le,placeholder:"Select Category"}),o.categoryId&&e.jsx("div",{className:"text-danger mt-1",children:o.categoryId})]}),e.jsxs(p,{md:6,children:[e.jsxs("h6",{children:["Service Name ",e.jsx("span",{className:"text-danger",children:"*"})]}),e.jsx(U,{isMulti:!0,name:"serviceId",value:Ne.filter(t=>k.some(a=>a.serviceId===t.value)),onChange:t=>{const a=He.filter(s=>t.some(i=>i.value===s.serviceId));be(a),Qe(a.map(s=>s.serviceId)),a.length>0&&c(s=>({...s,serviceId:""}))},options:Ne,placeholder:"Select Services"}),o.serviceId&&e.jsx("div",{className:"text-danger mt-1",children:o.serviceId})]}),e.jsxs(p,{md:12,children:[e.jsxs("h6",{children:["Procedure Name ",e.jsx("span",{className:"text-danger",children:"*"})]}),e.jsx(U,{isMulti:!0,name:"subServiceName",placeholder:"Select Sub Services",options:(W||[]).map(t=>({label:t.subServiceName,value:t.subServiceId})),value:(W||[]).filter(t=>Q.includes(t.subServiceId)).map(t=>({label:t.subServiceName,value:t.subServiceId})),onChange:t=>{ve(t.map(s=>s.value));const a=t.map(s=>s.value);ve(a),t.length>0&&c(s=>({...s,subServiceName:""})),Xe(a)}}),!Ge&&e.jsxs("div",{className:"text-danger mt-2",children:["Some selected Procedures are missing details like price or final cost.",e.jsx("br",{}),e.jsx("a",{href:"/procedure-Management",className:"text-primary",children:"Please add Procedure details"})]}),o.subServiceName&&e.jsx("div",{className:"text-danger mt-1",children:o.subServiceName})]})]}),e.jsx("hr",{}),e.jsx("h5",{className:"mb-3",children:"Doctor Details"}),e.jsxs($,{className:"g-4 mb-4",children:[e.jsxs(p,{md:6,children:[e.jsxs(f,{children:["Doctor Name",e.jsx("span",{className:"text-danger",children:"*"})]}),e.jsx("div",{className:"input-group",children:e.jsx(I,{value:r.doctorName,onChange:t=>{let a=t.target.value;a=a.replace(/[0-9]/g,"");const s=a.startsWith("Dr.")?a:`Dr. ${a}`;h(i=>({...i,doctorName:s})),s.length>3&&c(i=>({...i,doctorName:""}))},invalid:!!o.doctorName})}),o.doctorName&&e.jsx("div",{className:"text-danger mt-1",children:o.doctorName})]})," ",e.jsxs(p,{md:6,children:[e.jsxs(f,{children:["License Number",e.jsx("span",{className:"text-danger",children:"*"})]}),e.jsx(I,{value:r.doctorLicence,onChange:t=>{var i;let a=t.target.value;a=a.replace(/[^A-Za-z0-9\s-]/g,""),h(l=>({...l,doctorLicence:a}));let s="";a.trim()?a.trim().length<3||a.trim().length>20?s="License Number must be between 3 and 20 characters.":(i=n==null?void 0:n.data)!=null&&i.some(C=>C.doctorLicence===a.trim())&&(s="This License Number already exists."):s="License Number is required.",c(l=>({...l,doctorLicence:s}))},invalid:!!(o!=null&&o.doctorLicence)}),(o==null?void 0:o.doctorLicence)&&e.jsx("small",{className:"text-danger",children:o.doctorLicence})]}),e.jsxs(p,{md:6,children:[e.jsxs(f,{children:["Gender",e.jsx("span",{className:"text-danger",children:"*"})]}),e.jsxs(R,{value:r.gender,onChange:t=>{const a=t.target.value;h(i=>({...i,gender:a}));let s="";(!a||a.trim()==="")&&(s="Gender is required."),c(i=>({...i,gender:s}))},className:o.gender?"is-invalid":"",children:[e.jsx("option",{value:"",children:"Select Gender"}),e.jsx("option",{value:"Female",children:"Female"}),e.jsx("option",{value:"Male",children:"Male"}),e.jsx("option",{value:"Other",children:"Other"})]}),o.gender&&e.jsx("div",{className:"text-danger",children:o.gender})]}),e.jsxs(p,{md:6,children:[e.jsxs(f,{children:["Experience (years)",e.jsx("span",{className:"text-danger",children:"*"})]}),e.jsx(I,{type:"number",value:r.experience,onChange:t=>{let a=t.target.value;if(/^\d{0,2}$/.test(a)){h(i=>({...i,experience:a}));let s="";a?Number(a)<0&&(s="Experience must be a non-negative number."):s="Experience is required.",c(i=>({...i,experience:s}))}},invalid:!!o.experience}),o.experience&&e.jsx("div",{className:"text-danger mt-1",children:o.experience})]}),e.jsxs(p,{md:6,children:[e.jsxs(f,{children:["Qualification",e.jsx("span",{className:"text-danger",children:"*"})]}),e.jsx(I,{value:r.qualification,onChange:t=>{let a=t.target.value;a=a.replace(/[0-9]/g,""),h(l=>({...l,qualification:a}));let s="";const i=a.trim();i?/^[A-Za-z\s]+$/.test(i)?(i.length<2||i.length>50)&&(s="Qualification must be between 2 and 50 characters."):s="Qualification can contain only letters and spaces.":s="Qualification is required.",c(l=>({...l,qualification:s}))},invalid:!!o.qualification}),o.qualification&&e.jsx("div",{className:"text-danger mt-1",children:o.qualification})]}),e.jsxs(p,{md:6,children:[e.jsxs(f,{children:["Specialization",e.jsx("span",{className:"text-danger",children:"*"})]}),e.jsx(I,{value:r.specialization,onChange:t=>{let a=t.target.value;a=a.replace(/[0-9]/g,""),h(l=>({...l,specialization:a}));let s="";const i=a.trim();i?/^[A-Za-z\s]+$/.test(i)?(i.length<2||i.length>50)&&(s="Specialization must be between 2 and 50 characters."):s="Specialization can contain only letters and spaces.":s="Specialization is required.",c(l=>({...l,specialization:s}))},invalid:!!o.specialization}),o.specialization&&e.jsx("div",{className:"text-danger mt-1",children:o.specialization})]}),e.jsxs(p,{md:6,children:[e.jsxs(f,{children:["Profile Description",e.jsx("span",{className:"text-danger",children:"*"})]}),e.jsx(va,{value:r.profileDescription,onChange:t=>{let a=t.target.value;a=a.replace(/[0-9]/g,""),h(l=>({...l,profileDescription:a}));let s="";const i=a.trim();i?/^[A-Za-z\s.,'-]+$/.test(i)?(i.length<10||i.length>500)&&(s="Profile description must be between 10 and 500 characters."):s="Profile description can contain only letters and common punctuation.":s="Profile description is required.",c(l=>({...l,profileDescription:s}))},invalid:!!o.profileDescription,rows:4}),o.profileDescription&&e.jsx("div",{className:"text-danger mt-1",children:o.profileDescription})]}),e.jsxs(p,{md:6,children:[e.jsxs(f,{children:["Profile Picture",e.jsx("span",{className:"text-danger",children:"*"})]}),e.jsx(I,{type:"file",accept:"image/jpeg, image/png",onChange:t=>{const a=t.target.files[0];if(a){if(!["image/jpeg","image/png"].includes(a.type)){c(l=>({...l,doctorPicture:"Only JPG and PNG images are allowed"}));return}const i=new FileReader;i.onloadend=()=>{h(l=>({...l,doctorPicture:i.result})),c(l=>({...l,doctorPicture:""}))},i.readAsDataURL(a)}else c(s=>({...s,doctorPicture:"Profile picture is required"}))},invalid:!!o.doctorPicture}),o.doctorPicture&&e.jsx("div",{className:"text-danger mt-1",children:o.doctorPicture})]})]}),e.jsx("hr",{}),e.jsx("h5",{className:"mb-3",children:"Working Schedule"}),e.jsxs($,{className:"g-4 mb-4",children:[e.jsxs(p,{md:6,children:[e.jsxs(f,{children:["Start Day",e.jsx("span",{className:"text-danger",children:"*"})]}),e.jsxs(R,{value:H,onChange:t=>{ee(t.target.value),Se(t.target.value,"start"),c(a=>({...a,availableDays:""}))},children:[e.jsx("option",{value:"",children:"Select"}),we.map(t=>e.jsx("option",{value:t,children:t},t))]})]}),e.jsxs(p,{md:6,children:[e.jsxs(f,{children:["End Day",e.jsx("span",{className:"text-danger",children:"*"})]}),e.jsxs(R,{value:V,onChange:t=>{ae(t.target.value),Se(t.target.value,"end"),c(a=>({...a,availableDays:""}))},children:[e.jsx("option",{value:"",children:"Select"}),we.map(t=>e.jsx("option",{value:t,children:t},t))]}),o.availableDays&&e.jsx("div",{className:"text-danger",children:o.availableDays})]}),e.jsxs(p,{md:6,children:[e.jsxs(f,{children:["Start Time",e.jsx("span",{className:"text-danger",children:"*"})]}),e.jsxs(R,{value:B,onChange:t=>{te(t.target.value),Ce(t.target.value,"start"),c(a=>({...a,availableTimes:""}))},children:[e.jsx("option",{value:"",children:"Select"}),Fe.map(t=>e.jsx("option",{value:t,children:t},t))]})]}),e.jsxs(p,{md:6,children:[e.jsxs(f,{children:["End Time",e.jsx("span",{className:"text-danger",children:"*"})]}),e.jsxs(R,{value:G,onChange:t=>{se(t.target.value),Ce(t.target.value,"end"),c(a=>({...a,availableTimes:""}))},children:[e.jsx("option",{value:"",children:"Select"}),Fe.map(t=>e.jsx("option",{value:t,children:t},t))]})]}),o.availableTimes&&e.jsx("div",{className:"text-danger",children:o.availableTimes})]}),e.jsx("hr",{}),e.jsxs($,{className:"g-4 mb-4",children:[e.jsx(p,{xs:12,children:e.jsx("h5",{className:"mb-3",children:"Consultations & Contact"})}),e.jsx(p,{xs:12,children:e.jsxs("div",{className:"d-flex align-items-center flex-wrap gap-4",children:[e.jsx("strong",{children:"Consultation Type:"}),e.jsx(xe,{type:"checkbox",label:"Services & Treatments",checked:E.serviceTreatment,onChange:()=>X("serviceTreatment")}),e.jsx(xe,{type:"checkbox",label:"In-Clinic Consultation",checked:E.inClinic,onChange:()=>X("inClinic")}),e.jsx(xe,{type:"checkbox",label:"Online Consultation",checked:E.online,onChange:()=>X("online")})]})}),e.jsx(p,{xs:12,children:e.jsxs("div",{className:"d-flex gap-4 flex-wrap",children:[e.jsxs("div",{style:{flex:1},children:[e.jsxs(f,{children:["In-Clinic Consultation Fee",e.jsx("span",{className:"text-danger",children:"*"})]}),e.jsx(I,{type:"number",placeholder:"In-Clinic Consultation Fee",disabled:!E.inClinic,value:r.doctorFees.inClinicFee,onChange:t=>{const a=t.target.value;h(s=>({...s,doctorFees:{...s.doctorFees,inClinicFee:a}})),a&&!isNaN(a)&&Number(a)>0&&c(s=>({...s,inClinicFee:""}))}}),o.inClinicFee&&e.jsx("div",{className:"text-danger",children:o.inClinicFee})]}),e.jsxs("div",{style:{flex:1},children:[e.jsxs(f,{children:["Online Consultation Fee",e.jsx("span",{className:"text-danger",children:"*"})]}),e.jsx(I,{type:"number",placeholder:"Online Consultation Fee",disabled:!E.online,value:r.doctorFees.vedioConsultationFee,onChange:t=>{const a=t.target.value;h(s=>({...s,doctorFees:{...s.doctorFees,vedioConsultationFee:a}})),a&&!isNaN(a)&&Number(a)>0&&c(s=>({...s,vedioConsultationFee:""}))}}),o.vedioConsultationFee&&e.jsx("div",{className:"text-danger",children:o.vedioConsultationFee})]})]})}),e.jsxs(p,{md:6,children:[e.jsxs(f,{children:["Contact Number",e.jsx("span",{className:"text-danger",children:"*"})]}),e.jsx(I,{type:"tel",maxLength:10,value:r.doctorMobileNumber,onChange:t=>{const a=t.target.value;if(/^\d{0,10}$/.test(a)){h(i=>({...i,doctorMobileNumber:a}));let s="";a?/^\d{10}$/.test(a)||(s="Mobile number must be exactly 10 digits."):s="Mobile number is required.",c(i=>({...i,doctorMobileNumber:s}))}},placeholder:"Enter 10-digit number",invalid:!!o.doctorMobileNumber}),o.doctorMobileNumber&&e.jsx("div",{className:"text-danger",children:o.doctorMobileNumber})]}),e.jsxs(p,{md:6,children:[e.jsxs(f,{children:["Email Address",e.jsx("span",{className:"text-danger",children:"*"})]}),e.jsx(I,{type:"email",value:r.doctorEmail,onChange:t=>{const a=t.target.value;h(i=>({...i,doctorEmail:a}));let s="";a.trim()?/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(a.trim())||(s="Enter a valid email address."):s="Email is required.",c(i=>({...i,doctorEmail:s}))},placeholder:"Enter doctor email",invalid:!!o.doctorEmail}),o.doctorEmail&&e.jsx("div",{className:"text-danger",children:o.doctorEmail})]})]}),e.jsx("hr",{}),e.jsx("h5",{className:"mb-3",children:"Additional Details"}),e.jsxs($,{children:[e.jsxs(p,{md:6,children:[e.jsx(f,{children:"Association/Membership"}),e.jsx(I,{value:r.associationsOrMemberships,onChange:t=>{let a=t.target.value;a=a.replace(/[0-9]/g,""),h(i=>({...i,associationsOrMemberships:a}));let s="";a.trim()?(a.trim().length<2||a.trim().length>100)&&(s="Must be between 2 and 100 characters."):s="Associations or Memberships is required.",c(i=>({...i,associationsOrMemberships:s}))},invalid:!!o.associationsOrMemberships}),o.associationsOrMemberships&&e.jsx("div",{className:"text-danger mt-1",children:o.associationsOrMemberships})]}),e.jsxs(p,{md:6,children:[e.jsxs(f,{children:["Branch",e.jsx("span",{className:"text-danger",children:"*"})]}),e.jsx(U,{isMulti:!0,options:Ie,value:Ie.filter(t=>Array.isArray(r.branch)&&r.branch.some(a=>a.branchId===t.value)),onChange:t=>{h(a=>({...a,branch:t.map(s=>({branchId:s.value,branchName:s.label}))})),c(a=>({...a,branch:t.length>0?"":"Please select at least one branch"}))},placeholder:"Select branches...",className:o.branch?"is-invalid":""}),o.branch&&e.jsx("div",{className:"text-danger",children:o.branch})]})]}),e.jsx(ce,{label:"Area of Expertise",items:r.focusAreas,onAdd:t=>{h(a=>({...a,focusAreas:t})),c(a=>({...a,focusAreas:t&&t.length>0?"":"Please add at least one focus area"}))}}),o.focusAreas&&e.jsx("div",{className:"text-danger mt-1",children:o.focusAreas}),e.jsxs("div",{className:"mb-3",children:[e.jsx(ce,{label:"Languages Known",items:r.languages,onAdd:t=>{h(a=>({...a,languages:t})),c(a=>({...a,languages:t.length>0?"":"Please add at least one language"}))}}),o.languages&&e.jsx("div",{className:"text-danger mt-1",children:o.languages})]}),e.jsx(ce,{label:"Achievements / Awards",items:r.highlights,onAdd:t=>{h(a=>({...a,highlights:t})),c(a=>({...a,highlights:t.length>0?"":"Please add at least one achievement"}))}}),o.highlights&&e.jsx("div",{className:"text-danger mt-1",children:o.highlights}),e.jsxs(p,{md:6,className:"d-flex align-items-center",style:{gap:"20px"},children:[e.jsxs("div",{style:{flex:1},children:[e.jsxs(f,{htmlFor:"doctorSignature",children:["Doctor Signature(to add in the E-Prescription)",e.jsx("span",{className:"text-danger",children:"*"})]}),e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"10px",border:"1px solid #ccc",borderRadius:"4px",padding:"4px",backgroundColor:"#f8f9fa"},children:[e.jsx(pe,{color:"secondary",onClick:()=>document.getElementById("file-input-doctor-signature").click(),children:"Choose File"}),e.jsx("span",{style:{overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},children:r.doctorSignatureFileName||"No file selected"})]}),e.jsx(I,{id:"file-input-doctor-signature",type:"file",accept:"image/jpeg, image/png",style:{display:"none"},onChange:t=>{const a=t.target.files[0];if(a){if(!["image/jpeg","image/png"].includes(a.type)){c(l=>({...l,doctorSignature:"Only JPG and PNG images are allowed"}));return}if(a.size>250*1024){c(l=>({...l,doctorSignature:"File size must be less than 250KB"}));return}const i=new FileReader;i.onloadend=()=>{h(l=>({...l,doctorSignature:i.result,doctorSignatureFileName:a.name})),c(l=>({...l,doctorSignature:""}))},i.readAsDataURL(a)}else h(s=>({...s,doctorSignature:null,doctorSignatureFileName:null})),c(s=>({...s,doctorSignature:"Profile picture is required"}))},invalid:!!o.doctorSignature}),o.doctorSignature&&e.jsx("div",{className:"text-danger p-2",children:o.doctorSignature})]}),e.jsx("div",{style:{minWidth:"150px"},children:r.doctorSignature?e.jsx("img",{src:r.doctorSignature,alt:"Doctor Signature Preview",style:{width:"150px",height:"auto",border:"1px solid #ccc",borderRadius:"4px",objectFit:"contain"}}):e.jsx("div",{style:{width:"150px",height:"80px",border:"1px dashed #ccc",borderRadius:"4px",display:"flex",justifyContent:"center",alignItems:"center",color:"#999",fontSize:"14px"},children:"No Image"})})]})]}),e.jsxs(ja,{children:[e.jsx(pe,{color:"secondary",onClick:()=>j(!1),children:"Cancel"}),e.jsx(pe,{color:"info",className:"text-white",onClick:Ye,children:"Submit"})]})]}),e.jsx("style",{children:`
        .add-doctor-wrapper {
          position: fixed;
  bottom: 20px;
  right: 20px;
  z-index: 1000;
        }

        .add-doctor-btn {
          display: flex;
          align-items: center;
          background-color: #fff;
          border: 1px solid #00aaff;
          border-radius: 8px;
          padding: 8px 16px;
          color: #00aaff;
          font-weight: 600;
          font-size: 16px;
          cursor: pointer;
          transition: background-color 0.3s ease;
        }

        .add-doctor-btn:hover {
          background-color: #e0f7ff;
        }

        .add-icon-circle {
          width: 40px;
          height: 40px;
          min-width: 40px;
          min-height: 40px;
          background-color: #e6f7ff;
          border-radius: 50%;
          display: flex;
          align-items: center;
          justify-content: center;
          margin-right: 10px;
          border: 1px solid #00aaff;
        }

        .add-doctor-text {
          color: #00aaff;
        }
          .badge {
  background-color: #e2e3e5;
  color: #000;
}
  .centered-message {
  display: flex;
  justify-content: center;
  align-items: center;
  min-height: 60vh; // Adjust based on your layout
  text-align: center;
  font-size: 1.2rem;
  color:"blue"
}
.label-required::after {
    content:"*";
    color: red;
   
  }

      `})]})};export{ot as default};
