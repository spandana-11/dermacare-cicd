import{o as v,L as S,O as B,S as k,r as m,j as e,Q as L,D as x}from"./index-DCoy9qDQ.js";import{b as w,c as F,a as j}from"./index.esm-DtFxhFhC.js";/* empty css                      */import{C as R,a as y}from"./CRow-CDV-UCKJ.js";import{C as H}from"./CInputGroup-BYhSTmV5.js";import{C as n}from"./CFormInput-D2bumhc9.js";import{C as U}from"./CInputGroupText-BiZd1xxG.js";import{c as $}from"./cil-search-CDkY_4k-.js";import{C as G,a as O,b as f,c as i,d as V,e as c}from"./CTable-Jz5Gi5g8.js";import{C as N,a as M,b as I,c as _}from"./CModalHeader-D-yRvihe.js";import{C as A}from"./CModalTitle-u9V3N_77.js";import"./CFormLabel-6tdtF_hF.js";import"./CConditionalPortal-BGIePYHM.js";const q=async()=>{try{return(await v.get(`${S}/${B}`,{headers:{Accept:"application/json","Content-Type":"application/json"}})).data}catch(t){throw t}},z=async t=>{try{return await v.post(`${S}/${k}`,t,{headers:{"Content-Type":"application/json"}})}catch(d){throw console.error("Error creating payout:",d),d}},ne=()=>{const[t,d]=m.useState([]),[h,P]=m.useState(""),[l,p]=m.useState(null),[T,u]=m.useState(!1),[a,r]=m.useState({amount:"",paymentMethod:"",paymentStatus:"",userEmail:"",userMobile:"",billingName:"",billingAddress:""});m.useEffect(()=>{(async()=>{try{const o=await q();d(o.data)}catch(o){console.error("Failed to fetch payouts:",o)}})()},[]);const E=async()=>{if(!a.amount||!a.paymentMethod||!a.userEmail){x.error("Fill all required fields");return}try{const s=await z(a);d([s.data,...t]),x.success("Added successfully"),u(!1),r({amount:"",paymentMethod:"",paymentStatus:"",userEmail:"",userMobile:"",billingName:"",billingAddress:""})}catch{x.error("Add failed")}},g=(t||[]).filter(s=>{var o,C,b;return((o=s.billingName)==null?void 0:o.toLowerCase().includes(h.toLowerCase()))||((C=s.userEmail)==null?void 0:C.toLowerCase().includes(h.toLowerCase()))||((b=s.userMobile)==null?void 0:b.toLowerCase().includes(h.toLowerCase()))});return e.jsxs(w,{className:"p-4",children:[e.jsx(L,{}),e.jsx("div",{className:"d-flex justify-content-between mb-3",children:e.jsx("h5",{className:"text-muted",children:"Home / Payout Management"})}),e.jsx("h3",{className:"mb-4",children:"Transaction List"}),e.jsxs(R,{className:"mb-3 align-items-center",children:[e.jsx(y,{md:6,children:e.jsxs(H,{children:[e.jsx(n,{placeholder:"Search by billing name, email, or mobile",value:h,onChange:s=>P(s.target.value)}),e.jsx(U,{children:e.jsx(F,{icon:$})})]})}),e.jsx(y,{md:6,className:"text-end",children:e.jsxs("strong",{children:["No. of Payouts: ",g.length]})})]}),e.jsxs(G,{striped:!0,responsive:!0,children:[e.jsx(O,{children:e.jsxs(f,{children:[e.jsx(i,{children:"S.No"}),e.jsx(i,{children:"transactionId"}),e.jsx(i,{children:"bookingId"}),e.jsx(i,{children:"Billing Name"}),e.jsx(i,{children:"Amount"}),e.jsx(i,{children:"paymentMethod"}),e.jsx(i,{children:"Actions"})]})}),e.jsx(V,{children:g.map((s,o)=>e.jsxs(f,{children:[e.jsx(c,{children:o+1}),e.jsx(c,{children:s.transactionId}),e.jsx(c,{children:s.bookingId}),e.jsx(c,{children:s.billingName}),e.jsx(c,{children:s.amount}),e.jsx(c,{children:s.paymentMethod||"Online"}),e.jsx(c,{children:e.jsx(j,{size:"sm",color:"info",onClick:()=>p(s),children:"View"})})]},s.id))})]}),e.jsxs(N,{visible:T,onClose:()=>u(!1),children:[e.jsx(M,{children:e.jsx(A,{children:"Add New Payout"})}),e.jsxs(I,{children:[e.jsx(n,{className:"mb-2",placeholder:"User ID",value:a.userId,onChange:s=>r({...a,userId:s.target.value})}),e.jsx(n,{className:"mb-2",placeholder:"Doctor ID",value:a.doctorId,onChange:s=>r({...a,doctorId:s.target.value})}),e.jsx(n,{className:"mb-2",placeholder:"Booking ID",value:a.bookingId,onChange:s=>r({...a,bookingId:s.target.value})}),e.jsx(n,{className:"mb-2",placeholder:"Currency (e.g. INR)",value:a.currency,onChange:s=>r({...a,currency:s.target.value})}),e.jsx(n,{className:"mb-2",placeholder:"Payment Status",value:a.paymentStatus,onChange:s=>r({...a,paymentStatus:s.target.value})}),e.jsx(n,{className:"mb-2",placeholder:"Amount",value:a.amount,onChange:s=>r({...a,amount:s.target.value})}),e.jsx(n,{className:"mb-2",placeholder:"Payment Method",value:a.paymentMethod,onChange:s=>r({...a,paymentMethod:s.target.value})}),e.jsx(n,{className:"mb-2",placeholder:"User Email",value:a.userEmail,onChange:s=>r({...a,userEmail:s.target.value})}),e.jsx(n,{className:"mb-2",placeholder:"User Mobile",value:a.userMobile,onChange:s=>r({...a,userMobile:s.target.value})}),e.jsx(n,{className:"mb-2",placeholder:"Billing Name",value:a.billingName,onChange:s=>r({...a,billingName:s.target.value})}),e.jsx(n,{placeholder:"Billing Address",value:a.billingAddress,onChange:s=>r({...a,billingAddress:s.target.value})})]}),e.jsxs(_,{children:[e.jsx(j,{color:"secondary",onClick:()=>u(!1),children:"Cancel"}),e.jsx(j,{color:"primary",onClick:E,children:"Submit"})]})]}),e.jsxs(N,{visible:!!l,onClose:()=>p(null),children:[e.jsx(M,{children:e.jsx(A,{children:"Transaction Details"})}),e.jsxs(I,{children:[e.jsxs("p",{children:[e.jsx("strong",{children:"Transaction ID:"})," ",(l==null?void 0:l.transactionId)||"TRX123456"]}),e.jsxs("p",{children:[e.jsx("strong",{children:"User Email:"})," ",l==null?void 0:l.userEmail]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Mobile:"})," ",l==null?void 0:l.userMobile]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Amount:"})," ",l==null?void 0:l.amount]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Payment Method:"})," ",l==null?void 0:l.paymentMethod]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Billing Name:"})," ",l==null?void 0:l.billingName]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Billing Address:"})," ",l==null?void 0:l.billingAddress]})]})]})]})};export{ne as default};
