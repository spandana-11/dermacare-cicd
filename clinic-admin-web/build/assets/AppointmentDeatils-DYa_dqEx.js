import{O as f,u as b,h as D,r as l,j as e,D as h}from"./index-DH1Jg1rH.js";import{a as N,d as w}from"./appointmentAPI-BwU_zXaH.js";import{a as i}from"./index.esm-c9HNEOUi.js";const C=()=>{var d,n;const{id:x}=f(),g=b(),o=D(),[a,t]=l.useState(!1),[r,j]=l.useState(null),s=(d=g.state)==null?void 0:d.appointment;if(!s)return e.jsxs("div",{children:[e.jsxs("h3",{children:["No Appointment Data Found for ID: ",x]}),e.jsx(i,{color:"primary",onClick:()=>o(-1),children:"Back"})]});const u=async()=>{if(window.confirm("Are you sure you want to delete this booking?"))try{t(!0),await w(s.bookingId),h.success("Booking deleted successfully!",{position:"top-right"}),o("/appointment-management")}catch{h.error("Failed to delete booking.",{position:"top-right"})}finally{t(!1)}};return l.useEffect(()=>{(async()=>{if((s==null?void 0:s.status.toLowerCase())==="confirmed"||(s==null?void 0:s.status.toLowerCase())==="completed"&&(s!=null&&s.doctorId))try{const c=await N(s.doctorId);console.log(c.data.data),j(c.data.data)}catch(c){console.error("Failed to fetch doctor details:",c)}})()},[s]),e.jsxs("div",{className:"container mt-4",children:[e.jsxs("div",{className:"bg-info text-white p-3 d-flex justify-content-between align-items-center rounded",children:[e.jsx("div",{children:e.jsxs("h5",{className:"mb-1",children:["Booking ID: ",s.bookingId]})}),e.jsxs("div",{className:"d-flex gap-2",children:[e.jsx("h5",{className:"mb-1 text-warning",children:s.status}),e.jsx(i,{color:"secondary",size:"sm",onClick:()=>o(-1),children:"Back"}),e.jsx(i,{color:"danger",size:"sm",className:"text-white",onClick:u,disabled:a,children:a?"Deleting...":"Delete"})]})]}),e.jsxs("div",{className:"mt-4",children:[e.jsx("h6",{className:"fw-bold",children:"Patient Details"}),e.jsxs("p",{children:[e.jsx("strong",{children:"Patient Name:"})," ",s==null?void 0:s.name,"   ",e.jsx("strong",{children:"Patient Number:"})," ",s==null?void 0:s.mobileNumber,"   ",e.jsx("strong",{children:"Booking For:"})," ",s==null?void 0:s.bookingFor]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Patient Age:"})," ",s==null?void 0:s.age," Yrs   ",e.jsx("strong",{children:"Gender:"})," ",s==null?void 0:s.gender]}),e.jsxs("p",{className:"mb-3",children:[e.jsx("strong",{children:"Problem:"}),e.jsx("br",{}),s==null?void 0:s.problem]}),e.jsx("h6",{className:"fw-bold",children:"Slot & Payment Details"}),e.jsxs("p",{children:[e.jsx("strong",{children:"Date:"})," ",s==null?void 0:s.serviceDate,"   ",e.jsx("strong",{children:"Time:"})," ",s==null?void 0:s.servicetime,"   "]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Paid Amount:"})," ₹ ",s==null?void 0:s.totalFee,"   ",e.jsx("strong",{children:"Consultation Fee:"})," ₹ ",s==null?void 0:s.consultationFee,"   "]}),e.jsx("h6",{className:"fw-bold",children:"Doctor Details"}),e.jsxs("p",{children:[e.jsx("strong",{children:"Doctor ID:"})," ",s==null?void 0:s.doctorId,"   ",e.jsx("strong",{children:"Consultation Type:"})," ",s==null?void 0:s.consultationType]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Service Name:"})," ",s==null?void 0:s.servicename,"   ",e.jsx("strong",{children:"Service ID:"})," ",s==null?void 0:s.serviceId]})]}),((s==null?void 0:s.status.toLowerCase())==="confirmed"||(s==null?void 0:s.status.toLowerCase())==="completed")&&r&&e.jsxs(e.Fragment,{children:[e.jsx("h6",{className:"fw-bold mt-4",children:"Doctor Details"}),e.jsxs("div",{className:"d-flex align-items-center gap-3 border rounded p-3 shadow-sm",children:[e.jsx("img",{src:r.doctorPicture?`data:image/jpeg;base64,${r.doctorPicture}`:"/default-doctor.png",alt:`Dr. ${r.doctorName}`,width:80,height:80,className:"rounded-circle border"}),e.jsxs("div",{children:[e.jsxs("h6",{className:"text-primary fw-bold mb-1",children:["Dr. ",r.doctorName]}),e.jsxs("p",{className:"mb-1",children:[e.jsx("strong",{children:"Specialization:"})," ",r.specialization]}),e.jsxs("p",{className:"mb-1",children:[e.jsx("strong",{children:"Experience:"})," ",r.experience," years"]}),e.jsxs("p",{className:"mb-1",children:[e.jsx("strong",{children:"Qualification:"})," ",r.qualification]}),e.jsxs("p",{className:"mb-0",children:[e.jsx("strong",{children:"Languages:"})," ",(n=r.languages)==null?void 0:n.join(", ")]})]})]})]})]})};export{C as default};
