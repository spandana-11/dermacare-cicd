import{r as d,_ as L,R as A,c as K,P as i,aj as O,j as e,q as k}from"./index-DOkwaX0Y.js";import{C as H}from"./CustomerManagementAPI-CnUfNEVa.js";import{C as R,a as _}from"./CCardBody-DtQk2umz.js";import{f as F,e as N,d as y}from"./CNavItem-qJi1XpZf.js";import{e as G,f as b}from"./DefaultLayout-CVG2MkAx.js";import{C as D,a as t}from"./CRow-C9-Fb04l.js";import"./index.esm-DAUg0Y0u.js";import"./cil-user-Ddrdy7PS.js";const I=d.forwardRef((c,n)=>{var{children:m,as:s="div",className:l}=c,h=L(c,["children","as","className"]);return A.createElement(s,Object.assign({className:K("card-header",l)},h,{ref:n}),m)});I.propTypes={as:i.elementType,children:i.node,className:i.string};I.displayName="CCardHeader";const U=d.createContext({}),T=d.forwardRef(({children:c,activeItemKey:n,className:m,defaultActiveItemKey:s,onChange:l},h)=>{const C=d.useId(),o=n!==void 0,[v,g]=d.useState(()=>o?void 0:s),x=o?n:v,f=j=>{o||g(j),l==null||l(j)};return A.createElement(U.Provider,{value:{_activeItemKey:x,setActiveItemKey:f,id:C}},A.createElement("div",{className:K("tabs",m),ref:h},c))});T.propTypes={activeItemKey:i.oneOfType([i.number,i.string]),children:i.node,className:i.string,defaultActiveItemKey:i.oneOfType([i.number,i.string]),onChange:i.func};T.displayName="CTabs";const Y=()=>{var f,j,w,E,P,S;const{customerId:c}=O(),[n,m]=d.useState(0),[s,l]=d.useState(null),[h,C]=d.useState(!0),[o,v]=d.useState(null);d.useEffect(()=>{if(!c)return;(async()=>{try{C(!0);const r=await H(c),a=(r==null?void 0:r.data)||r;l({...a,email:a.email||a.emailId||"",appointments:a.appointments||[]})}catch(r){v("Failed to load customer details."),console.error(r)}finally{C(!1)}})()},[c]);const g=p=>{var r,a;return(a=(r=s==null?void 0:s.appointments)==null?void 0:r.filter(u=>u.status===p))==null?void 0:a.sort((u,B)=>new Date(B.date)-new Date(u.date))},x=p=>{const r=g(p);return r!=null&&r.length?e.jsx("ul",{children:r.map((a,u)=>e.jsxs("li",{children:[e.jsx("strong",{children:a.type})," on ",a.date]},a.id||u))}):e.jsxs("p",{children:["No ",p.toLowerCase()," appointments available."]})};return h?e.jsxs("div",{className:"text-center my-5",children:[e.jsx(k,{color:"primary"}),e.jsx("p",{children:"Loading customer details..."})]}):o||!s?e.jsx("p",{className:"text-danger",children:o||"Customer not found."}):e.jsxs(R,{children:[e.jsx(I,{children:e.jsxs("h5",{children:["Customer Details: ",s.fullName||"-"]})}),e.jsx(_,{children:e.jsxs(T,{activeTab:n,onActiveTabChange:m,children:[e.jsxs(F,{variant:"tabs",children:[e.jsx(N,{children:e.jsx(y,{active:n===0,children:"Basic Details"})}),e.jsx(N,{children:e.jsx(y,{active:n===1,children:"Address"})}),e.jsx(N,{children:e.jsx(y,{active:n===2,children:"Appointments"})})]}),e.jsxs(G,{children:[e.jsx(b,{visible:n===0,children:e.jsx(R,{className:"p-3 shadow-sm rounded-3 border-light",children:e.jsxs(D,{className:"gy-3",children:[e.jsxs(t,{sm:"6",children:[e.jsx("strong",{children:"Customer Id:"}),e.jsx("div",{children:s.customerId||"-"})]}),e.jsxs(t,{sm:"6",children:[e.jsx("strong",{children:"Full Name:"}),e.jsx("div",{children:s.fullName||"-"})]}),e.jsxs(t,{sm:"6",children:[e.jsx("strong",{children:"Email:"}),e.jsx("div",{children:s.email||"-"})]}),e.jsxs(t,{sm:"6",children:[e.jsx("strong",{children:"Mobile Number:"}),e.jsx("div",{children:s.mobileNumber||"-"})]}),e.jsxs(t,{sm:"6",children:[e.jsx("strong",{children:"Gender:"}),e.jsx("div",{children:s.gender||"-"})]}),e.jsxs(t,{sm:"6",children:[e.jsx("strong",{children:"Date of Birth:"}),e.jsx("div",{children:s.dateOfBirth||"-"})]}),e.jsxs(t,{sm:"6",children:[e.jsx("strong",{children:"Refer Code:"}),e.jsx("div",{children:s.referCode||"-"})]})]})})}),e.jsx(b,{visible:n===1,children:e.jsxs(D,{className:"mt-3 gy-3",children:[e.jsxs(t,{sm:"6",children:[e.jsx("strong",{children:"House No:"})," ",((f=s.address)==null?void 0:f.houseNo)||"-"]}),e.jsxs(t,{sm:"6",children:[e.jsx("strong",{children:"Street:"})," ",((j=s.address)==null?void 0:j.street)||"-"]}),e.jsxs(t,{sm:"6",children:[e.jsx("strong",{children:"Landmark:"})," ",((w=s.address)==null?void 0:w.landmark)||"-"]}),e.jsxs(t,{sm:"6",children:[e.jsx("strong",{children:"City:"})," ",((E=s.address)==null?void 0:E.city)||"-"]}),e.jsxs(t,{sm:"6",children:[e.jsx("strong",{children:"State:"})," ",((P=s.address)==null?void 0:P.state)||"-"]}),e.jsxs(t,{sm:"6",children:[e.jsx("strong",{children:"Postal Code:"})," ",((S=s.address)==null?void 0:S.postalCode)||"-"]})]})}),e.jsx(b,{visible:n===2,children:e.jsxs("div",{className:"mt-3",children:[e.jsx("h6",{children:"Past Appointments"}),x("Past"),e.jsx("h6",{className:"mt-4",children:"Active Appointments"}),x("Active"),e.jsx("h6",{className:"mt-4",children:"Upcoming Appointments"}),x("Upcoming")]})})]})]})})]})};export{Y as default};
