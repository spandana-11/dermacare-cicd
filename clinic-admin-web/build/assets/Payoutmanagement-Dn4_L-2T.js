import{r as t,n as k,i as P,R as T,j as e,Q as A}from"./index-DOkwaX0Y.js";import{b as B,a as S}from"./index.esm-DAUg0Y0u.js";import{L as E}from"./loader-Y_qkV5fc.js";import{C as L,a as C}from"./CRow-C9-Fb04l.js";import{C as R,a as G,b as x,c as o,d as K,e as l}from"./CTable-xt3rD9S2.js";import{E as H}from"./eye-D7aMrCc8.js";import{C as U,a as X,b as F}from"./CModalHeader-DE82pQwV.js";import{C as Q}from"./CModalTitle-DY4WadaB.js";import"./createLucideIcon-cFB6LJia.js";import"./CNavItem-qJi1XpZf.js";const V=async()=>new Promise(d=>{setTimeout(()=>{d({data:[{transactionId:"TXN2025072801",bookingId:"BKG9011",billingName:"Ankit Sharma",amount:"₹2,499.00",paymentMethod:"Credit Card (HDFC)",userEmail:"ankit.sharma@example.com",userMobile:"9876543210",billingAddress:"Flat 204, Prestige Towers, Koramangala, Bangalore, India - 560034"},{transactionId:"TXN2025072802",bookingId:"BKG9012",billingName:"Priya Menon",amount:"₹3,200.00",paymentMethod:"UPI (priya@ybl)",userEmail:"priya.menon@example.com",userMobile:"9833012345",billingAddress:"C-16, Orchid Residency, Andheri West, Mumbai, India - 400058"},{transactionId:"TXN2025072803",bookingId:"BKG9013",billingName:"Rahul Verma",amount:"₹1,750.00",paymentMethod:"Net Banking (SBI)",userEmail:"rahul.v@example.com",userMobile:"9123456789",billingAddress:"A-10, Gaur City, Sector 121, Noida, India - 201301"}]})},2e3)}),te=()=>{const d=[{transactionId:"TXN-1001",bookingId:"BKG-001",billingName:"Local User1",amount:"1200",paymentMethod:"Cash",userEmail:"local1@example.com",userMobile:"9876543210",billingAddress:"Hyderabad, India"},{transactionId:"TXN-1002",bookingId:"BKG-002",billingName:"Local User2",amount:"1800",paymentMethod:"Card",userEmail:"local2@example.com",userMobile:"9876543211",billingAddress:"Mumbai, India"},{transactionId:"TXN-1003",bookingId:"BKG-003",billingName:"Local User3",amount:"2000",paymentMethod:"UPI",userEmail:"local3@example.com",userMobile:"9876543212",billingAddress:"Delhi, India"}],[m,N]=t.useState(d),[O,_]=t.useState(""),[s,g]=t.useState(null),[b,j]=t.useState(!1),{searchQuery:p,setSearchQuery:$}=k(),[r,M]=t.useState(1),[i,q]=t.useState(10),[z,W]=t.useState({transactionId:"",amount:"",paymentMethod:"",paymentStatus:"",userEmail:"",userMobile:"",billingName:"",billingAddress:""}),{user:u}=P(),I=(n,a)=>{var c,f;return(f=(c=u==null?void 0:u.permissions)==null?void 0:c[n])==null?void 0:f.includes(a)};t.useEffect(()=>{(async()=>{try{j(!0);const a=await V();N((a==null?void 0:a.data)??[])}catch(a){console.error("Failed to fetch payouts:",a)}finally{j(!1)}})()},[]);const h=T.useMemo(()=>{const n=p.toLowerCase().trim();return n?m.filter(a=>Object.values(a).some(c=>String(c).toLowerCase().includes(n))):m},[p,m]),y=h.slice((r-1)*i,r*i);return e.jsxs(B,{className:"p-4",children:[e.jsx(A,{}),e.jsxs(L,{className:"mb-3 align-items-center",children:[e.jsxs(C,{md:6,children:[" ",e.jsx("strong",{style:{color:"var(--color-black)"},children:"Transaction List"})]}),e.jsx(C,{md:6,className:"text-end",children:e.jsxs("strong",{style:{color:"var(--color-black)"},children:["No. of Payouts: ",h.length]})})]}),b?e.jsx("div",{className:"d-flex justify-content-center align-items-center",children:e.jsx(E,{message:"Loading payouts..."})}):e.jsxs(R,{striped:!0,hover:!0,responsive:!0,children:[e.jsx(G,{children:e.jsxs(x,{className:"pink-table  w-auto",children:[e.jsx(o,{children:"S.No"}),e.jsx(o,{children:"Booking ID"}),e.jsx(o,{children:"Billing Name"}),e.jsx(o,{children:"Amount"}),e.jsx(o,{children:"Payment Method"}),e.jsx(o,{className:"text-end",children:"Actions"})]})}),e.jsx(K,{className:"pink-table",children:y.length>0?y.map((n,a)=>e.jsxs(x,{children:[e.jsx(l,{children:(r-1)*i+a+1}),e.jsx(l,{children:n.bookingId}),e.jsx(l,{children:n.billingName}),e.jsx(l,{children:n.amount}),e.jsx(l,{children:n.paymentMethod}),e.jsx(l,{className:"text-end",children:e.jsx("div",{className:"d-flex justify-content-end gap-2",children:I("Payouts","read")&&e.jsx("button",{className:"actionBtn",onClick:()=>g(n),title:"View",children:e.jsx(H,{size:18})})})})]},`${n.bookingId}-${a}`)):e.jsx(x,{children:e.jsx(l,{colSpan:6,className:"text-center text-danger",children:"No payouts found."})})})]}),!b&&e.jsx("div",{className:"d-flex justify-content-end mt-3",style:{marginRight:"40px"},children:Array.from({length:Math.ceil(h.length/i)},(n,a)=>e.jsx(S,{style:{backgroundColor:r===a+1?"var(--color-black)":"#fff",color:r===a+1?"#fff":"var(--color-black)",border:"1px solid #ccc",borderRadius:"5px",cursor:"pointer"},className:"ms-2",onClick:()=>M(a+1),children:a+1},a))}),e.jsxs(U,{visible:!!s,onClose:()=>g(null),children:[e.jsx(X,{children:e.jsx(Q,{children:"Transaction Details"})}),e.jsxs(F,{children:[e.jsxs("p",{children:[e.jsx("strong",{children:"Transaction ID:"})," ",s==null?void 0:s.transactionId]}),e.jsxs("p",{children:[e.jsx("strong",{children:"User Email:"})," ",s==null?void 0:s.userEmail]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Mobile:"})," ",s==null?void 0:s.userMobile]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Amount:"})," ",s==null?void 0:s.amount]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Payment Method:"})," ",s==null?void 0:s.paymentMethod]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Billing Name:"})," ",s==null?void 0:s.billingName]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Billing Address:"})," ",s==null?void 0:s.billingAddress]})]})]})]})};export{te as default};
