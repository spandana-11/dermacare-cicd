import{j as e,r as n,n as os,R as ls,Q as ds,H as ms,aa as us,S as Fe,v as we,E as Te,F as De,ab as hs,B as R,ac as xs,ad as ps}from"./index-C7YuJAAI.js";import"./index.es-C66M5OKo.js";import{a as k}from"./index.esm-B3sb08FX.js";import{F as gs,a as Me,b as ke}from"./index-2Kd0T2z5.js";import{b as js,c as me,d as ue,e as he,C as vs,a as ys}from"./CListGroupItem-CEfJKhIh.js";import{a as i,C as g}from"./CRow-CsccKEEA.js";import{C as F,a as Q}from"./CFormInput-CNM-faD4.js";import{C as Ns}from"./CInputGroup-VSbhwEHL.js";import{C as fs}from"./ConfirmationModal-Dkioqmh-.js";import{c as xe}from"./capitalizeWords-CuwF8AcI.js";import{L as bs}from"./loader-CAA1vNCh.js";import{C as Ee}from"./CForm-B3RLrqng.js";import{C as Ve,a as Re,b as $e}from"./CModalHeader-Bku5iNpS.js";import{C as Le}from"./CModalTitle-CrSU8CaH.js";import{C as Oe}from"./CModalFooter-BtK5r1_p.js";import{C as $}from"./CFormSelect-DDyQ53N9.js";import{C as Ss}from"./CFormLabel-C_a-pvv2.js";import{C as As,a as Ps,b as pe,c as L,d as Is,e as M}from"./CTable-nsP1Y0CA.js";import{E as Cs}from"./eye--1BT-mqr.js";import{P as Qs,T as Fs}from"./trash-2-BXEuflO5.js";import"./CNavItem-BHTEVeIb.js";import"./createLucideIcon-Cqvp34RQ.js";const ge=({title:y,qaList:h=[],setQAList:N})=>{const[P,f]=n.useState(""),[w,E]=n.useState(""),[b,T]=n.useState([]),[J,Be]=n.useState("add"),[O,B]=n.useState(null),D=()=>{w.trim()!==""&&(T([...b,w]),E(""))},c=d=>{T(b.filter(m=>m!==d))},G=()=>{if(P.trim()&&b.length>0){const d=h.findIndex(m=>Object.keys(m)[0]===P);if(O!==null){const m=[...h];m[O]={[P]:b},N(m),B(null)}else if(d!==-1){const m=[...h];m[d]={[P]:b},N(m)}else N([...h,{[P]:b}]);f(""),T([])}},K=d=>{const m=h[d],I=Object.keys(m)[0],W=m[I];f(I),T(W),B(d)},te=d=>{const m=[...h];m.splice(d,1),N(m),O===d&&(f(""),T([]),B(null))};return n.useEffect(()=>{if(h.length>0){const d=h[h.length-1],m=Object.keys(d)[0],I=d[m];f(m),T(I)}},[h]),n.useEffect(()=>{if((J==="edit"||J==="view")&&h.length>0){const d=h[h.length-1],m=Object.keys(d)[0],I=d[m];f(m),T(I)}},[h,J]),e.jsxs(i,{md:12,className:"mt-3",children:[e.jsx("label",{className:"mb-2",children:"Instruction"}),e.jsx(F,{placeholder:"Enter your question",value:P,onChange:d=>f(d.target.value)}),e.jsx("label",{className:"mt-3",children:"Guidelines"}),e.jsxs(Ns,{className:"mb-2",children:[e.jsx(F,{placeholder:"Enter answer",value:w,onChange:d=>E(d.target.value)}),e.jsx(k,{color:"success",onClick:D,className:"text-white",children:e.jsx(gs,{})})]}),b.length>0&&e.jsx(vs,{className:"mb-3",children:b.map((d,m)=>e.jsxs(ys,{className:"d-flex justify-content-between align-items-center",children:[d,e.jsxs("div",{className:"d-flex gap-2",children:[e.jsx(Me,{onClick:()=>{E(d),c(d)},style:{color:"orange",cursor:"pointer"},title:"Edit Answer"}),e.jsx(ke,{onClick:()=>c(d),style:{color:"red",cursor:"pointer"},title:"Delete Answer"})]})]},m))}),e.jsx(k,{color:"info",className:"mb-3 text-white",onClick:G,children:O!==null?"Update Q&A":"Save Q&A"}),h.length>0&&e.jsxs(e.Fragment,{children:[e.jsx("h6",{className:"mt-4",children:"Saved Questions & Answers"}),h.map((d,m)=>{const I=Object.keys(d)[0],W=d[I];return e.jsxs("div",{className:"mb-3",children:[e.jsx("strong",{children:I}),e.jsx("ul",{children:W.map((je,ae)=>e.jsx("li",{children:je},ae))}),e.jsxs("div",{className:"d-flex gap-2",children:[e.jsx(Me,{onClick:()=>K(m),style:{color:"orange",cursor:"pointer"},title:"Edit Q&A"}),e.jsx(ke,{onClick:()=>te(m),style:{color:"red",cursor:"pointer"},title:"Delete Q&A"})]})]},m)})]})]})},ws=({preQAList:y,setPreQAList:h,procedureQAList:N,setProcedureQAList:P,postQAList:f,setPostQAList:w})=>e.jsxs(js,{default:!0,children:[e.jsxs(me,{itemKey:1,children:[e.jsx(ue,{children:"Pre-Procedure"}),e.jsx(he,{children:e.jsx(ge,{title:"Pre-Procedure",qaList:y,setQAList:h})})]}),e.jsxs(me,{itemKey:2,children:[e.jsx(ue,{children:"Procedure"}),e.jsx(he,{children:e.jsx(ge,{title:"Procedure",qaList:N,setQAList:P})})]}),e.jsxs(me,{itemKey:3,children:[e.jsx(ue,{children:"Post-Procedure"}),e.jsx(he,{children:e.jsx(ge,{title:"Post-Procedure",qaList:f,setQAList:w})})]})]}),pr=()=>{const[y,h]=n.useState([]),[N,P]=n.useState([]),[f,w]=n.useState(!1),[E,b]=n.useState(null),[T,J]=n.useState(""),[Be,O]=n.useState([]),[B,D]=n.useState(!1),[c,G]=n.useState(null),[K,te]=n.useState(!1),[d,m]=n.useState(""),[I,W]=n.useState(""),[je,ae]=n.useState([]),[Ts,ne]=n.useState([]),[ve,ie]=n.useState([]),[U,ye]=n.useState([]),[Ge,ce]=n.useState(""),[Ue,He]=n.useState(""),[Ne,Ds]=n.useState(null),{searchQuery:fe,setSearchQuery:Ms}=os(),[H,qe]=n.useState(1),[_,ks]=n.useState(10),[Y,ze]=n.useState({serviceImage:"",viewImage:"",subServiceName:"",serviceName:"",serviceImageFile:null}),[Es,Vs]=n.useState([]),[Rs,$s]=n.useState([]),[Ls,Os]=n.useState([]),Je={1:"Generic ConsentForm",2:"Procedure ConsentForm"};let be=[];try{typeof y.descriptionQA=="string"?be=JSON.parse(y.descriptionQA):be=y.descriptionQA||[]}catch(s){console.error("Invalid descriptionQA format:",s)}const[r,p]=n.useState({categoryName:"",categoryId:"",serviceName:"",subServiceName:"",description:"",price:"",gst:0,consultationFee:0,procedureQA:[],preProcedureQA:[],postProcedureQA:[]}),[q,Se]=n.useState("add"),[Bs,Gs]=n.useState(null),[Us,Hs]=n.useState(""),oe=ls.useMemo(()=>{const s=fe.toLowerCase().trim();return s?y.filter(t=>Object.values(t).some(a=>String(a).toLowerCase().includes(s))):y},[fe,y]),Ke=()=>{Se("add"),ne([]),ae([]),m(""),ce(""),p({categoryName:"",categoryId:"",serviceName:"",serviceId:"",subServiceId:"",subServiceName:"",price:"",discount:0,gst:0,consultationFee:0,minTime:"",taxPercentage:0,status:"",serviceImage:"",serviceImageFile:null,viewImage:"",viewDescription:"",consentFormType:Fe.consentFormType==="Generic ConsentForm"?"1":"2",platformFeePercentage:0,descriptionQA:[]}),D(!0)},We=async s=>{var Qe;console.log(s.subServiceId),He(s.subServiceId),Se("edit"),D(!0);const t=N.find(A=>A.categoryName===s.categoryName),a=(t==null?void 0:t.categoryId)||"";let o=[];try{o=((Qe=(await we.get(`/${Te}/${a}`)).data)==null?void 0:Qe.data)||[],console.log(o),ie(o)}catch(A){console.error("Error fetching service list:",A)}const l=o.find(A=>A.serviceName===s.serviceName),u=(l==null?void 0:l.serviceId)||"";let j=[];if(u)try{const V=(await De(u)).data;Array.isArray(V)?j=V.flatMap(cs=>cs.subServices||[]):V!=null&&V.subServices&&(j=V.subServices)}catch(A){console.error("Error fetching subservices:",A)}ye({subServices:j});const v=j.find(A=>A.subServiceName===s.subServiceName),C=(v==null?void 0:v.subServiceId)||"",z=(v==null?void 0:v.subServiceName)||"";ce(C);const ee=Array.isArray(s.procedureQA)?s.procedureQA:JSON.parse(s.procedureQA||"[]"),se=Array.isArray(s.preProcedureQA)?s.preProcedureQA:JSON.parse(s.preProcedureQA||"[]"),re=Array.isArray(s.postProcedureQA)?s.postProcedureQA:JSON.parse(s.postProcedureQA||"[]"),S=s.serviceImage||"";S.startsWith("data:")||`${S}`,p({subServiceId:C,subServiceName:z,serviceName:s.serviceName||"",serviceId:u,categoryName:s.categoryName||"",categoryId:a||"",price:s.price||"",discount:s.discountPercentage||0,gst:s.gst||0,consultationFee:s.consultationFee||0,taxPercentage:s.taxPercentage||0,minTime:s.minTime||"",serviceImage:S,serviceImageFile:null,status:s.status||"",viewDescription:s.viewDescription||"",consentFormType:s.consentFormType?String(s.consentFormType):"",platformFeePercentage:s.platformFeePercentage||0,viewImage:s.viewImage||"",procedureQA:ee,preProcedureQA:se,postProcedureQA:re}),ne(formattedQA)},[_e,le]=n.useState(!1),[Ae,Ye]=n.useState(null),[x,de]=n.useState({subServiceName:"",serviceName:"",serviceId:"",categoryName:"",price:"",status:"",taxPercentage:"",descriptionQA:"",answers:"",minTime:"",discount:"",viewDescription:"",consentFormType:"",serviceImage:"",bannerImage:""}),[qs,zs]=n.useState({}),X=async()=>{w(!0),b(null);try{const s=await ms();if(s.data&&Array.isArray(s.data)){const a=s.data.map(o=>({categoryId:o.categoryId,categoryName:o.categoryName}));P(s.data)}else throw new Error("Invalid category data format");const t=localStorage.getItem("HospitalId");if(t){const a=await us(t);Array.isArray(a)?(h(a),console.log(a)):(h([]),console.warn("No subservices found for this hospital."))}else console.warn("No hospitalId found in localStorage."),h([])}catch(s){console.error("Error fetching data:",s),b("Failed to fetch data. Please try again later.")}finally{w(!1)}};n.useEffect(()=>{X()},[]),n.useEffect(()=>{if(K&&(Y!=null&&Y.descriptionQA)&&typeof Y.descriptionQA=="string")try{ze(s=>({...s,descriptionQA:JSON.parse(s.descriptionQA)}))}catch{console.error("Invalid QA format")}},[K]);const Xe=parseFloat(r.minTime),Ze=()=>{const s={};return r.serviceName||(s.serviceName="Service name is required."),r.categoryName||(s.categoryName="Category is required."),r.price?isNaN(r.price)?s.price="price must be a valid number.":parseFloat(r.price)<0&&(s.price="price cannot be a negative number."):s.price="price is required.",r.status||(s.status="Status is required."),(r.gst===""||isNaN(r.gst)||parseFloat(r.gst)<0)&&(s.gst="GST must be a valid number and not negative."),(r.consultationFee===""||isNaN(r.consultationFee)||parseFloat(r.consultationFee)<0)&&(s.consultationFee="Consultation fee must be a valid number and not negative."),!r.discount&&r.discount!==0?s.discount="Discount is required.":parseFloat(r.discount)<0&&(s.discount="Discount cannot be a negative number."),!r.minTimeValue||isNaN(r.minTimeValue)?s.minTime="Minimum time is required":parseFloat(r.minTimeValue)<=0&&(s.minTime="Minimum time must be greater than zero."),r.viewDescription||(s.viewDescription="View description is Required."),r.consentFormType||(s.consentFormType="consentFormType is Required."),r.serviceImage||(console.log("Service Image in Form:",r.serviceImage),s.serviceImage="Please upload a service image."),r.categoryId||(s.categoryId="Please select a valid category."),de(s),Object.keys(s).length===0},Pe=oe.slice((H-1)*_,H*_),es=async()=>{var se,re;console.log("--- handleAddService START ---");const s=r.price*r.discount/100,t=r.price-s,a=t*r.taxPercentage/100,o=r.gst||0,l=t*(r.platformFeePercentage||0)/100,u=t+a-l,j=u+o+(r.consultationFee||0),v=`${r.minTimeValue} ${r.minTimeUnit}`;console.log("Calculated values:",{discountAmount:s,discountedCost:t,taxAmount:a,platformFee:l,clinicPay:u,finalCost:j});const C=await Ie(r.serviceImageFile),z=(C==null?void 0:C.split(",")[1])||"";if(!Ze()){R.error("Validation failed",{position:"top-right"});return}const ee={hospitalId:localStorage.getItem("HospitalId"),subServiceName:r.subServiceName,subServiceId:r.subServiceId,serviceId:r.serviceId,serviceName:r.serviceName,categoryName:r.categoryName,categoryId:r.categoryId,price:r.price,discountPercentage:r.discount,discountAmount:s,discountedCost:t,taxPercentage:r.taxPercentage,taxAmount:a,platformFeePercentage:r.platformFeePercentage,platformFee:l,clinicPay:u,finalCost:j,gst:r.gst,consultationFee:r.consultationFee,minTime:v,status:r.status,subServiceImage:z,procedureQA:r.procedureQA,preProcedureQA:r.preProcedureQA,postProcedureQA:r.postProcedureQA,viewDescription:r.viewDescription,consentFormType:Number(r.consentFormType)};console.log("Payload ready to submit:",ee);try{const S=await xs(ee,r.subServiceId);console.log("Response received:",S),S.status===201&&(R.success(S.data.message,{position:"top-right"}),D(!1),X(),Fe())}catch(S){console.error("Error in handleAddService:",S.response),R.error((re=(se=S.response)==null?void 0:se.data)==null?void 0:re.message,{position:"top-right"})}p({categoryName:"",categoryId:"",serviceName:"",serviceId:"",subServiceId:"",subServiceName:"",price:0,discount:0,gst:0,consultationFee:0,taxPercentage:0,minTimeValue:Xe,minTimeUnit:"",status:"",serviceImage:"",viewDescription:"",consentFormType:"",procedureQA:[],preProcedureQA:[],postProcedureQA:[],platformFeePercentage:0,descriptionQA:[]}),ne([]),console.log("--- handleAddService END ---")},ss=s=>{const t=parseInt(s,10);if(isNaN(t))return"Invalid time";if(t<60)return`${t} min`;const a=Math.floor(t/60),o=t%60;return o===0?`${a} hour${a>1?"s":""}`:`${a} hour${a>1?"s":""} ${o} min`},rs=async()=>{var s;try{const t=localStorage.getItem("HospitalId");let a="";r.serviceImageFile?a=(await Ie(r.serviceImageFile)).split(",")[1]:(s=r.serviceImage)!=null&&s.startsWith("data:")?a=r.serviceImage.split(",")[1]:a=r.serviceImage||"";const o=r.price>0?Number(r.price):0,l={hospitalId:t,subServiceName:r.subServiceName||"",viewDescription:r.viewDescription||"",consentFormType:Number(r.consentFormType),status:r.status||"",minTime:r.minTimeValue?`${r.minTimeValue} ${r.minTimeUnit}`:"",procedureQA:Array.isArray(r.procedureQA)?r.procedureQA:[],preProcedureQA:Array.isArray(r.preProcedureQA)?r.preProcedureQA:[],postProcedureQA:Array.isArray(r.postProcedureQA)?r.postProcedureQA:[],price:r.price||0,discountPercentage:r.discount||0,taxPercentage:r.taxPercentage||0,platformFeePercentage:r.platformFeePercentage||0,subServiceImage:a,gst:r.gst||0,consultationFee:r.consultationFee||0};console.log("Payload for updateSubServiceData:",l);const u=await hs(Ue,t,l);R.success("Procedure updated successfully!",{position:"top-right"}),te(!1),D(!1),X()}catch(t){console.error("Update failed:",t),R.error("Error updating service.",{position:"top-right"})}},Ie=s=>new Promise((t,a)=>{const o=new FileReader;o.readAsDataURL(s),o.onload=()=>t(o.result),o.onerror=l=>a(l)}),ts=async s=>{console.log(s),Ye(s.subServiceId),le(!0)},as=async()=>{console.log(Ae);const s=localStorage.getItem("HospitalId");try{const t=await ps(Ae,s);console.log("Service deleted:",t),R.success("Procedure deleted successfully!",{position:"top-right"}),X()}catch(t){console.error("Error deleting Procedure:",t)}le(!1)},ns=()=>{le(!1),console.log("Service deletion canceled")},Z=s=>{const{name:t,value:a}=s.target;p(o=>{if(t==="categoryName"){const l=N.find(u=>u.categoryName===a);return{...o,[t]:a,categoryId:l?l.categoryId:""}}return t==="gst"||t==="consultationFee"||t==="price"||t==="discount"||t==="taxPercentage"||t==="minTime"?{...o,[t]:parseFloat(a)||0}:{...o,[t]:a}}),de(o=>({...o,[t]:""}))},is=()=>{p({serviceName:"",categoryName:"",price:"",discount:0,taxPercentage:0,minTime:"",minTimeValue:"",minTimeUnit:"minutes",status:"",serviceImage:"",viewImage:"",viewDescription:"",consentFormType:"",categoryId:""}),D(!1),de({})},Ce=async s=>{var o;const{name:t,value:a}=s.target;if(t==="categoryName"){const l=N.find(u=>u.categoryId===a);p(u=>({...u,categoryName:(l==null?void 0:l.categoryName)||"",categoryId:a,serviceName:"",serviceId:""}));try{const j=((o=(await we.get(`/${Te}/${a}`)).data)==null?void 0:o.data)||[];ie(j)}catch(u){console.error("Failed to fetch services:",u),ie([])}}else if(t==="serviceName"){const l=ve.find(j=>j.serviceName===a),u=(l==null?void 0:l.serviceId)||"";if(p(j=>({...j,serviceName:a,serviceId:u})),u){const v=(await De(u)).data;let C=[];Array.isArray(v)?C=v.flatMap(z=>z.subServices||[]):v&&v.subServices&&(C=v.subServices),ye({subServices:C})}}else p(l=>({...l,[t]:a}))};return e.jsxs("div",{style:{overflow:"hidden"},children:[e.jsx(ds,{}),e.jsx("div",{children:e.jsx(Ee,{className:"d-flex justify-content-end mb-3",children:e.jsx("div",{className:" w-100",style:{display:"flex",justifyContent:"end",alignContent:"end",alignItems:"end"},children:e.jsx(k,{style:{color:"var(--color-black)",backgroundColor:"var(--color-bgcolor)"},onClick:()=>Ke(),children:"Add Procedure Details"})})})}),c&&e.jsxs(Ve,{visible:!!c,onClose:()=>G(null),size:"xl",children:[e.jsx(Re,{style:{color:"var(--color-black)"},children:e.jsx(Le,{className:"w-100 text-center  fs-4",children:"Procedure Details"})}),e.jsxs($e,{style:{color:"var(--color-black)"},children:[e.jsxs(g,{className:"mb-3",children:[e.jsxs(i,{sm:6,children:[e.jsx("strong",{children:"Procedure Name:"}),e.jsx("div",{children:c.subServiceName})]}),e.jsxs(i,{sm:6,children:[e.jsx("strong",{children:"Procedure ID:"}),e.jsx("div",{children:c.subServiceId})]})]}),e.jsxs(g,{className:"mb-3",children:[e.jsxs(i,{sm:6,children:[e.jsx("strong",{children:"Service Name:"}),e.jsx("div",{children:c.serviceName})]}),e.jsxs(i,{sm:6,children:[e.jsx("strong",{children:"Service Id:"}),e.jsx("div",{children:c.serviceId})]})]}),e.jsxs(g,{className:"mb-3",children:[e.jsxs(i,{sm:6,children:[e.jsx("strong",{children:"Category Name:"}),e.jsx("div",{children:c.categoryName})]}),e.jsxs(i,{sm:6,children:[e.jsx("strong",{children:"Category Id:"}),e.jsx("div",{children:c.categoryId})]}),e.jsxs(i,{sm:6,children:[e.jsx("strong",{children:"Consent Form Type:"}),e.jsx("div",{children:Je[c.consentFormType]||"N/A"})]})]}),e.jsx(g,{className:"mb-3",children:e.jsxs(i,{sm:6,children:[e.jsx("strong",{children:"Status:"}),e.jsx("div",{children:c.status})]})}),e.jsx("hr",{}),e.jsxs(g,{className:"mb-3",children:[e.jsxs(i,{sm:4,children:[e.jsx("strong",{children:"Price:"}),e.jsxs("div",{children:["â‚¹ ",Math.round(c.price)]})]}),e.jsxs(i,{sm:4,children:[e.jsx("strong",{children:"Discount %:"}),e.jsxs("div",{children:[Math.round(c.discountPercentage),"%"]})]}),e.jsxs(i,{sm:4,children:[e.jsx("strong",{children:"Discount Amount:"}),e.jsxs("div",{children:["â‚¹ ",Math.round(c.discountAmount)]})]})]}),e.jsxs(g,{className:"mb-3",children:[e.jsxs(i,{sm:4,children:[e.jsx("strong",{children:"Discounted Cost:"}),e.jsxs("div",{children:["â‚¹ ",Math.round(c.discountedCost)]})]}),e.jsxs(i,{sm:4,children:[e.jsx("strong",{children:"Tax %:"}),e.jsxs("div",{children:[Math.round(c.taxPercentage),"%"]})]}),e.jsxs(i,{sm:4,children:[e.jsx("strong",{children:"Tax Amount:"}),e.jsxs("div",{children:["â‚¹ ",Math.round(c.taxAmount)]})]})]}),e.jsxs(g,{className:"mb-3",children:[e.jsxs(i,{sm:4,children:[e.jsx("strong",{children:"Platform Fee %:"}),e.jsxs("div",{children:[Math.round(c.platformFeePercentage),"%"]})]}),e.jsxs(i,{sm:4,children:[e.jsx("strong",{children:"Platform Fee:"}),e.jsxs("div",{children:["â‚¹ ",Math.round(c.platformFee)]})]}),e.jsxs(i,{sm:4,children:[e.jsx("strong",{children:"Clinic Pay:"}),e.jsxs("div",{children:["â‚¹ ",Math.round(c.clinicPay)]})]})]}),e.jsxs(g,{className:"mb-3",children:[e.jsxs(i,{sm:4,children:[e.jsx("strong",{children:"GST:"}),e.jsxs("div",{children:["â‚¹ ",Math.round(c.gst)]})]}),e.jsxs(i,{sm:4,children:[e.jsx("strong",{children:"Consultation Fee:"}),e.jsxs("div",{children:["â‚¹ ",c.consultationFee]})]}),e.jsxs(i,{sm:4,children:[e.jsx("strong",{children:"Final Cost:"}),e.jsxs("div",{children:["â‚¹ ",Math.round(c.finalCost)]})]})]}),e.jsx(g,{className:"mb-3",children:e.jsxs(i,{sm:4,children:[e.jsx("strong",{children:"Service Time:"}),e.jsx("div",{children:ss(c.minTime)})]})}),e.jsx("hr",{}),e.jsx(g,{className:"mb-3",children:e.jsxs(i,{sm:12,children:[e.jsx("strong",{className:"mb-3",children:"Pre-Procedure QA:"}),Array.isArray(c.preProcedureQA)&&c.preProcedureQA.length>0?c.preProcedureQA.map((s,t)=>{const a=Object.keys(s)[0],o=s[a];return e.jsxs("div",{style:{marginBottom:"10px"},children:[e.jsx("strong",{children:a}),e.jsx("ul",{children:o.map((l,u)=>e.jsx("li",{children:l},u))})]},t)}):e.jsx("div",{children:"No Pre-Procedure Q&A available"})]})}),e.jsx(g,{className:"mb-3",children:e.jsxs(i,{sm:12,children:[e.jsx("strong",{className:"mb-3",children:"Procedure QA:"}),Array.isArray(c.procedureQA)&&c.procedureQA.length>0?c.procedureQA.map((s,t)=>{const a=Object.keys(s)[0],o=s[a];return e.jsxs("div",{style:{marginBottom:"10px"},children:[e.jsx("strong",{children:a}),e.jsx("ul",{children:o.map((l,u)=>e.jsx("li",{children:l},u))})]},t)}):e.jsx("div",{children:"No Procedure Q&A available"})]})}),e.jsx(g,{className:"mb-3",children:e.jsxs(i,{sm:12,children:[e.jsx("strong",{className:"mb-3",children:"Post-Procedure QA:"}),Array.isArray(c.postProcedureQA)&&c.postProcedureQA.length>0?c.postProcedureQA.map((s,t)=>{const a=Object.keys(s)[0],o=s[a];return e.jsxs("div",{style:{marginBottom:"10px"},children:[e.jsx("strong",{children:a}),e.jsx("ul",{children:o.map((l,u)=>e.jsx("li",{children:l},u))})]},t)}):e.jsx("div",{children:"No Post-Procedure Q&A available"})]})}),e.jsx("hr",{}),e.jsxs(g,{children:[e.jsxs(i,{sm:6,children:[e.jsx("strong",{children:"Service Image:"}),c.subServiceImage?e.jsxs("div",{className:"mt-2",children:[e.jsx("img",{src:`data:image/png;base64,${c.subServiceImage}`,alt:"Service",style:{width:"100%",maxWidth:"250px",borderRadius:"8px"}}),Ne&&e.jsx("img",{src:Ne,alt:"Preview",height:"80",className:"mt-2"})]}):e.jsx("div",{children:"No image available"})]}),e.jsxs(i,{sm:6,children:[e.jsx("strong",{children:"View Description:"}),e.jsx("div",{children:c.viewDescription})]})]})]}),e.jsx(Oe,{children:e.jsx(k,{color:"secondary",onClick:()=>G(null),children:"Close"})})]}),e.jsxs(Ve,{visible:B,onClose:()=>D(!1),size:"xl",backdrop:"static",children:[e.jsx(Re,{children:e.jsx(Le,{style:{textAlign:"center",width:"100%"},children:q==="edit"?"Edit Procedure Details":"Add New Procedure Details"})}),e.jsx($e,{children:e.jsxs(Ee,{children:[e.jsxs(g,{className:"mb-4",children:[e.jsxs(i,{md:4,children:[e.jsxs("h6",{children:["Category Name ",e.jsx("span",{className:"text-danger",children:"*"})]}),e.jsxs($,{value:r.categoryId||"",onChange:Ce,"aria-label":"Select Category",name:"categoryName",disabled:q==="edit",children:[e.jsx("option",{value:"",children:"Select a Category"}),N==null?void 0:N.map(s=>e.jsx("option",{value:s.categoryId,children:s.categoryName},s.categoryId))]}),x.categoryName&&e.jsx(Q,{className:"text-danger",children:x.categoryName})]}),e.jsxs(i,{md:4,children:[e.jsxs("h6",{children:["Service Name ",e.jsx("span",{className:"text-danger",children:"*"})]}),e.jsxs($,{name:"serviceName",value:r.serviceName||"",onChange:Ce,disabled:q==="edit",children:[e.jsx("option",{value:"",children:"Select Service"}),ve.map(s=>e.jsx("option",{value:s.serviceName,children:s.serviceName},s.serviceId))]}),x.serviceName&&e.jsx(Q,{className:"text-danger",children:x.serviceName})]}),e.jsxs(i,{md:4,children:[e.jsxs("h6",{children:["Procedure Name ",e.jsx("span",{className:"text-danger",children:"*"})]}),e.jsxs($,{name:"subServiceId",value:Ge,onChange:s=>{var o;const t=s.target.value;ce(t);const a=(o=U==null?void 0:U.subServices)==null?void 0:o.find(l=>l.subServiceId===t);p(l=>({...l,subServiceId:t,subServiceName:(a==null?void 0:a.subServiceName)||"",preProcedureQA:y.preProcedureQA||[],procedureQA:y.procedureQA||[],postProcedureQA:y.postProcedureQA||[]}))},children:[e.jsx("option",{value:"",children:"Select Procedure"}),Array.isArray(U.subServices)&&U.subServices.map(s=>e.jsx("option",{value:s.subServiceId,children:s.subServiceName},s.subServiceId))]}),x.subServiceName&&e.jsx(Q,{className:"text-danger",children:x.subServiceName})]})]}),e.jsxs(g,{className:"mb-4",children:[e.jsxs(i,{md:4,children:[e.jsxs("h6",{children:["Procedure Image ",e.jsx("span",{className:"text-danger",children:"*"})]}),e.jsx(F,{type:"file",accept:"image/*",onChange:s=>{const t=s.target.files[0];if(t){const a=new FileReader;a.onloadend=()=>{var l;const o=((l=a.result)==null?void 0:l.split(",")[1])||"";p(u=>({...u,serviceImage:o,serviceImageFile:t}))},a.readAsDataURL(t)}}}),(r==null?void 0:r.serviceImage)&&e.jsx("img",{src:r.serviceImage.startsWith("data:")?r.serviceImage:`data:image/jpeg;base64,${r.serviceImage}`,alt:"Preview",style:{width:100,height:100,marginTop:10}})]}),e.jsxs(i,{md:4,children:[e.jsxs("h6",{children:["View Description ",e.jsx("span",{className:"text-danger",children:"*"})]}),e.jsx(F,{type:"text",placeholder:"View Description",value:r.viewDescription||"",name:"viewDescription",onChange:Z,maxLength:100}),x.viewDescription&&e.jsx(Q,{className:"text-danger",children:x.viewDescription})]}),e.jsxs(i,{md:4,children:[e.jsxs("h6",{children:["Status ",e.jsx("span",{className:"text-danger",children:"*"})]}),e.jsxs($,{value:r.status||"",onChange:Z,name:"status",children:[e.jsx("option",{value:"",children:"Select"}),e.jsx("option",{value:"Active",children:"Active"}),e.jsx("option",{value:"InActive",children:"Inactive"})]}),x.status&&e.jsx(Q,{className:"text-danger",children:x.status})]})]}),e.jsxs(g,{className:"mb-4",children:[e.jsxs(i,{md:4,children:[e.jsxs(Ss,{children:["ConsentFormType",e.jsx("span",{className:"text-danger",children:"*"})]}),e.jsxs($,{value:r.consentFormType||"",onChange:s=>p(t=>({...t,consentFormType:s.target.value})),children:[e.jsx("option",{value:"",children:"Select consentFormType"}),e.jsx("option",{value:"1",children:"Generic ConsentForm"}),e.jsx("option",{value:"2",children:"Procedure ConsentForm"})]}),x.consentFormType&&e.jsx(Q,{className:"text-danger",children:x.consentFormType})]}),e.jsxs(i,{md:4,children:[e.jsxs("h6",{children:["Consultation Fee",e.jsx("span",{className:"text-danger",children:"*"})]}),e.jsx(F,{type:"number",value:r.consultationFee||"",onChange:s=>p(t=>({...t,consultationFee:Number(s.target.value)}))})]}),e.jsx(i,{children:e.jsxs("div",{className:"mb-4",children:[e.jsxs("h6",{children:["Min Time ",e.jsx("span",{className:"text-danger",children:"*"})]}),e.jsxs("div",{className:"d-flex",children:[e.jsx(F,{type:"number",name:"minTimeValue",value:r.minTimeValue||"",onChange:s=>p({...r,minTimeValue:s.target.value}),placeholder:"Enter time"}),e.jsxs($,{name:"minTimeUnit",className:"ms-2",value:r.minTimeUnit||"",onChange:s=>p({...r,minTimeUnit:s.target.value}),children:[e.jsx("option",{value:"",disabled:!0,children:"Select Time"}),e.jsx("option",{value:"minutes",children:"Minutes"}),e.jsx("option",{value:"hours",children:"Hours"})]})]}),x.minTime&&e.jsx(Q,{className:"text-danger",children:x.minTime})]})})]}),e.jsxs(g,{className:"mb-4",children:[e.jsxs(i,{md:3,children:[e.jsxs("h6",{children:["Procedure Price ",e.jsx("span",{className:"text-danger",children:"*"})]}),e.jsx(F,{type:"number",placeholder:"Discount",value:r.price||"",onChange:s=>p(t=>({...t,price:s.target.value}))}),x.price&&e.jsx(Q,{className:"text-danger",children:x.price})]}),e.jsxs(i,{md:3,children:[e.jsxs("h6",{children:["Discount (%) ",e.jsx("span",{className:"text-danger",children:"*"})]}),e.jsx(F,{type:"number",placeholder:"Discount",value:r.discount||"",name:"discount",onChange:Z,min:1,onKeyDown:s=>{(s.key==="-"||s.key==="e")&&s.preventDefault()}}),x.discount&&e.jsx(Q,{className:"text-danger",children:x.discount})]}),e.jsxs(i,{md:3,children:[e.jsxs("h6",{children:["GST (%)",e.jsx("span",{className:"text-danger",children:"*"})]}),e.jsx(F,{type:"number",placeholder:"GST",value:r.gst||"",onChange:s=>p(t=>({...t,gst:Number(s.target.value)}))})]}),e.jsxs(i,{md:3,children:[e.jsx("h6",{children:"Other Taxes(%)"}),e.jsx(F,{type:"number",placeholder:"Tax Percentage",value:r.taxPercentage||"",name:"taxPercentage",onChange:Z,min:1,onKeyDown:s=>{(s.key==="-"||s.key==="e")&&s.preventDefault()}}),x.taxPercentage&&e.jsx(Q,{className:"text-danger",children:x.taxPercentage})]})]}),e.jsx("h6",{className:"m-3",children:"Procedure (Optional)"}),e.jsx(ws,{preQAList:r.preProcedureQA,setPreQAList:s=>p(t=>({...t,preProcedureQA:s})),procedureQAList:r.procedureQA,setProcedureQAList:s=>p(t=>({...t,procedureQA:s})),postQAList:r.postProcedureQA,setPostQAList:s=>p(t=>({...t,postProcedureQA:s}))})]})}),e.jsxs(Oe,{children:[e.jsx(k,{color:"secondary",onClick:is,children:"Cancel"}),e.jsx(k,{color:"info",className:"pink-Btn",onClick:q==="edit"?rs:es,children:q==="edit"?"Update":"Add"})]})]}),f?e.jsx("div",{className:"d-flex justify-content-center align-items-center",children:e.jsx(bs,{message:"Loading Procedure..."})}):E?e.jsx("div",{className:"d-flex justify-content-center align-items-center",style:{height:"50vh",color:"var(--color-black)"},children:E}):e.jsxs(As,{striped:!0,hover:!0,responsive:!0,children:[e.jsx(Ps,{className:"pink-table w-auto",children:e.jsxs(pe,{children:[e.jsx(L,{style:{paddingLeft:"40px"},children:"S.No"}),e.jsx(L,{children:"Procedure Name"}),e.jsx(L,{children:"Servic eName"}),e.jsx(L,{children:"Category Name"}),e.jsx(L,{children:"Price"}),e.jsx(L,{className:"text-end",children:"Actions"})]})}),e.jsx(Is,{className:"pink-table",children:Pe.length>0?Pe.map((s,t)=>e.jsxs(pe,{children:[e.jsx(M,{style:{paddingLeft:"40px"},children:(H-1)*_+t+1}),e.jsx(M,{children:xe(s.subServiceName)}),e.jsx(M,{children:xe(s.serviceName||"NA")}),e.jsx(M,{children:xe(s.categoryName||"NA")}),e.jsx(M,{children:s.price||"NA"}),e.jsx(M,{className:"text-end",children:e.jsxs("div",{className:"d-flex justify-content-end gap-2  ",children:[e.jsx("button",{className:"actionBtn",onClick:()=>G(s),title:"View",children:e.jsx(Cs,{size:18})}),e.jsx("button",{className:"actionBtn",onClick:()=>We(s),title:"Edit",children:e.jsx(Qs,{size:18})}),e.jsx("button",{className:"actionBtn",onClick:()=>ts(s),title:"Delete",children:e.jsx(Fs,{size:18})}),e.jsx(fs,{isVisible:_e,title:"Delete Procedure",message:"Are you sure you want to delete this procedure? This action cannot be undone.",confirmText:"Yes, Delete",cancelText:"Cancel",confirmColor:"danger",cancelColor:"secondary",onConfirm:as,onCancel:ns})]})})]},s.id)):e.jsx(pe,{children:e.jsx(M,{colSpan:5,className:"text-center text-muted",children:'ðŸ” No procedure found"'})})})]}),!f&&e.jsx("div",{className:"d-flex justify-content-end mt-3",style:{marginRight:"40px"},children:Array.from({length:Math.ceil((oe.length?oe.length:y.length)/_)},(s,t)=>e.jsx(k,{style:{margin:"0 5px",padding:"5px 10px",backgroundColor:H===t+1?"var(--color-black)":"#fff",color:H===t+1?"#fff":"var(--color-black)",border:"1px solid #ccc",borderRadius:"5px",cursor:"pointer"},className:"ms-2",onClick:()=>qe(t+1),children:t+1},t))})]})};export{pr as default};
