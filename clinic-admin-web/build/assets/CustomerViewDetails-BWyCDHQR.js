import{r as t,_ as N,R as j,c as y,P as r,aj as g,j as e,q as T}from"./index-DwsJnlHn.js";import{g as I}from"./CustomerManagementAPI-BaGfbcwm.js";import{C as b,a as E}from"./CCardBody-4LnpKMw0.js";import{f as A,e as R,d as w}from"./CNavItem-D-_vrklN.js";import{e as D,f as K}from"./DefaultLayout-goNOnliL.js";import{C as S,a as d}from"./CRow-BvzboGfC.js";import"./index.esm-j8L8OUOY.js";import"./cil-user-Ddrdy7PS.js";const f=t.forwardRef((a,n)=>{var{children:m,as:s="div",className:c}=a,h=N(a,["children","as","className"]);return j.createElement(s,Object.assign({className:y("card-header",c)},h,{ref:n}),m)});f.propTypes={as:r.elementType,children:r.node,className:r.string};f.displayName="CCardHeader";const B=t.createContext({}),C=t.forwardRef(({children:a,activeItemKey:n,className:m,defaultActiveItemKey:s,onChange:c},h)=>{const u=t.useId(),l=n!==void 0,[x,p]=t.useState(()=>l?void 0:s),i=l?n:x,o=v=>{l||p(v),c==null||c(v)};return j.createElement(B.Provider,{value:{_activeItemKey:i,setActiveItemKey:o,id:u}},j.createElement("div",{className:y("tabs",m),ref:h},a))});C.propTypes={activeItemKey:r.oneOfType([r.number,r.string]),children:r.node,className:r.string,defaultActiveItemKey:r.oneOfType([r.number,r.string]),onChange:r.func};C.displayName="CTabs";const q=()=>{const{mobileNumber:a}=g(),[n,m]=t.useState(0),[s,c]=t.useState(null),[h,u]=t.useState(!0),[l,x]=t.useState(null);return t.useEffect(()=>{if(!a)return;(async()=>{try{u(!0);const i=await I(a),o=(i==null?void 0:i.data)||i;c({...o,email:o.email||o.emailId,appointments:o.appointments||[]})}catch(i){x("Failed to load customer details."),console.error(i)}finally{u(!1)}})()},[a]),h?e.jsxs("div",{className:"text-center my-5",children:[e.jsx(T,{color:"primary"}),e.jsx("p",{children:"Loading customer details..."})]}):l||!s?e.jsx("p",{className:"text-danger",children:l||"Customer not found."}):e.jsxs(b,{children:[e.jsx(f,{children:e.jsxs("h5",{children:["Customer Details: ",s.fullName]})}),e.jsx(E,{children:e.jsxs(C,{activeTab:n,onActiveTabChange:m,children:[e.jsx(A,{variant:"tabs",children:e.jsx(R,{children:e.jsx(w,{active:n===0,children:"Basic Details"})})}),e.jsx(D,{children:e.jsx(K,{visible:n===0,children:e.jsx(b,{className:"p-3 shadow-sm rounded-3 border-light",children:e.jsxs(S,{className:"gy-3",children:[e.jsxs(d,{sm:"6",children:[e.jsx("strong",{children:"Customer Id:"}),e.jsx("div",{children:s.customerId||"-"})]}),e.jsxs(d,{sm:"6",children:[e.jsx("strong",{children:"Full Name:"}),e.jsx("div",{children:s.fullName||"-"})]}),e.jsxs(d,{sm:"6",children:[e.jsx("strong",{children:"Email:"}),e.jsx("div",{children:s.email||"-"})]}),e.jsxs(d,{sm:"6",children:[e.jsx("strong",{children:"Mobile Number:"}),e.jsx("div",{children:s.mobileNumber||"-"})]}),e.jsxs(d,{sm:"6",children:[e.jsx("strong",{children:"Gender:"}),e.jsx("div",{children:s.gender||"-"})]}),e.jsxs(d,{sm:"6",children:[e.jsx("strong",{children:"Date of Birth:"}),e.jsx("div",{children:s.dateOfBirth||"-"})]}),e.jsxs(d,{sm:"6",children:[e.jsx("strong",{children:"Refer Code:"}),e.jsx("div",{children:s.referCode||"-"})]})]})})})})]})})]})};export{q as default};
