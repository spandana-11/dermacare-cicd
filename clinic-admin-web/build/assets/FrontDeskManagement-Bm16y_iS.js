import{h as ee,r as u,j as e,B as g,b as ge,a as be,R as ve}from"./index-BpN0qZrt.js";import{c as M}from"./capitalizeWords-CuwF8AcI.js";import{C as pe}from"./ConfirmationModal-Blpddd1P.js";import{L as fe}from"./loader-OBkaezw1.js";import{v as A,a as X,f as Ne}from"./Validators-FoVLkSgm.js";import{U as Ce}from"./UserPermissionModal-Cy15BOgE.js";import{C as ce,a as oe,b as ie}from"./CModalHeader-DLH-68_W.js";import{C as ye}from"./CModalTitle-CwvqIfsB.js";import{C as ke}from"./CForm-D_Fm9Pc8.js";import{C as h}from"./CFormLabel-DO0eStXP.js";import{C as v}from"./CFormInput-DMF4wKOV.js";import{C as ue}from"./CFormSelect-DDJD4c8G.js";import{C as we}from"./CFormTextarea-BePoUAyB.js";import{b as S}from"./index.esm-BAveQmLP.js";import{C as he}from"./CModalFooter-Dm04Litg.js";import{C as De,a as Ae,b as ne,c as P,d as Ie,e as I}from"./CTable-Bgk4qBUR.js";import{E as Pe}from"./eye-BuIXT__x.js";import{P as Se,T as Fe}from"./trash-2-CRkTwtCJ.js";import"./CNavItem-DIVzBTzM.js";const Re=f=>ee.get(`/receptionists/${f}`),Be=f=>ee.post("/createReceptionist",f),Ee=(f,w)=>ee.put(`/updateReceptionist/${f}`,w),Oe=f=>ee.delete(`/deleteReceptionist/${f}`),$e=({visible:f,onClose:w,onSave:se,initialData:D,viewMode:F,receptionist:b,technicians:ae,fetchTechs:J})=>{const R={},E={clinicId:localStorage.getItem("HospitalId"),branchId:localStorage.getItem("branchId"),hospitalName:localStorage.getItem("HospitalName"),fullName:"",dateOfBirth:"",contactNumber:"",qualification:"",governmentId:"",dateOfJoining:"",department:"",emergencyContact:"",profilePicture:"",emailId:"",graduationCertificate:"",computerSkillsProof:"",previousEmploymentHistory:"",role:"receptionist",gender:"",yearOfExperience:"",vaccinationStatus:"Fully Vaccinated",address:{houseNo:"",street:"",landmark:"",city:"",state:"",postalCode:"",country:"India"},bankAccountDetails:{accountNumber:"",accountHolderName:"",ifscCode:"",bankName:"",branchName:"",panCardNumber:""},permissions:R},[a,y]=u.useState(E),[U,xe]=u.useState(localStorage.getItem("HospitalId")),[q,B]=u.useState(!1),[z,Z]=u.useState(!1),[Y,O]=u.useState(null),[G,Q]=u.useState(!1),[d,N]=u.useState({}),W=["fullName","dateOfBirth","contactNumber","emailId","governmentId","dateOfJoining","department","clinicId","profilePicture","role","address.houseNo","address.street","address.city","address.state","address.postalCode","address.country","bankAccountDetails.accountNumber","bankAccountDetails.accountHolderName","bankAccountDetails.bankName","bankAccountDetails.branchName","bankAccountDetails.ifscCode","bankAccountDetails.panCardNumber"];function T(s,l){const t=[];for(const n of l){const c=n.split(".");let r=s;for(const j of c)r=r==null?void 0:r[j];(!r||String(r).trim()==="")&&t.push(n)}return t}const $=s=>{y(l=>{const t={...l.permissions};return t[s]?delete t[s]:t[s]=[],{...l,permissions:t}})},te=(s,l)=>{y(t=>{const n={...t.permissions};return n[s]||(n[s]=[]),n[s].includes(l)?n[s]=n[s].filter(c=>c!==l):n[s]=[...n[s],l],{...t,permissions:n}})},le=s=>{y(l=>{const t={...l.permissions};return t[s]?t[s].length===X.length?t[s]=[]:t[s]=[...X]:t[s]=[...X],{...l,permissions:t}})},H=s=>new Promise((l,t)=>{const n=new FileReader;n.readAsDataURL(s),n.onload=()=>l(n.result),n.onerror=c=>t(c)});u.useEffect(()=>{y(D||E)},[D]);const m=(s,l)=>{y(n=>({...n,[s]:l}));const t=A(s,l,{...a,[s]:l},ae);N(n=>({...n,[s]:t}))},x=(s,l,t)=>{y(n=>({...n,[s]:{...n[s],[l]:t}}))},L=(s,l)=>{const t=s.target.files[0];if(!t)return;const n=new FileReader;n.onloadend=()=>{y(c=>({...c,[l]:n.result,[`${l}Name`]:t.name,[`${l}Type`]:t.type}))},n.readAsDataURL(t)},re=()=>{const s=T(a,W);if(s.length>0){g.error(`Please fill required fields: ${s.join(", ")}`);return}if(a.dateOfBirth){const r=new Date(a.dateOfBirth),j=new Date,k=j.getFullYear()-r.getFullYear();if((j.getMonth()<r.getMonth()||j.getMonth()===r.getMonth()&&j.getDate()<r.getDate()?k-1:k)<18){g.error("Technician must be at least 18 years old.");return}}if(!/^[6-9]\d{9}$/.test(a.contactNumber)){g.error("Contact number must be 10 digits and start with 6-9.");return}if(!/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(a.emailId)){g.error("Please enter a valid email address.");return}if(b==null?void 0:b.some(r=>r.contactNumber===a.contactNumber&&r.id!==a.id)){g.error("Contact number already exists!");return}if(b==null?void 0:b.some(r=>r.emailId===a.emailId&&r.id!==a.id)){g.error("Email already exists!");return}if(Object.keys(a.permissions).length===0){g.error("Please assign at least one user permission before saving.");return}console.log(a),se(a),y(E),w()},o=()=>{const s=T(a,W);if(s.length>0){g.error(`Please fill required fields: ${s.join(", ")}`);return}if(a.dateOfBirth){const r=new Date(a.dateOfBirth),j=new Date,k=j.getFullYear()-r.getFullYear();if((j.getMonth()<r.getMonth()||j.getMonth()===r.getMonth()&&j.getDate()<r.getDate()?k-1:k)<18){g.error("Technician must be at least 18 years old.");return}}if(!/^[6-9]\d{9}$/.test(a.contactNumber)){g.error("Contact number must be 10 digits and start with 6-9.");return}if(!/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(a.emailId)){g.error("Please enter a valid email address.");return}if(b==null?void 0:b.some(r=>r.contactNumber===a.contactNumber&&r.id!==a.id)){g.error("Contact number already exists!");return}if(b==null?void 0:b.some(r=>r.emailId===a.emailId&&r.id!==a.id)){g.error("Email already exists!");return}console.log(a),Z(!0)},i=()=>{B(!1),O(null),Q(!1)},C=(s,l)=>{O(s),Q(l==null?void 0:l.includes("pdf")),B(!0)},_=s=>{try{return atob(s)}catch{return null}},V=({title:s,children:l})=>e.jsxs("div",{children:[e.jsx("h5",{className:"text-lg font-semibold border-b pb-2 mb-4",children:s}),e.jsx("div",{className:"grid grid-cols-3 gap-4",children:l})]}),p=({label:s,value:l})=>e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-600 fw-bold",children:s}),e.jsx("p",{className:"text-base text-gray-900 text-break",children:l||"N/A"})]}),de=({label:s,value:l})=>e.jsxs("div",{className:"col-span-3",children:[s&&e.jsx("p",{className:"text-sm font-medium text-gray-600 fw-bold",children:s}),e.jsx("p",{className:"text-base text-gray-900 text-break",children:l||"N/A"})]}),me=({label:s,type:l,data:t})=>{if(!t)return e.jsxs("p",{children:[s," "]});const n=l==null?void 0:l.startsWith("image/"),c=t.startsWith("data:")?t:`data:${l};base64,${t}`;return e.jsxs("div",{className:"bg-white p-3 rounded-md shadow-sm",children:[e.jsxs("strong",{children:[s,":"]}),e.jsxs("div",{className:"mt-2",children:[n?e.jsx("img",{src:c,alt:s,className:"w-32 h-32 object-cover rounded-md border cursor-pointer",onClick:()=>C(c,l)}):e.jsx("button",{type:"button ",className:" btn text-blue-600 hover:underline block mx-2",onClick:()=>C(c,l),style:{backgroundColor:"var(--color-black)",color:"white"},children:"Preview"}),e.jsx("a",{href:c,download:s.replace(/\s+/g,"_"),className:"text-green-600 hover:underline text-sm block  btn",style:{backgroundColor:"var(--color-black)",color:"white"},children:"Download"})]})]})};return e.jsxs(e.Fragment,{children:[e.jsxs(ce,{visible:f,onClose:w,size:"lg",className:"custom-modal",backdrop:"static",children:[e.jsx(oe,{children:e.jsx(ye,{children:F?"Personal Information":"Add / Edit Receptionist"})}),e.jsx(ie,{children:F?e.jsxs("div",{className:"p-4 border rounded shadow-sm bg-white ",children:[e.jsxs("div",{className:"d-flex justify-content-between align-items-center",children:[e.jsxs("div",{children:[e.jsxs("div",{className:"mb-1",children:[e.jsx("span",{className:"fw-bold ",children:"Name : "}),e.jsx("span",{children:a.fullName})]}),e.jsxs("div",{className:"mb-1",children:[e.jsx("span",{className:"fw-bold",children:"Email : "}),e.jsx("span",{children:a.emailId})]}),e.jsxs("div",{children:[e.jsx("span",{className:"fw-bold",children:"Cantact : "}),e.jsx("span",{children:a.contactNumber})]})]}),e.jsxs("div",{className:"text-center",children:[a.profilePicture?e.jsx("img",{src:_(a.profilePicture),alt:a.fullName,width:"80",height:"80",style:{borderRadius:"50%",objectFit:"cover",border:"1px solid var(--color-black)"}}):e.jsx("img",{src:"/assets/images/default-avatar.png",alt:"No profile",width:"40",height:"40",style:{borderRadius:"50%",objectFit:"cover",border:"1px solid var(--color-black)"}}),e.jsxs("div",{style:{color:"var(--color-black)",marginTop:"5px",fontSize:"14px",fontWeight:"500"},children:["ID: ",a.id]})]})]}),e.jsx("hr",{}),e.jsxs("div",{className:"space-y-5 mt-5",children:[e.jsxs("div",{className:"row mb-2",children:[e.jsx("div",{className:"col-md-4",children:e.jsx(p,{label:"Full Name",value:a.fullName})}),e.jsx("div",{className:"col-md-4",children:e.jsx(p,{label:"Email",value:a.emailId})}),e.jsx("div",{className:"col-md-4",children:e.jsx(p,{label:"Contact",value:a.contactNumber})}),e.jsx("div",{className:"col-md-4",children:e.jsx(p,{label:"Date of Birth",value:a.dateOfBirth})}),e.jsx("div",{className:"col-md-4",children:e.jsx(p,{label:"Government ID",value:a.governmentId})})]}),e.jsx(V,{title:"Work Information",children:e.jsxs("div",{className:"row mb-2",children:[e.jsx("div",{className:"col-md-4",children:e.jsx(p,{label:"Date of Joining",value:a.dateOfJoining})}),e.jsx("div",{className:"col-md-4",children:e.jsx(p,{label:"Department",value:a.department})}),e.jsx("div",{className:"col-md-4",children:e.jsx(p,{label:"Qualification",value:a.qualification})}),e.jsx("div",{className:"col-md-4",children:e.jsx(p,{label:"Emergency Contact",value:a.emergencyContact})})]})}),e.jsx(V,{title:"Address",children:e.jsx(de,{value:`${a.address.houseNo}, ${a.address.street}, ${a.address.city}, ${a.address.state} - ${a.address.postalCode}, ${a.address.country}`})}),e.jsx(V,{title:"Bank Details",children:e.jsxs("div",{className:"row mb-2",children:[e.jsx("div",{className:"col-md-4",children:e.jsx(p,{label:"Account Number",value:a.bankAccountDetails.accountNumber})}),e.jsx("div",{className:"col-md-4",children:e.jsx(p,{label:"Account Holder Name",value:a.bankAccountDetails.accountHolderName})}),e.jsx("div",{className:"col-md-4",children:e.jsx(p,{label:"IFSC Code",value:a.bankAccountDetails.ifscCode})}),e.jsx("div",{className:"col-md-4",children:e.jsx(p,{label:"Bank Name",value:a.bankAccountDetails.bankName})}),e.jsx("div",{className:"col-md-4",children:e.jsx(p,{label:"Branch Name",value:a.bankAccountDetails.branchName})}),e.jsx("div",{className:"col-md-4",children:e.jsx(p,{label:"PAN Card",value:a.bankAccountDetails.panCardNumber})})]})}),e.jsx(V,{title:"Documents",children:e.jsxs("div",{className:"row",children:[a.graduationCertificate!=""?e.jsx("div",{className:"col-md-6",children:e.jsx(me,{label:"Qualification / Certifications",type:a.graduationCertificateType,data:a.graduationCertificate})}):e.jsx("p",{className:"col-md-6",children:"Not Provided Graduation Certificate"}),a.computerSkillsProof!=""?e.jsx("div",{className:"col-md-6",children:e.jsx(me,{label:"Computer Skills Proof",type:a.computerSkillsProofType||"application/pdf",data:a.computerSkillsProof})}):e.jsx("p",{className:"col-md-6",children:"Not Provided Computer Skills Proof"})]})}),e.jsx("div",{className:"mt-4"}),e.jsx(V,{title:"Other Information ",children:e.jsxs("div",{className:"row mb-2",children:[e.jsx("div",{className:"col-md-6",children:e.jsx(p,{label:"Lab License",value:a.computerSkillsProof})}),e.jsx("div",{className:"col-md-12",children:e.jsx(de,{label:"Previous Employment",value:a.previousEmploymentHistory})})]})})]})]}):e.jsxs(ke,{children:[e.jsx("h5",{children:"Basic Information"}),e.jsxs("div",{className:"row mb-3",children:[e.jsx("div",{className:"col-md-4",children:e.jsxs("div",{className:"row",children:[e.jsxs("div",{className:"col-md-5",children:[e.jsxs(h,{children:["ClinicID ",e.jsx("span",{style:{color:"red"},children:"*"})]}),e.jsx(v,{value:U,disabled:!0,onChange:s=>m("clinicId",s.target.value)})]}),e.jsxs("div",{className:"col-md-7",children:[e.jsxs(h,{children:["Role ",e.jsx("span",{style:{color:"red"},children:"*"})]}),e.jsx(v,{value:a.role,disabled:!0,onChange:s=>m("role",s.target.value)})]})]})}),e.jsxs("div",{className:"col-md-4",children:[e.jsxs(h,{children:["Full Name ",e.jsx("span",{style:{color:"red"},children:"*"})]}),e.jsx(v,{value:a.fullName,onChange:s=>m("fullName",s.target.value),onBlur:()=>handleBlur("fullName",a.fullName)}),d.fullName&&e.jsx("div",{className:"text-danger mt-1",children:d.fullName})]}),e.jsxs("div",{className:"col-md-4",children:[e.jsxs(h,{children:["Gender ",e.jsx("span",{style:{color:"red"},children:"*"})]}),e.jsxs(ue,{value:a.gender,onChange:s=>m("gender",s.target.value),children:[e.jsx("option",{value:"",children:"Select Gender"}),e.jsx("option",{value:"male",children:"Male"}),e.jsx("option",{value:"female",children:"Female"}),e.jsx("option",{value:"other",children:"Other"})]})]})]}),e.jsxs("div",{className:"row mb-3",children:[e.jsxs("div",{className:"col-md-4",children:[e.jsxs(h,{children:["Date of Birth ",e.jsx("span",{style:{color:"red"},children:"*"})]}),e.jsx(v,{type:"date",value:a.dateOfBirth,max:new Date(new Date().setFullYear(new Date().getFullYear()-18)).toISOString().split("T")[0],onChange:s=>m("dateOfBirth",s.target.value)})]}),e.jsxs("div",{className:"col-md-4",children:[e.jsxs(h,{children:["Contact Number ",e.jsx("span",{style:{color:"red"},children:"*"})]}),e.jsx(v,{type:"text",maxLength:10,value:a.contactNumber,onChange:s=>{const l=s.target.value;if(/^\d*$/.test(l)){m("contactNumber",l);const t=A("contactNumber",l,a);N(n=>({...n,contactNumber:t}))}}}),d.contactNumber&&e.jsx("div",{className:"text-danger mt-1",children:d.contactNumber})]}),e.jsxs("div",{className:"col-md-4",children:[e.jsxs(h,{children:["Email ",e.jsx("span",{style:{color:"red"},children:"*"})]}),e.jsx(v,{type:"email",value:a.emailId,onChange:s=>{const l=s.target.value;m("emailId",l);const t=A("emailId",l,a);N(n=>({...n,emailId:t}))}}),d.emailId&&e.jsx("div",{className:"text-danger mt-1",children:d.emailId})]})]}),e.jsxs("div",{className:"row mb-3",children:[e.jsxs("div",{className:"col-md-4",children:[e.jsxs(h,{children:["GovernmentID(AadharCard No) ",e.jsx("span",{style:{color:"red"},children:"*"})]}),e.jsx(v,{maxLength:12,value:a.governmentId,onChange:s=>{const l=s.target.value;if(/^\d*$/.test(l)){m("governmentId",l);const t=A("governmentId",l,a);N(n=>({...n,governmentId:t}))}}}),d.governmentId&&e.jsx("div",{className:"text-danger mt-1",children:d.governmentId})]}),e.jsxs("div",{className:"col-md-4",children:[e.jsxs(h,{children:["Date of Joining ",e.jsx("span",{style:{color:"red"},children:"*"})]}),e.jsx(v,{type:"date",value:a.dateOfJoining,onChange:s=>{m("dateOfJoining",s.target.value);const l=A("dateOfJoining",s.target.value,a);N(t=>({...t,dateOfJoining:l}))}}),d.dateOfJoining&&e.jsx("div",{className:"text-danger mt-1",children:d.dateOfJoining})]}),e.jsxs("div",{className:"col-md-4",children:[e.jsxs(h,{children:["Vaccination Status ",e.jsx("span",{style:{color:"red"},children:"*"})]}),e.jsxs(ue,{value:a.vaccinationStatus,onChange:s=>{const l=s.target.value;m("vaccinationStatus",l);const t=l?"":"Vaccination Status is required.";N(n=>({...n,vaccinationStatus:t}))},children:[e.jsx("option",{value:"",children:"Select Status"}),e.jsx("option",{value:"Not Vaccinated",children:"Not Vaccinated"}),e.jsx("option",{value:"Partially Vaccinated",children:"Partially Vaccinated"}),e.jsx("option",{value:"Fully Vaccinated",children:"Fully Vaccinated"})]}),d.vaccinationStatus&&e.jsx("div",{className:"text-danger mt-1",children:d.vaccinationStatus})]})]}),e.jsxs("div",{className:"row mb-3",children:[e.jsxs("div",{className:"col-md-4",children:[" ",e.jsx(h,{children:"Department"}),e.jsx(v,{value:M(a.department),onChange:s=>{const l=s.target.value;m("department",l);const t=A("department",l);N(n=>({...n,department:t}))}}),d.department&&e.jsx("div",{className:"text-danger mt-1",children:d.department})]}),e.jsxs("div",{className:"col-md-4",children:[" ",e.jsxs(h,{children:["Years of Experience ",e.jsx("span",{style:{color:"red"},children:"*"})]}),e.jsx(v,{type:"number",value:a.yearOfExperience,onChange:s=>{const l=s.target.value;m("yearOfExperience",l);const t=A("yearOfExperience",l);N(n=>({...n,yearOfExperience:t}))}}),d.yearOfExperience&&e.jsx("div",{className:"text-danger mt-1",children:d.yearOfExperience})]}),e.jsxs("div",{className:"col-md-4",children:[" ",e.jsx(h,{children:"Qualification"}),e.jsx(v,{value:M(a.qualification),onChange:s=>m("qualification",s.target.value)})]})]}),e.jsx("div",{className:"row mb-3",children:e.jsxs("div",{className:"col-md-4",children:[e.jsx(h,{children:"Emergency Contact"}),e.jsx(v,{type:"text",maxLength:10,value:a.emergencyContact,onChange:s=>{const l=s.target.value;/^\d*$/.test(l)&&m("emergencyContact",s.target.value)}})]})}),e.jsx("h5",{className:"mt-3",children:"Address"}),Object.keys(a.address).reduce((s,l,t)=>(t%3===0&&s.push([]),s[s.length-1].push(l),s),[]).map((s,l)=>e.jsx("div",{className:"row mb-3",children:s.map(t=>{var n;return e.jsxs("div",{className:"col-md-4",children:[e.jsxs(h,{className:"text-capitalize",children:[t," ",e.jsx("span",{style:{color:"red"},children:"*"})]}),e.jsx(v,{type:"text",maxLength:t==="postalCode"?6:void 0,value:M(a.address[t]),onChange:c=>{let r=c.target.value;t==="postalCode"?/^\d*$/.test(r)&&x("address",t,r):x("address",t,r);const j=A(t,r,a);N(k=>({...k,address:{...k.address,[t]:j}}))},onBlur:()=>{const c=A(t,a.address[t],a);N(r=>({...r,address:{...r.address,[t]:c}}))}}),((n=d.address)==null?void 0:n[t])&&e.jsx("div",{className:"text-danger mt-1",children:d.address[t]})]},t)})},l)),e.jsx("h5",{className:"mt-3",children:"Bank Account Details"}),Object.keys(a.bankAccountDetails).reduce((s,l,t)=>(t%3===0&&s.push([]),s[s.length-1].push(l),s),[]).map((s,l)=>e.jsx("div",{className:"row mb-3",children:s.map(t=>e.jsxs("div",{className:"col-md-4",children:[e.jsxs(h,{className:"text-capitalize",children:[t," ",e.jsx("span",{style:{color:"red"},children:"*"})]}),e.jsx(v,{value:a.bankAccountDetails[t],maxLength:t==="accountNumber"?20:t==="panCardNumber"?10:t==="ifscCode"?11:t==="accountHolderName"?50:void 0,onChange:async n=>{let c=n.target.value,r="";if(t==="accountHolderName"&&(/^[A-Za-z\s]*$/.test(c)&&x("bankAccountDetails",t,c),c.trim()?/^[A-Za-z\s]+$/.test(c)?c.length<3||c.length>50?r="Account Holder Name must be between 3 and 50 characters.":r="":r="Account Holder Name can contain only letters and spaces.":r="Account Holder Name is required."),t==="accountNumber"&&(/^\d*$/.test(c)&&x("bankAccountDetails",t,c),r=c?"":"Account Number is required."),t==="panCardNumber"&&(c=c.toUpperCase(),/^[A-Z]{0,5}[0-9]{0,4}[A-Z]{0,1}$/.test(c)&&x("bankAccountDetails",t,c),c.length===10?r=/^[A-Z]{5}[0-9]{4}[A-Z]$/.test(c)?"":"Invalid PAN format (ABCDE1234F)":r="PAN must be 10 characters."),t==="ifscCode")if(c=c.toUpperCase(),/^[A-Z0-9]*$/.test(c)&&x("bankAccountDetails",t,c),c.length===11)if(r=/^[A-Z]{4}0[A-Z0-9]{6}$/.test(c)?"":"Invalid IFSC format (HDFC0001234)",r)x("bankAccountDetails","bankName",""),x("bankAccountDetails","branchName","");else try{const k=await fetch(`https://ifsc.razorpay.com/${c}`);if(k.ok){const K=await k.json();x("bankAccountDetails","bankName",K.BANK||""),x("bankAccountDetails","branchName",K.BRANCH||"")}}catch{x("bankAccountDetails","bankName",""),x("bankAccountDetails","branchName","")}else x("bankAccountDetails","bankName",""),x("bankAccountDetails","branchName",""),r="IFSC must be 11 characters.";["accountNumber","panCardNumber","ifscCode","accountHolderName"].includes(t)||(x("bankAccountDetails",t,c),r=c?"":`${t} is required.`),N(j=>({...j,bankAccountDetails:{...j.bankAccountDetails,[t]:r}}))}}),d.bankAccountDetails&&d.bankAccountDetails[t]&&e.jsx("div",{className:"text-danger mt-1",children:d.bankAccountDetails[t]})]},t))},l)),e.jsx("h5",{className:"mt-3",children:"Documents"}),e.jsxs("div",{className:"row mb-3",children:[e.jsxs("div",{className:"col-md-4",children:[e.jsxs(h,{children:["Profile Image ",e.jsx("span",{style:{color:"red"},children:"*"})]}),e.jsx(v,{type:"file",accept:"image/*",onChange:async s=>{const l=s.target.files[0];if(l){const t=await H(l);m("profilePicture",t)}}})]}),e.jsxs("div",{className:"col-md-4",children:[e.jsx(h,{children:"Graduation Certificate"}),e.jsx(v,{type:"file",onChange:s=>L(s,"graduationCertificate")})]}),e.jsxs("div",{className:"col-md-4",children:[e.jsx(h,{children:"Computer Skills Proof"}),e.jsx(v,{type:"file",onChange:s=>L(s,"computerSkillsProof")})]})]}),e.jsx(h,{children:"Previous Employment History"}),e.jsx(we,{rows:3,value:a.previousEmploymentHistory,onChange:s=>m("previousEmploymentHistory",s.target.value),placeholder:"Enter previous employment history"}),e.jsx("div",{className:"mb-3 w-100 mt-4",style:{display:"flex",justifyContent:"end",alignContent:"end",alignItems:"end"},children:e.jsx(S,{style:{color:"var(--color-black)",backgroundColor:"var(--color-bgcolor)"},onClick:o,children:"User Permissions"})}),e.jsx(Ce,{show:z,onClose:()=>Z(!1),features:Ne,actions:X,permissions:a.permissions,toggleFeature:$,toggleAllActions:le,togglePermission:te,onSave:()=>{console.log("Saved Permissions",a.permissions),Z(!1)}})]})}),e.jsx(he,{children:F?e.jsx(S,{color:"secondary",onClick:w,children:"Close"}):e.jsxs(e.Fragment,{children:[e.jsx(S,{style:{backgroundColor:"var(--color-bgcolor)",color:"var(--color-black)"},onClick:()=>y(E),children:"Clear"}),e.jsx(S,{color:"secondary",onClick:w,children:"Cancel"}),e.jsx(S,{style:{backgroundColor:"var(--color-black)",color:"white"},onClick:re,children:"Save"})]})})]}),e.jsxs(ce,{visible:q,onClose:i,size:"xl",children:[e.jsx(oe,{onClose:i,children:e.jsx("strong",{children:G?"PDF Preview":"Image Preview"})}),e.jsx(ie,{className:"text-center",children:G?e.jsx("iframe",{src:Y,title:"PDF Preview",style:{width:"100%",height:"80vh",border:"none"}}):e.jsx("img",{src:Y,alt:"Preview",style:{maxWidth:"100%",maxHeight:"80vh",borderRadius:"8px"}})})]})]})},as=()=>{const[f,w]=u.useState([]),[se,D]=u.useState(!1),[F,b]=u.useState(null),[ae,J]=u.useState(!1),[R,E]=u.useState(1),[a,y]=u.useState(10),{searchQuery:U,setSearchQuery:xe}=ge(),[q,B]=u.useState(!1),[z,Z]=u.useState(null),[Y,O]=u.useState(!1),[G,Q]=u.useState(null),[d,N]=u.useState(null),[W,T]=u.useState(!1),$=async()=>{var o;B(!0);try{const i=localStorage.getItem("HospitalId");if(i){const C=await Re(i);console.log("API Response:",C),B(!1),w(((o=C.data)==null?void 0:o.data)||[])}}catch(i){console.error("❌ Error fetching lab receptionist:",i),w([]),B(!1)}finally{B(!1)}};u.useEffect(()=>{$()},[]);const te=async o=>{try{if(F)await Ee(F.id,o),$(),g.success("Receptionist updated successfully!");else{const i=await Be(o);await $(),console.log(i),N({username:i.data.data.userName,password:i.data.data.password}),D(!1),T(!0),g.success("Receptionist added successfully!")}D(!1),b(null)}catch(i){g.error("❌ Failed to save receptionist."),console.error("API error:",i)}},le=async o=>{try{await Oe(o),w(i=>i.filter(C=>C.id!==o)),g.success("Receptionist deleted successfully!")}catch(i){g.error("❌ Failed to delete receptionist."),console.error("Delete error:",i)}finally{O(!1)}},{user:H}=be(),m=(o,i)=>{var C,_;return(_=(C=H==null?void 0:H.permissions)==null?void 0:C[o])==null?void 0:_.includes(i)},x=ve.useMemo(()=>{const o=U.toLowerCase().trim();return o?f.filter(i=>Object.values(i).some(C=>String(C).toLowerCase().includes(o))):f},[U,f]),L=x.slice((R-1)*a,R*a),re=o=>{try{return atob(o)}catch{return null}};return e.jsxs("div",{children:[m("Laboratory","create")&&e.jsx("div",{className:"mb-3 w-100",style:{display:"flex",justifyContent:"end",alignContent:"end",alignItems:"end"},children:e.jsx(S,{style:{color:"var(--color-black)",backgroundColor:"var(--color-bgcolor)"},onClick:()=>D(!0),children:"Add Receptionist"})}),e.jsxs(ce,{visible:W,backdrop:"static",keyboard:!1,children:[e.jsx(oe,{children:e.jsx("h5",{children:"Receptionist Credentials"})}),e.jsx(ie,{children:d?e.jsxs("div",{children:[e.jsxs("p",{children:[e.jsx("strong",{children:"Username:"})," ",d.username]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Password:"})," ",d.password]}),e.jsx("small",{className:"text-danger",children:"⚠️ Please save these credentials securely. They will not be shown again."})]}):e.jsx("p",{children:"No data available"})}),e.jsx(he,{children:e.jsx(S,{color:"primary",onClick:()=>{T(!1),N(null)},children:"Close"})})]}),e.jsx(pe,{isVisible:Y,title:"Delete receptionist",message:"Are you sure you want to delete this receptionist? This action cannot be undone.",confirmText:"Yes, Delete",cancelText:"Cancel",confirmColor:"danger",cancelColor:"secondary",onConfirm:()=>le(G),onCancel:()=>O(!1)}),q?e.jsx("div",{className:"d-flex justify-content-center align-items-center",children:e.jsx(fe,{message:"Loading receptionist..."})}):z?e.jsx("div",{className:"d-flex justify-content-center align-items-center",style:{height:"50vh",color:"var(--color-black)"},children:z}):e.jsxs(De,{className:"mt-3",striped:!0,hover:!0,responsive:!0,children:[e.jsx(Ae,{children:e.jsxs(ne,{className:"pink-table  w-auto",children:[e.jsx(P,{children:"#"}),e.jsx(P,{children:"Photo"})," ",e.jsx(P,{children:"Name"}),e.jsx(P,{children:"Contact"}),e.jsx(P,{children:"Sex"}),e.jsx(P,{children:"Qualification"}),e.jsx(P,{children:"Date Of Joining"}),e.jsx(P,{className:"text-end",children:"Actions"})]})}),e.jsx(Ie,{className:"pink-table",children:L.length>0?L.map((o,i)=>e.jsxs(ne,{children:[e.jsx(I,{children:(R-1)*a+i+1}),e.jsx(I,{children:o.profilePicture?e.jsx("img",{src:re(o.profilePicture),alt:o.fullName,width:"40",height:"40",style:{borderRadius:"50%",objectFit:"cover",border:"1px solid var(--color-black)"}}):e.jsx("img",{src:"/assets/images/default-avatar.png",alt:"No profile",width:"40",height:"40",style:{borderRadius:"50%",objectFit:"cover",border:"1px solid var(--color-black)"}})}),e.jsx(I,{children:M(o.fullName)}),e.jsx(I,{children:M(o.contactNumber)}),e.jsx(I,{children:M(o.gender)}),e.jsx(I,{children:o.qualification||"NA"}),e.jsx(I,{children:o.dateOfJoining}),e.jsx(I,{className:"text-end",children:e.jsxs("div",{className:"d-flex justify-content-end gap-2  ",children:[m("Laboratory","read")&&e.jsx("button",{className:"actionBtn",onClick:()=>{b(o),J(!0),D(!0)},title:"View",children:e.jsx(Pe,{size:18})}),m("Laboratory","update")&&e.jsx("button",{className:"actionBtn",onClick:()=>{b(o),J(!1),D(!0)},title:"Edit",children:e.jsx(Se,{size:18})}),m("Laboratory","delete")&&e.jsx("button",{className:"actionBtn",onClick:()=>{Q(o.id),O(!0)},title:"Delete",children:e.jsx(Fe,{size:18})})]})})]},o.id)):e.jsx(ne,{children:e.jsx(I,{colSpan:"9",className:"text-center",style:{color:"var(--color-black)"},children:"No receptionist found."})})})]}),!q&&e.jsx("div",{className:"d-flex justify-content-end mt-3",style:{marginRight:"40px"},children:Array.from({length:Math.ceil(x.length/a)},(o,i)=>e.jsx(S,{style:{backgroundColor:R===i+1?"var(--color-black)":"#fff",color:R===i+1?"#fff":"var(--color-black)",border:"1px solid #ccc",borderRadius:"5px",cursor:"pointer"},className:"ms-2",onClick:()=>E(i+1),children:i+1},i))}),e.jsx($e,{visible:se,onClose:()=>{D(!1),b(null),J(!1)},onSave:te,initialData:F,viewMode:ae,receptionist:f,fetchTechs:$})]})};export{as as default};
