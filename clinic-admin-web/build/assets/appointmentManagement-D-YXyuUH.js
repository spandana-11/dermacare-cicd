import{r as s,_ as J,$ as l,a as P,c as I,P as c,h as K,j as e}from"./index-Cv0vxzO7.js";import{G as Q}from"./appointmentAPI-CQeJxjHE.js";import{C as M,a as G}from"./CFormLabel-BFA-7F4b.js";import{u as U}from"./CConditionalPortal-zIw3HrTm.js";import{a as O}from"./index.esm-DdwSIoXl.js";import{C as W,a as X,b as B,c as m,d as Y,e as d}from"./CTable-BbVWpWuK.js";var v=s.forwardRef(function(a,H){var V=a.className,i=a.button,L=a.feedback,D=a.feedbackInvalid,g=a.feedbackValid,R=a.floatingLabel,z=a.tooltipFeedback,w=a.hitArea,x=a.id,y=a.indeterminate,b=a.inline,C=a.invalid,o=a.label,T=a.reverse,r=a.type,S=r===void 0?"checkbox":r,u=a.valid,N=J(a,["className","button","feedback","feedbackInvalid","feedbackValid","floatingLabel","tooltipFeedback","hitArea","id","indeterminate","inline","invalid","label","reverse","type","valid"]),f=s.useRef(null),$=U(H,f);s.useEffect(function(){f.current&&y&&(f.current.indeterminate=y)},[y,f.current]);var k=function(){return l.createElement("input",P({type:S,className:I(i?"btn-check":"form-check-input",{"is-invalid":C,"is-valid":u,"me-2":w}),id:x},N,{ref:$}))},E=function(){return l.createElement(G,{describedby:N["aria-describedby"],feedback:L,feedbackInvalid:D,feedbackValid:g,floatingLabel:R,invalid:C,tooltipFeedback:z,valid:u})},j=function(){var t;return l.createElement(M,P({customClassName:I(i?I("btn",i.variant?"btn-".concat(i.variant,"-").concat(i.color):"btn-".concat(i.color),(t={},t["btn-".concat(i.size)]=i.size,t),"".concat(i.shape)):"form-check-label")},x&&{htmlFor:x}),o)},h=function(){return i?l.createElement(l.Fragment,null,l.createElement(k,null),o&&l.createElement(j,null),l.createElement(E,null)):o?w?l.createElement(l.Fragment,null,l.createElement(k,null),l.createElement(M,P({customClassName:I("form-check-label stretched-link",V)},x&&{htmlFor:x}),o),l.createElement(E,null)):l.createElement("div",{className:I("form-check",{"form-check-inline":b,"form-check-reverse":T,"is-invalid":C,"is-valid":u},V)},l.createElement(k,null),l.createElement(j,null),l.createElement(E,null)):l.createElement(k,null)};return l.createElement(h,null)});v.propTypes=P({button:c.object,className:c.string,hitArea:c.oneOf(["full"]),id:c.string,indeterminate:c.bool,inline:c.bool,label:c.oneOfType([c.string,c.node]),reverse:c.bool,type:c.oneOf(["checkbox","radio"])},G.propTypes);v.displayName="CFormCheck";const ae=()=>{const[a,H]=s.useState(null),[V,i]=s.useState([]),[L,D]=s.useState([]),[g,R]=s.useState([]),[z,w]=s.useState([]),[x,y]=s.useState([]),[b,C]=s.useState([]),[o,T]=s.useState([]),[r,S]=s.useState([]),[u,N]=s.useState(1),f=7,$=K(),k=async()=>{try{const t=localStorage.getItem("HospitalId");if(console.log("Hospital ID from localStorage:",t),!t){console.warn("Hospital ID not found in localStorage.");return}const n=await Q(t);console.log("Appointments for this Hospital:",n),n!=null&&n.data?C(n.data):(console.warn("No data returned for Hospital ID:",t),C([]))}catch(t){console.error("Failed to fetch appointments:",t)}};s.useEffect(()=>{k()},[]),s.useEffect(()=>{let t=[...b];console.log("Initial bookings:",t);const n=p=>p==null?void 0:p.toLowerCase().trim(),F={"Service & Treatment":"service & treatment","Video Consultation":"online","In-clinic":"in-clinic"};if(r.length>0&&(t=t.filter(p=>r.some(A=>n(A)===n(p.status))),console.log("After status filter:",t)),o.length===1){const p=o[0],A=F[p];A&&(t=t.filter(q=>n(q.consultationType)===A),console.log(`After ${p} filter:`,t))}R(t),N(1)},[b,o,r]),s.useEffect(()=>{const t=[...new Set(b.map(F=>F.subServiceName).filter(Boolean))],n=[...new Set(b.map(F=>F.consultationType).filter(Boolean))];w(t),y(n),console.log("Available Consultation Types:",n)},[b]),s.useEffect(()=>{window.scrollTo(0,0)},[u]);const E=g.slice((u-1)*f,u*f),j=t=>{o.includes(t)?T([]):T([t])},h=t=>{const n=t.target.value;r.includes(n)?S([]):S([n])};return e.jsx("div",{style:{overflow:"hidden"},children:e.jsxs("div",{className:"container mt-4",children:[e.jsx("h5",{children:"Appointments"}),e.jsxs("div",{className:"d-flex gap-2 mb-3",children:[e.jsx("button",{onClick:()=>j("Service & Treatment"),className:`btn ${o.includes("Service & Treatment")?"btn-dark":"btn-outline-dark"}`,children:"Service & Treatment"}),e.jsx("button",{onClick:()=>j("In-clinic"),className:`btn ${o.includes("In-clinic")?"btn-dark":"btn-outline-dark"}`,children:"In-Clinic"}),e.jsx("button",{onClick:()=>j("Video Consultation"),className:`btn ${o.includes("Video Consultation")?"btn-dark":"btn-outline-dark"}`,children:"Video Consultation"})]}),e.jsxs("div",{className:"mb-3 d-flex justify-content-between align-items-center flex-wrap gap-2",children:[e.jsxs("div",{className:"d-flex gap-2 flex-wrap",children:[e.jsx(v,{label:"Pending",value:"Pending",onChange:h,checked:r.includes("Pending")}),e.jsx(v,{label:"In-Progress",value:"In-Progress",onChange:h,checked:r.includes("In-Progress")}),e.jsx(v,{label:"Completed",value:"Completed",onChange:h,checked:r.includes("Completed")}),e.jsx(v,{label:"Confirmed",value:"Confirmed",onChange:h,checked:r.includes("Confirmed")}),e.jsx(v,{label:"Rejected",value:"Rejected",onChange:h,checked:r.includes("Rejected")})]}),e.jsx(O,{color:"secondary",onClick:()=>{i([]),D([]),T([]),S([])},children:"Reset Filters"})]}),e.jsxs(W,{striped:!0,hover:!0,responsive:!0,children:[e.jsx(X,{children:e.jsxs(B,{children:[e.jsx(m,{children:"S.No"}),e.jsx(m,{children:"H_ID"}),e.jsx(m,{children:"Name"}),e.jsx(m,{children:"Service Name"}),e.jsx(m,{children:"Consultation Type"}),e.jsx(m,{children:"Date"}),e.jsx(m,{children:"Time"}),e.jsx(m,{children:"Status"}),e.jsx(m,{children:"Action"})]})}),e.jsx(Y,{children:Array.isArray(g)&&g.length>0?E.map((t,n)=>e.jsxs(B,{children:[e.jsx(d,{children:n+1}),e.jsx(d,{children:t.clinicId}),e.jsx(d,{children:t.name}),e.jsx(d,{children:t.subServiceName}),e.jsx(d,{children:t.consultationType}),e.jsxs(d,{children:[t.sele?`${t.sele} `:"",t.serviceDate]}),e.jsx(d,{children:t.slot||t.servicetime}),e.jsx(d,{children:t.status}),e.jsx(d,{children:e.jsx(O,{color:"primary",size:"sm",onClick:()=>$(`/appointmentDetails/${t.bookingId}`,{state:{appointment:t}}),children:"View"})})]},`${t.id} -${n}`)):e.jsx(B,{children:e.jsx(d,{colSpan:"8",className:"text-center text-danger fw-bold",children:"No appointments found."})})})]}),e.jsx("div",{style:{marginTop:"20px",display:"flex",justifyContent:"flex-end"},children:Array.from({length:Math.ceil(g.length/f)},(t,n)=>e.jsx("button",{onClick:()=>N(n+1),style:{margin:"0 5px",padding:"5px 10px",backgroundColor:u===n+1?"#007bff":"#fff",color:u===n+1?"#fff":"#000",border:"1px solid #ccc",borderRadius:"5px"},children:n+1},n))})]})})};export{ae as default};
