import{r as s,n as L,h as B,j as e,o as H,B as M}from"./index-Cv0vxzO7.js";import{b as P,c as x,a as g}from"./index.esm-DdwSIoXl.js";import D from"./Resetpassword-DNcK8IFm.js";import{C,a as c}from"./CRow-CySzxWuk.js";import{C as R}from"./CCardBody-DYyn2a2A.js";import{C as F}from"./CForm-rpD05AzB.js";import{C as f}from"./CInputGroup-Dns4lxDk.js";import{C as j}from"./CInputGroupText-DI9V5ASP.js";import{c as A}from"./cil-user-Ddrdy7PS.js";import{C as w}from"./CFormInput-CmNvXk2d.js";import{c as T}from"./cil-lock-locked-DmxpJbVL.js";import{C as E,a as U,b as V,c as z}from"./CModalHeader-BCzhkO7X.js";import{C as W}from"./CModalTitle-CfjdpiSQ.js";import"./index-DfGtJUfV.js";import"./CFormLabel-BFA-7F4b.js";import"./CConditionalPortal-zIw3HrTm.js";var G=["512 512","<path fill='var(--ci-primary-color, currentColor)' d='M384,200V144A128,128,0,0,0,166.418,52.57l22.4,22.855A96,96,0,0,1,352,144v56H88V328c0,92.636,75.364,168,168,168s168-75.364,168-168V200Zm8,128c0,74.99-61.009,136-136,136s-136-61.01-136-136V232H392Z' class='ci-primary'/>"];const he=()=>{const[d,b]=s.useState(""),[Z,_]=s.useState([]),[m,y]=s.useState(""),[p,r]=s.useState(null),[h,u]=s.useState(!1),[$,q]=s.useState(""),[J,K]=s.useState(""),[i,N]=s.useState(!1),{setDoctorData:O,fetchHospitalDetails:S}=L(),[v,l]=s.useState(!1),k=B(),I=async o=>{o.preventDefault(),u(!0),r(null);try{console.log("hi");const t=await H.post(`${M}/clinicLogin`,{userName:d,password:m},{headers:{"Content-Type":"application/json"}});if(console.log(t),t.data.success){const a=t.data.hospitalId,n=t.data.hospitalName;localStorage.setItem("HospitalId",a),localStorage.setItem("HospitalName",n),console.log(a),console.log(n),await S(a),a==null||a==""||n==null||n==""?r("No hospital found."):(r(null),k("/dashboard"))}}catch(t){console.error("Login failed",t),r("Invalid username or password")}finally{u(!1)}};return e.jsxs("div",{className:"min-vh-100 d-flex flex-row align-items-center",style:{backgroundImage:'url("/assets/bg.jpg")',backgroundSize:"cover",backgroundPosition:"center",backgroundRepeat:"no-repeat"},children:[e.jsx(P,{children:e.jsx(C,{className:"justify-content-center",children:e.jsxs(c,{md:6,children:[e.jsxs("h1",{className:"position-absolute top-0 end-0 me-5 mt-3 text-center",style:{right:"10px"},children:[e.jsx("strong",{style:{color:"white",fontWeight:"bold",display:"block"},children:"Derma Care, Hyderabad"}),e.jsx("p",{style:{color:"#99C5F4",fontSize:"25px",marginTop:"8px",marginBottom:"0"},children:"Powered By Chiselon Technologies"})]}),e.jsx(R,{children:e.jsxs(F,{onSubmit:I,children:[e.jsx("h2",{className:"text-center mb-4",style:{color:"white",fontSize:"25px"},children:"Admin Login"}),p&&e.jsx("p",{className:"text-danger text-center",children:p}),e.jsxs(f,{className:"mb-3 w-50 mx-auto",children:[e.jsx(j,{children:e.jsx(x,{icon:A})}),e.jsx(w,{placeholder:"Username",autoComplete:"userName",value:d,onChange:o=>b(o.target.value)})]}),e.jsxs(f,{className:"mb-3 w-50 mx-auto",children:[e.jsx(j,{onClick:()=>N(!i),style:{cursor:"pointer"},children:e.jsx(x,{icon:i?G:T})}),e.jsx(w,{type:i?"text":"password",placeholder:"Password",autoComplete:"current-password",value:m,onChange:o=>y(o.target.value)})]}),e.jsx(C,{className:"mt-4 text-center",children:e.jsx(c,{children:e.jsx("a",{href:"#",className:"text-decoration-none text-white",style:{fontWeight:"bold"},onClick:o=>{o.preventDefault(),l(!0)},children:"Change password?"})})}),e.jsx(c,{xs:12,className:"text-center",children:e.jsx(g,{style:{backgroundColor:"#0A6FDBFF",fontWeight:"bold"},className:"px-4 text-white mt-3",type:"submit",disabled:h,children:h?"Logging in...":"Login"})})]})})]})})}),e.jsxs(E,{visible:v,onClose:()=>l(!1),children:[e.jsx(U,{children:e.jsx(W,{children:"Reset Password"})}),e.jsx(V,{children:e.jsx(D,{onClose:()=>l(!1)})}),e.jsx(z,{children:e.jsx(g,{color:"secondary",onClick:()=>l(!1),children:"Close"})})]})]})};export{he as default};
