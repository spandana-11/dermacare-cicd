import{r as o,k as H,h as B,j as e,o as P,B as R}from"./index-C6Cu0DpS.js";import{b as D,c as g,a as f}from"./index.esm-CuIIRQYS.js";import F from"./Resetpassword-DZmF4kz2.js";import{C as j,a as c}from"./CRow-i8KC5tGX.js";import{C as A}from"./CCardBody-BC-c8xch.js";import{C as E}from"./CForm-gXrxh4YO.js";import{C as w}from"./CInputGroup-DtMGS9aP.js";import{C as b}from"./CInputGroupText-4vdlSwrW.js";import{c as T}from"./cil-user-Ddrdy7PS.js";import{C as y}from"./CFormInput-Ducpmanj.js";import{c as U}from"./cil-lock-locked-DmxpJbVL.js";import{C as V,a as z,b as W}from"./CModalHeader-Dk8K-sO9.js";import{C as G}from"./CModalTitle-CmjU-2nF.js";import{C as Z}from"./CModalFooter-Znwl01vL.js";import"./index-BiTnJj5k.js";import"./CFormLabel-DMQAq1-n.js";import"./CConditionalPortal-DtVGpKjo.js";var _=["512 512","<path fill='var(--ci-primary-color, currentColor)' d='M384,200V144A128,128,0,0,0,166.418,52.57l22.4,22.855A96,96,0,0,1,352,144v56H88V328c0,92.636,75.364,168,168,168s168-75.364,168-168V200Zm8,128c0,74.99-61.009,136-136,136s-136-61.01-136-136V232H392Z' class='ci-primary'/>"];const de=()=>{const[d,N]=o.useState("");o.useState([]);const[m,S]=o.useState(""),[p,r]=o.useState(null),[h,u]=o.useState(!1);o.useState(""),o.useState("");const[i,v]=o.useState(!1),{setDoctorData:$,fetchHospitalDetails:k}=H(),[I,l]=o.useState(!1),L=B(),M=async a=>{var x,C;a.preventDefault(),u(!0),r(null);try{console.log("hi");const t=await P.post(`${R}/clinicLogin`,{userName:d,password:m},{headers:{"Content-Type":"application/json"}});if(console.log(t),t.data.success){const s=t.data.hospitalId,n=t.data.hospitalName;localStorage.setItem("HospitalId",s),localStorage.setItem("HospitalName",n),console.log(s),console.log(n),await k(s),s==null||s==""||n==null||n==""?r("No hospital found."):(r(null),L("/dashboard"))}}catch(t){const s=((C=(x=t.response)==null?void 0:x.data)==null?void 0:C.message)||"An unexpected error occurred.";s.toLowerCase().includes("username")?r("Incorrect username."):s.toLowerCase().includes("password")?r("Incorrect password."):r(s),console.error("Error details:",t.response||t.message)}finally{u(!1)}};return e.jsxs("div",{className:"min-vh-100 d-flex flex-row align-items-center",style:{backgroundImage:'url("/assets/bg.jpg")',backgroundSize:"cover",backgroundPosition:"center",backgroundRepeat:"no-repeat"},children:[e.jsx(D,{children:e.jsx(j,{className:"justify-content-center",children:e.jsxs(c,{md:6,children:[e.jsxs("h1",{className:"position-absolute top-0 end-0 me-5 mt-3 text-center",style:{right:"10px"},children:[e.jsx("strong",{style:{color:"white",fontWeight:"bold",display:"block"},children:"Derma Care, Hyderabad"}),e.jsx("p",{style:{color:"#99C5F4",fontSize:"25px",marginTop:"8px",marginBottom:"0"},children:"Powered By Chiselon Technologies"})]}),e.jsx(A,{children:e.jsxs(E,{onSubmit:M,children:[e.jsx("h2",{className:"text-center mb-4",style:{color:"white",fontSize:"25px"},children:"Admin Login"}),p&&e.jsx("p",{className:"text-danger text-center",children:p}),e.jsxs(w,{className:"mb-3 w-50 mx-auto",children:[e.jsx(b,{children:e.jsx(g,{icon:T})}),e.jsx(y,{placeholder:"Username",autoComplete:"userName",value:d,onChange:a=>N(a.target.value)})]}),e.jsxs(w,{className:"mb-3 w-50 mx-auto",children:[e.jsx(b,{onClick:()=>v(!i),style:{cursor:"pointer"},children:e.jsx(g,{icon:i?_:U})}),e.jsx(y,{type:i?"text":"password",placeholder:"Password",autoComplete:"current-password",value:m,onChange:a=>S(a.target.value)})]}),e.jsx(j,{className:"mt-4 text-center",children:e.jsx(c,{children:e.jsx("a",{href:"#",className:"text-decoration-none text-white",style:{fontWeight:"bold"},onClick:a=>{a.preventDefault(),l(!0)},children:"Change password?"})})}),e.jsx(c,{xs:12,className:"text-center",children:e.jsx(f,{style:{backgroundColor:"#0A6FDBFF",fontWeight:"bold"},className:"px-4 text-white mt-3",type:"submit",disabled:h,children:h?"Logging in...":"Login"})})]})})]})})}),e.jsxs(V,{visible:I,onClose:()=>l(!1),children:[e.jsx(z,{children:e.jsx(G,{children:"Reset Password"})}),e.jsx(W,{children:e.jsx(F,{onClose:()=>l(!1)})}),e.jsx(Z,{children:e.jsx(f,{color:"secondary",onClick:()=>l(!1),children:"Close"})})]})]})};export{de as default};
