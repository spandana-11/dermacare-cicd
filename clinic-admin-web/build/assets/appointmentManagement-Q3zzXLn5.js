import{r as s,_ as K,$ as l,a as R,c as I,P as c,h as Q,j as e}from"./index-DusJkewp.js";import{G as U}from"./appointmentAPI-DFofx6xd.js";import{C as O,a as q}from"./CFormLabel-CBGUC9kD.js";import{u as W}from"./CConditionalPortal-Cnq2Lw2c.js";import{a as G}from"./index.esm-lyhHPa93.js";import{C as X,a as Y,b as H,c as m,d as Z,e as d}from"./CTable-CiJc-Hej.js";import{j as _}from"./DefaultLayout-D__TI_5f.js";var v=s.forwardRef(function(a,L){var V=a.className,o=a.button,z=a.feedback,D=a.feedbackInvalid,g=a.feedbackValid,$=a.floatingLabel,M=a.tooltipFeedback,w=a.hitArea,x=a.id,k=a.indeterminate,h=a.inline,C=a.invalid,r=a.label,y=a.reverse,i=a.type,T=i===void 0?"checkbox":i,u=a.valid,S=K(a,["className","button","feedback","feedbackInvalid","feedbackValid","floatingLabel","tooltipFeedback","hitArea","id","indeterminate","inline","invalid","label","reverse","type","valid"]),p=s.useRef(null),B=W(L,p);s.useEffect(function(){p.current&&k&&(p.current.indeterminate=k)},[k,p.current]);var j=function(){return l.createElement("input",R({type:T,className:I(o?"btn-check":"form-check-input",{"is-invalid":C,"is-valid":u,"me-2":w}),id:x},S,{ref:B}))},N=function(){return l.createElement(q,{describedby:S["aria-describedby"],feedback:z,feedbackInvalid:D,feedbackValid:g,floatingLabel:$,invalid:C,tooltipFeedback:M,valid:u})},A=function(){var f;return l.createElement(O,R({customClassName:I(o?I("btn",o.variant?"btn-".concat(o.variant,"-").concat(o.color):"btn-".concat(o.color),(f={},f["btn-".concat(o.size)]=o.size,f),"".concat(o.shape)):"form-check-label")},x&&{htmlFor:x}),r)},E=function(){return o?l.createElement(l.Fragment,null,l.createElement(j,null),r&&l.createElement(A,null),l.createElement(N,null)):r?w?l.createElement(l.Fragment,null,l.createElement(j,null),l.createElement(O,R({customClassName:I("form-check-label stretched-link",V)},x&&{htmlFor:x}),r),l.createElement(N,null)):l.createElement("div",{className:I("form-check",{"form-check-inline":h,"form-check-reverse":y,"is-invalid":C,"is-valid":u},V)},l.createElement(j,null),l.createElement(A,null),l.createElement(N,null)):l.createElement(j,null)};return l.createElement(E,null)});v.propTypes=R({button:c.object,className:c.string,hitArea:c.oneOf(["full"]),id:c.string,indeterminate:c.bool,inline:c.bool,label:c.oneOfType([c.string,c.node]),reverse:c.bool,type:c.oneOf(["checkbox","radio"])},q.propTypes);v.displayName="CFormCheck";const re=()=>{const[a,L]=s.useState(null),[V,o]=s.useState([]),[z,D]=s.useState([]),[g,$]=s.useState([]),[M,w]=s.useState([]),[x,k]=s.useState([]),[h,C]=s.useState([]),[r,y]=s.useState([]),[i,T]=s.useState([]),[u,S]=s.useState(1),p=7,B=Q(),j=async()=>{try{const t=localStorage.getItem("HospitalId");if(console.log("Hospital ID from localStorage:",t),!t){console.warn("Hospital ID not found in localStorage.");return}const n=await U(t);console.log("Appointments for this Hospital:",n),n!=null&&n.data?C(n.data):(console.warn("No data returned for Hospital ID:",t),C([]))}catch(t){console.error("Failed to fetch appointments:",t)}},N=t=>{switch(console.log(t),t==null?void 0:t.toLowerCase()){case"completed":return"success";case"Rejected":return"danger";case"pending":return"warning";case"confirmed":return"info";case"rescheduled":return"secondary";default:return"dark"}};s.useEffect(()=>{j()},[]),s.useEffect(()=>{let t=[...h];console.log("Initial bookings:",t);const n=b=>b==null?void 0:b.toLowerCase().trim(),F={"Service & Treatment":"services & treatments","Video Consultation":"online consultation","In-clinic":"in-clinic consultation"};if(i.length>0&&(t=t.filter(b=>i.some(P=>n(P)===n(b.status))),console.log("After status filter:",t)),r.length===1){const b=r[0],P=F[b];P&&(t=t.filter(J=>n(J.consultationType)===P),console.log(`After ${b} filter:`,t))}$(t),S(1)},[h,r,i]),s.useEffect(()=>{const t=[...new Set(h.map(F=>F.subServiceName).filter(Boolean))],n=[...new Set(h.map(F=>F.consultationType).filter(Boolean))];w(t),k(n),console.log("Available Consultation Types:",n)},[h]),s.useEffect(()=>{window.scrollTo(0,0)},[u]);const A=g.slice((u-1)*p,u*p),E=t=>{r.includes(t)?y([]):y([t])},f=t=>{const n=t.target.value;i.includes(n)?T([]):T([n])};return e.jsx("div",{style:{overflow:"hidden"},children:e.jsxs("div",{className:"container mt-4",children:[e.jsx("h5",{children:"Appointments"}),e.jsxs("div",{className:"d-flex gap-2 mb-3",children:[e.jsx("button",{onClick:()=>E("Service & Treatment"),className:`btn ${r.includes("Service & Treatment")?"btn-dark":"btn-outline-dark"}`,children:"Service & Treatment"}),e.jsx("button",{onClick:()=>E("In-clinic"),className:`btn ${r.includes("In-clinic")?"btn-dark":"btn-outline-dark"}`,children:"In-Clinic Consultation"}),e.jsx("button",{onClick:()=>E("Video Consultation"),className:`btn ${r.includes("Video Consultation")?"btn-dark":"btn-outline-dark"}`,children:"Video Consultation"})]}),e.jsxs("div",{className:"mb-3 d-flex justify-content-between align-items-center flex-wrap gap-2",children:[e.jsxs("div",{className:"d-flex gap-2 flex-wrap",children:[e.jsx(v,{label:"Pending",value:"Pending",onChange:f,checked:i.includes("Pending")}),e.jsx(v,{label:"In-Progress",value:"In-Progress",onChange:f,checked:i.includes("In-Progress")}),e.jsx(v,{label:"Completed",value:"Completed",onChange:f,checked:i.includes("Completed")}),e.jsx(v,{label:"Confirmed",value:"Confirmed",onChange:f,checked:i.includes("Confirmed")}),e.jsx(v,{label:"Rejected",value:"Rejected",onChange:f,checked:i.includes("Rejected")})]}),e.jsx(G,{color:"secondary",onClick:()=>{o([]),D([]),y([]),T([])},children:"Reset Filters"})]}),e.jsxs(X,{striped:!0,hover:!0,responsive:!0,children:[e.jsx(Y,{children:e.jsxs(H,{children:[e.jsx(m,{children:"S.No"}),e.jsx(m,{children:"H_ID"}),e.jsx(m,{children:"Name"}),e.jsx(m,{children:"Service Name"}),e.jsx(m,{children:"Consultation Type"}),e.jsx(m,{children:"Date"}),e.jsx(m,{children:"Time"}),e.jsx(m,{children:"Status"}),e.jsx(m,{children:"Action"})]})}),e.jsx(Z,{children:Array.isArray(g)&&g.length>0?A.map((t,n)=>e.jsxs(H,{children:[e.jsx(d,{children:n+1}),e.jsx(d,{children:t.clinicId}),e.jsx(d,{children:t.name}),e.jsx(d,{children:t.subServiceName}),e.jsx(d,{children:t.consultationType}),e.jsxs(d,{children:[t.sele?`${t.sele} `:"",t.serviceDate]}),e.jsx(d,{children:t.slot||t.servicetime}),e.jsx(d,{children:e.jsx(d,{children:e.jsx(_,{color:N(t.status),children:t.status})})}),e.jsx(d,{children:e.jsx(G,{color:"primary",size:"sm",onClick:()=>B(`/appointmentDetails/${t.bookingId}`,{state:{appointment:t}}),children:"View"})})]},`${t.id} -${n}`)):e.jsx(H,{children:e.jsx(d,{colSpan:"8",className:"text-center text-danger fw-bold",children:"No appointments found."})})})]}),e.jsx("div",{style:{marginTop:"20px",display:"flex",justifyContent:"flex-end"},children:Array.from({length:Math.ceil(g.length/p)},(t,n)=>e.jsx("button",{onClick:()=>S(n+1),style:{margin:"0 5px",padding:"5px 10px",backgroundColor:u===n+1?"#007bff":"#fff",color:u===n+1?"#fff":"#000",border:"1px solid #ccc",borderRadius:"5px"},children:n+1},n))})]})})};export{re as default};
