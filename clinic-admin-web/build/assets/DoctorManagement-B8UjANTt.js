import{r as c,_ as ta,R as ue,c as ke,P as M,u as sa,j as e,B as E,b as ia,a as ra,Q as oa,a8 as Te,h as pe,F as na,H as la,W as ca,y as da}from"./index-DIpuK5ve.js";import{b as he}from"./index.esm-D1QouA3b.js";import{u as ma,G as ua}from"./DoctorAPI-DBEkqLjS.js";import{c as xe}from"./capitalizeWords-CuwF8AcI.js";import{C as f}from"./CFormLabel-DjU27C7A.js";import{S as Z}from"./react-select.esm-C5JdXr9C.js";import{L as pa}from"./loader-m2E4dacC.js";import{F as ha}from"./index.es-ylDXcgl1.js";import{h as xa}from"./index-BS1iOPDO.js";import{C as ga,a as fa,b as va}from"./CModalHeader-CaIVx0Az.js";import{C as $,a as h}from"./CRow-Bc5toSNl.js";import{C as I}from"./CFormInput-BUyqDmRK.js";import{C as R}from"./CFormSelect-jvr6WF6m.js";import{C as ba}from"./CFormTextarea-DmMgw1ag.js";import{C as ge}from"./CFormCheck-CcKXozyO.js";import{C as ja}from"./CModalFooter-CUSCQX1g.js";import"./defineProperty-DevPl9dM.js";import"./slicedToArray-D6Gft5C9.js";import"./CNavItem-bk6AY8R-.js";const fe=c.forwardRef((o,m)=>{var{className:y,id:N,invalid:S,label:v,reverse:u,size:j,type:T="checkbox",valid:z}=o,A=ta(o,["className","id","invalid","label","reverse","size","type","valid"]);return ue.createElement("div",{className:ke("form-check form-switch",{"form-check-reverse":u,[`form-switch-${j}`]:j,"is-invalid":S,"is-valid":z},y)},ue.createElement("input",Object.assign({type:T,className:ke("form-check-input",{"is-invalid":S,"is-valid":z}),id:N},A,{ref:m})),v&&ue.createElement(f,Object.assign({customClassName:"form-check-label"},N&&{htmlFor:N}),v))});fe.propTypes={className:M.string,id:M.string,invalid:M.bool,label:M.oneOfType([M.string,M.node]),reverse:M.bool,size:M.oneOf(["lg","xl"]),type:M.oneOf(["checkbox","radio"]),valid:M.bool};fe.displayName="CFormSwitch";const ya=({doctor:o})=>{const m=sa(),[y,N]=c.useState(o.doctorAvailabilityStatus||!1);if(!o)return null;const S=async v=>{const u=v.target.checked;N(u),await ma(o.doctorId,u)?E.success(`Availability set to ${u?"Available":"Not Available"}`):(E.error("Failed to update availability"),N(!u))};return e.jsxs("div",{className:"doctor-card",children:[e.jsx("div",{className:"doctor-avatar",children:e.jsx("img",{src:o.doctorPicture,alt:`Photo of Dr. ${o.doctorName||"Doctor"}`,onError:v=>{v.target.src!==window.location.origin+"/default-avatar.png"&&(v.target.src="/default-avatar.png")}})}),e.jsxs("div",{className:"doctor-info",children:[e.jsxs("h2",{children:[xe(o.doctorName),", ",xe(o.qualification)]}),e.jsx("p",{className:"speciality",children:xe(o.specialization)}),e.jsxs("p",{children:[o.experience," Years of experience"]}),e.jsxs("div",{className:"availability-toggle d-flex align-items-center gap-2 mt-2",children:[e.jsx("label",{htmlFor:`availability-${o.doctorId}`,className:"fw-bold mb-0  ",style:{whiteSpace:"nowrap"},children:"Doctor Availability"}),e.jsx(fe,{id:`availability-${o.doctorId}`,checked:y,onChange:S,style:{backgroundColor:"var(--color-black)",marginTop:"-10px",borderColor:"var(--color-bgcolor)"}})]})]}),e.jsxs("div",{className:"doctor-action d-flex flex-column align-items-center gap-2 p-2 border rounded shadow-sm",children:[e.jsx("button",{className:"btn btn-info w-100",onClick:()=>m(`/Doctor/${o.doctorId}`,{state:{doctor:o}}),"aria-label":`View details of Dr. ${o.doctorName}`,children:"View Details"}),e.jsxs("p",{className:"mb-0 ",style:{color:"var(--color-black)"},children:[e.jsx("strong",{children:"ID:"})," ",o.doctorId]})]}),e.jsx("style",{children:`
       .doctor-card {
  display: flex;
  align-items: flex-start;
  padding: 16px ;
  border: 1px solid #eaeaea;
  border-radius: 12px;
  margin-bottom: 16px;
  box-shadow: 0 2px 6px rgba(0,0,0,0.05);
  background-color: #fff;
  gap: 16px;
  transition: transform 0.2s ease, box-shadow 0.2s ease;
}

.doctor-card:hover {
  transform: translateY(-2px);
  box-shadow: 0 4px 10px rgba(0,0,0,0.1);
}

.doctor-avatar img {
  width: 90px;
  height: 90px;
  border-radius: 50%;
  object-fit: cover;
  border: 2px solid #f1f1f1;
  box-shadow: 0 2px 4px rgba(0,0,0,0.08);
}

.doctor-info {
  flex-grow: 1;
  padding: 0 10px;
}

.doctor-info h2 {
  color:var(--color-black);
  font-size: 18px;
  margin: 0 0 6px;
  font-weight: 700;
}

.speciality {
  margin: 4px 0;
  color:var(--color-black);
  font-size: 14px;
}

.doctor-info p {
 
  color:var(--color-black);
  font-size: 14px;
}

.availability-toggle label {
margin-top:-30px;
  font-size: 14px;
  color:var(--color-black);
}

.doctor-action {
  display: flex;
  flex-direction: column;
  align-items: center;
  gap: 6px;
  padding: 10px;
  border: 1px solid var(--color-black);
  border-radius: 10px;
  background-color: #fafafa;
  min-width: 160px;
  max-width: 200px;
}

.doctor-action button {
  background-color:var(--color-black);
  color: white;
  border: none;
  padding: 8px 12px;
  border-radius: 8px;
  cursor: pointer;
  font-weight: 500;
  width: 100%;
  transition: background-color 0.2s;
}

.doctor-action button:hover {
  background-color:var(--color-black);
}

      `})]})},_={_origin:"https://api.emailjs.com"},Sa=(o,m="https://api.emailjs.com")=>{_._userID=o,_._origin=m},Le=(o,m,y)=>{if(!o)throw"The user ID is required. Visit https://dashboard.emailjs.com/admin/integration";if(!m)throw"The service ID is required. Visit https://dashboard.emailjs.com/admin";if(!y)throw"The template ID is required. Visit https://dashboard.emailjs.com/admin/templates";return!0};class Ae{constructor(m){this.status=m.status,this.text=m.responseText}}const Oe=(o,m,y={})=>new Promise((N,S)=>{const v=new XMLHttpRequest;v.addEventListener("load",({target:u})=>{const j=new Ae(u);j.status===200||j.text==="OK"?N(j):S(j)}),v.addEventListener("error",({target:u})=>{S(new Ae(u))}),v.open("POST",_._origin+o,!0),Object.keys(y).forEach(u=>{v.setRequestHeader(u,y[u])}),v.send(m)}),Na=(o,m,y,N)=>{const S=N||_._userID;return Le(S,o,m),Oe("/api/v1.0/email/send",JSON.stringify({lib_version:"3.2.0",user_id:S,service_id:o,template_id:m,template_params:y}),{"Content-type":"application/json"})},Ca=o=>{let m;if(typeof o=="string"?m=document.querySelector(o):m=o,!m||m.nodeName!=="FORM")throw"The 3rd parameter is expected to be the HTML form element or the style selector of form";return m},wa=(o,m,y,N)=>{const S=N||_._userID,v=Ca(y);Le(S,o,m);const u=new FormData(v);return u.append("lib_version","3.2.0"),u.append("service_id",o),u.append("template_id",m),u.append("user_id",S),Oe("/api/v1.0/email/send-form",u)},Fa={init:Sa,send:Na,sendForm:wa},Ia=({name:o,email:m,password:y,clinicName:N,userID:S})=>{const v={name:`${o}`,email:m,userID:S,password:y,clinicName:`${N}`,downloadLink:"https://play.google.com/store/apps/details?id=com.whatsapp"};Fa.send("service_xx8z5p5","template_x57efme",v,"csbSLIKhSrOUjeqsQ").then(u=>{console.log("Email sent successfully:",u)}).catch(u=>{console.error("Failed to send email:",u)})},ot=()=>{const{doctorData:o,errorMessage:m,setDoctorData:y,setSelectedHospital:N,fetchHospitalDetails:S,fetchDoctorDetails:v}=ia(),[u,j]=c.useState(!1),[T,z]=c.useState({serviceName:"",serviceId:""}),[A,ve]=c.useState([]),[ze,Y]=c.useState(!1),[k,qe]=c.useState({inClinic:!1,online:!1,serviceTreatment:!1}),X=a=>{qe(t=>{const s={...t,[a]:!t[a]},r=[];return s.serviceTreatment&&r.push("Services & Treatments"),s.inClinic&&r.push("In-Clinic"),s.online&&r.push("Video/Online"),p(l=>({...l,availableConsultations:r})),console.log("Available Consultations:",r),s})},[i,p]=c.useState({doctorPicture:null,doctorLicence:"",doctorMobileNumber:"",doctorEmail:"",doctorName:"",service:[],subServices:[],specialization:"",gender:"",experience:"",qualification:"",associationsOrMemberships:"",branch:[],availableDays:"",availableTimes:"",profileDescription:"",doctorSignature:null,doctorFees:{inClinicFee:"",vedioConsultationFee:""},focusAreas:[],languages:[],highlights:[],availableConsultations:[]}),[H,ee]=c.useState(""),[V,ae]=c.useState(""),[B,te]=c.useState(""),[G,se]=c.useState(""),[$e,Re]=c.useState([]),[Da,_e]=c.useState([]),[Ma,Pa]=c.useState(""),[Ea,ka]=c.useState([]),[He,ie]=c.useState([]),[W,re]=c.useState([]),[Ta,Ve]=c.useState([]),[Q,be]=c.useState(""),[Aa,La]=c.useState(""),[n,d]=c.useState({}),[Be,je]=c.useState(!1),[Oa,oe]=c.useState(""),[ye,Se]=c.useState([]),[Ge,We]=c.useState(!0),[za,ne]=c.useState({}),Ne=(a,t)=>{if(t==="start"){ee(a);const s=`${a} - ${V||""}`.trim();p(r=>({...r,availableDays:s}))}else if(t==="end"){ae(a);const s=`${H||""} - ${a}`.trim();p(r=>({...r,availableDays:s}))}},Ce=(a,t)=>{if(t==="start"){te(a);const s=`${a} - ${G||""}`.trim();p(r=>({...r,availableTimes:s}))}else if(t==="end"){se(a);const s=`${B||""} - ${a}`.trim();p(r=>({...r,availableTimes:s}))}},Qe=async a=>{if(!(!Array.isArray(a)||a.length===0))try{const s=(await Promise.all(a.map(async r=>{const l=await la(r);return console.log(l.data),l.data||[]}))).flat().flatMap(r=>r.subServices||[]);re(s)}catch(t){console.error("Failed to fetch subservices:",t),re([])}},Je=async a=>{const{name:t,value:s}=a.target;if(t==="categoryId"){z(r=>({...r,categoryId:s,serviceId:[],serviceName:[]}));try{const l=(await Promise.all(s.map(async b=>{var w;return((w=(await pe.get(`/${na}/${b}`)).data)==null?void 0:w.data)||[]}))).flat();ie(l);const C=l.map(b=>({label:b.serviceName,value:b.serviceId}));Se(C)}catch(r){console.error("❌ Failed to fetch services:",r),ie([]),Se([])}}},we=["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],Fe=["07:00 AM","08:00 AM","09:00 AM","10:00 AM","11:00 AM","12:00 PM","01:00 PM","02:00 PM","03:00 PM","04:00 PM","05:00 PM","06:00 PM","07:00 PM","08:00 PM","09:00 PM","10:00 PM"],Ue=async()=>{try{const a=await da();if(a.data&&Array.isArray(a.data))Re(a.data);else throw new Error("Invalid category data format");const t=await Te();console.log(t.data),_e(t.data)}catch(a){console.error("Error fetching data:",a),ne("Failed to fetch data. Please try again later.")}finally{}},[Ie,Ke]=c.useState([]),[qa,De]=c.useState(!1);c.useEffect(()=>{(async()=>{const t=localStorage.getItem("HospitalId");try{je(!0),await Ue(),await Te();const s=await pe.get(`/doctors/hospitalById/${t}`);oe(s?"":"Hospital data not found"),De(!0);const r=await ua(t),l=r.data||[];console.log("Branch API response:",r);const C=l.map(b=>({value:b.branchId||b.id||b.name,label:b.branchName||b.name}));Ke(C)}catch(s){console.error(s),oe("Failed to fetch hospital details")}finally{je(!1),De(!1)}})()},[]);const Ze=()=>{const a={};let t=!0;const s=["Mon","Tue","Wed","Thu","Fri","Sat"];(!T.categoryId||T.categoryId.length===0)&&(a.categoryId="Please select at least one category.",t=!1),(!A||A.length===0)&&(a.serviceId="Please select at least one service.",t=!1),(!Q||Q.length===0)&&(a.subServiceName="Please select at least one sub service.",t=!1),i.doctorName.trim()||(a.doctorName="Doctor name is required",t=!1),i.doctorLicence.trim()||(a.doctorLicence="License number is required",t=!1),(!i.doctorMobileNumber||!/^[789]\d{9}$/.test(i.doctorMobileNumber))&&(a.doctorMobileNumber="Enter a valid 10-digit mobile number starting with 7, 8, or 9",t=!1),(!i.doctorEmail||!/^[a-zA-Z0-9._-]+@[a-zA-Z0-9.-]+\.[a-zA-Z]{2,6}$/.test(i.doctorEmail))&&(a.doctorEmail="Please enter a valid Email",t=!1),(!i.experience||isNaN(i.experience)||i.experience<0)&&(a.experience="Enter valid experience",t=!1),i.qualification.trim()||(a.qualification="Qualification is required",t=!1),i.specialization.trim()||(a.specialization="Specialization is required",t=!1),i.profileDescription.trim()||(a.profileDescription="Profile description is required",t=!1),k.inClinic&&(!i.doctorFees.inClinicFee||isNaN(i.doctorFees.inClinicFee)||Number(i.doctorFees.inClinicFee)<=0)&&(a.inClinicFee="Enter valid in-clinic fee",t=!1),k.online&&(!i.doctorFees.vedioConsultationFee||isNaN(i.doctorFees.vedioConsultationFee)||Number(i.doctorFees.vedioConsultationFee)<=0)&&(a.vedioConsultationFee="Enter valid video consultation fee",t=!1),i.doctorPicture||(a.doctorPicture="Profile picture is required",t=!1),i.doctorSignature||(a.doctorSignature="Doctor Signature is required",t=!1),!H||!V?(a.availableDays="Start and end days are required",t=!1):s.indexOf(H)>s.indexOf(V)&&(a.availableDays="Start day cannot be after end day",t=!1);const r=l=>{const[C,b]=l.split(" ");let[x,w]=C.split(":").map(Number);return b==="PM"&&x!==12&&(x+=12),b==="AM"&&x===12&&(x=0),x*60+w};return!B||!G?(a.availableTimes="Start and end times are required",t=!1):r(B)>=r(G)&&(a.availableTimes="Start time must be before end time",t=!1),d(a),t},le=$e.map(a=>({value:a.categoryId,label:a.categoryName})),Ye=async()=>{var s,r,l,C,b,x,w,de,J,Pe,Ee;if((s=o==null?void 0:o.data)==null?void 0:s.some(F=>F.doctorLicence===i.doctorLicence.trim())){d(F=>({...F,doctorLicence:"This License Number already exists"}));return}if(ze)return;if(Y(!0),!Ze()){Y(!1);return}try{const F=localStorage.getItem("HospitalId"),U=localStorage.getItem("HospitalName"),P=(W||[]).map(g=>g.subServiceId),q=(W||[]).filter(g=>Q.includes(g.subServiceId)&&P.includes(g.subServiceId)).map(g=>({subServiceId:g.subServiceId,subServiceName:g.subServiceName})),ea=(r=o.data)==null?void 0:r.some(g=>g.doctorMobileNumber===i.doctorMobileNumber),aa=(l=o.data)==null?void 0:l.some(g=>g.doctorEmail===i.doctorEmail);if(ea){E.error("A doctor with this mobile number already exists");return}if(aa){E.error("A doctor with this email already exists");return}const me={branchId:localStorage.getItem("branchId"),hospitalId:F,doctorPicture:i.doctorPicture,doctorSignature:i.doctorSignature,doctorName:i.doctorName,doctorMobileNumber:i.doctorMobileNumber,doctorEmail:i.doctorEmail,doctorLicence:i.doctorLicence,category:le.filter(g=>T.categoryId.includes(g.value)).map(g=>({categoryId:g.value,categoryName:g.label})),service:A.map(g=>({serviceId:g.serviceId,serviceName:g.serviceName})),subServices:q,gender:i.gender,experience:i.experience,qualification:i.qualification,associationsOrMemberships:i.associationsOrMemberships,branches:i.branch,specialization:i.specialization,availableDays:i.availableDays,availableTimes:i.availableTimes,profileDescription:i.profileDescription,focusAreas:i.focusAreas,languages:i.languages,highlights:i.highlights,doctorFees:{inClinicFee:i.doctorFees.inClinicFee,vedioConsultationFee:i.doctorFees.vedioConsultationFee}};console.log(me);const O=await pe.post("/addDoctor",me,{headers:{"Content-Type":"application/json"}});if(((C=O.data)==null?void 0:C.status)===201){const g=((b=O.data.data)==null?void 0:b.doctor)??me;y(K=>({...K,data:[...(K==null?void 0:K.data)||[],g]})),await Ia({name:i.doctorName,email:i.doctorEmail,password:(x=O.data.data)==null?void 0:x.temporaryPassword,userID:(w=O.data.data)==null?void 0:w.username,clinicName:U}),E.success(O.data.message||"Doctor added successfully",{position:"top-right"}),p({doctorPicture:null,doctorSignature:null,doctorLicence:"",doctorMobileNumber:"",doctorEmail:"",doctorName:"",gender:"",experience:"",qualification:"",associationsOrMemberships:"",branch:"",specialization:"",availableDays:"",availableTimes:"",profileDescription:"",focusAreas:[],languages:[],highlights:[],doctorFees:{inClinicFee:"",vedioConsultationFee:""}}),z({serviceId:"",serviceName:"",categoryId:"",categoryName:""}),ve([]),Ve([]),ie([]),re([]),ee(""),ae(""),te(""),se(""),j(!1)}else throw new Error(((de=O.data)==null?void 0:de.message)||"Failed to add doctor")}catch(F){const U=(J=F==null?void 0:F.response)==null?void 0:J.status,P=((Ee=(Pe=F==null?void 0:F.response)==null?void 0:Pe.data)==null?void 0:Ee.message)||"Something went wrong";U===400&&P.includes("mobile number")?(E.error(P,{position:"top-right"}),ne(q=>({...q,doctorMobileNumber:P})),j(!0)):U===400&&P.includes("email")?(E.error(P,{position:"top-right"}),ne(q=>({...q,doctorEmail:P})),j(!0)):(E.error(P,{position:"top-right"}),j(!1))}finally{Y(!1)}},ce=({label:a,items:t,onAdd:s})=>{const[r,l]=c.useState(""),C=()=>{const x=r.trim();x&&!t.includes(x)&&(s([...t,x]),l(""))},b=x=>{const w=t.filter((de,J)=>J!==x);s(w)};return e.jsxs("div",{className:"mb-3",children:[e.jsx("label",{className:"form-label fw-semibold",children:a}),e.jsxs("div",{className:"d-flex mb-2",children:[e.jsx("input",{type:"text",className:"form-control me-2",placeholder:`Add ${a}`,value:r,onChange:x=>l(x.target.value),onKeyDown:x=>x.key==="Enter"&&C()}),e.jsx("button",{className:"btn btn-info text-white",onClick:C,children:"Add"})]}),e.jsx("div",{className:"d-flex flex-wrap gap-2",children:t.map((x,w)=>e.jsxs("div",{className:"badge d-flex align-items-center",style:{padding:"8px 12px",borderRadius:"20px"},children:[e.jsx("span",{className:"me-2",children:x}),e.jsx("span",{style:{cursor:"pointer",fontSize:"10px"},onClick:()=>b(w),children:"❌"})]},w))})]})},Xe=async a=>{let t=!1;const s=localStorage.getItem("HospitalId");for(const r of a){const l=await ca(s,r);if(!l||!l.price||!l.finalCost){t=!0;break}}We(!t)},{searchQuery:L}=ra(),D=a=>(a==null?void 0:a.toString().toLowerCase())||"",[$a,Ra]=c.useState({inClinic:!0,videoConsultation:!0}),Me=(Array.isArray(o==null?void 0:o.data)?o.data:[]).filter(a=>L.trim()?D(a.doctorName).includes(D(L))||D(a.qualification).includes(D(L))||D(a.doctorId).includes(D(L))||D(a.specialization).includes(D(L))||D(a.doctorMobileNumber).includes(D(L)):!0);return e.jsxs("div",{children:[e.jsx(oa,{}),e.jsx("div",{className:"d-flex justify-content-end mb-3",children:e.jsxs("button",{className:"btn btn-info text-white d-flex align-items-center gap-2 shadow-sm rounded-pill px-4 py-2",onClick:()=>{d({}),j(!0)},style:{background:"linear-gradient(to right, var(--color-black),var(--color-black)",border:"none",fontWeight:"600",fontSize:"16px"},children:[e.jsx(ha,{icon:xa}),e.jsx("span",{style:{color:"white"},children:"Add Doctor"})]})}),Be?e.jsx("div",{className:"centered-message",children:e.jsx(pa,{message:"Loading doctors..."})}):m?e.jsx("div",{className:"centered-message",children:e.jsx("p",{children:m})}):!o||!o.data?null:o.data.length===0?e.jsxs("div",{className:"centered-message",children:[e.jsx("span",{children:"No doctors found for this hospital."})," ",e.jsx("span",{onClick:()=>{d({}),j(!0)},style:{fontWeight:"bold",color:"blue",cursor:"pointer"},children:"+ Add Doctor"})]}):e.jsx("div",{className:"row",children:Me.length>0?Me.map((a,t)=>e.jsx(ya,{doctor:a},t)):e.jsx("div",{className:"text-center w-100 py-5",children:e.jsx("p",{children:"No doctors match your search."})})}),e.jsxs(ga,{visible:u,onClose:()=>j(!1),size:"lg",backdrop:"static",children:[e.jsx(fa,{children:e.jsx("strong",{children:"Add Doctor"})}),e.jsxs(va,{children:[e.jsxs($,{className:"g-4 mb-4",children:[e.jsxs(h,{md:6,children:[e.jsxs("h6",{children:["Category Name ",e.jsx("span",{className:"text-danger",children:"*"})]}),e.jsx(Z,{isMulti:!0,name:"categoryId",value:le.filter(a=>{var t;return(t=T.categoryId)==null?void 0:t.includes(a.value)}),onChange:a=>{Je({target:{name:"categoryId",value:a.map(t=>t.value)}}),a.length>0&&d(t=>({...t,categoryId:""}))},options:le,placeholder:"Select Category"}),n.categoryId&&e.jsx("div",{className:"text-danger mt-1",children:n.categoryId})]}),e.jsxs(h,{md:6,children:[e.jsxs("h6",{children:["Service Name ",e.jsx("span",{className:"text-danger",children:"*"})]}),e.jsx(Z,{isMulti:!0,name:"serviceId",value:ye.filter(a=>A.some(t=>t.serviceId===a.value)),onChange:a=>{const t=He.filter(s=>a.some(r=>r.value===s.serviceId));ve(t),Qe(t.map(s=>s.serviceId)),t.length>0&&d(s=>({...s,serviceId:""}))},options:ye,placeholder:"Select Services"}),n.serviceId&&e.jsx("div",{className:"text-danger mt-1",children:n.serviceId})]}),e.jsxs(h,{md:12,children:[e.jsxs("h6",{children:["Procedure Name ",e.jsx("span",{className:"text-danger",children:"*"})]}),e.jsx(Z,{isMulti:!0,name:"subServiceName",placeholder:"Select Sub Services",options:(W||[]).map(a=>({label:a.subServiceName,value:a.subServiceId})),value:(W||[]).filter(a=>Q.includes(a.subServiceId)).map(a=>({label:a.subServiceName,value:a.subServiceId})),onChange:a=>{be(a.map(s=>s.value));const t=a.map(s=>s.value);be(t),a.length>0&&d(s=>({...s,subServiceName:""})),Xe(t)}}),!Ge&&e.jsxs("div",{className:"text-danger mt-2",children:["Some selected Procedures are missing details like price or final cost.",e.jsx("br",{}),e.jsx("a",{href:"/procedure-Management",className:"text-primary",children:"Please add Procedure details"})]}),n.subServiceName&&e.jsx("div",{className:"text-danger mt-1",children:n.subServiceName})]})]}),e.jsx("hr",{}),e.jsx("h5",{className:"mb-3",children:"Doctor Details"}),e.jsxs($,{className:"g-4 mb-4",children:[e.jsxs(h,{md:6,children:[e.jsxs(f,{children:["Doctor Name",e.jsx("span",{className:"text-danger",children:"*"})]}),e.jsx("div",{className:"input-group",children:e.jsx(I,{value:i.doctorName,onChange:a=>{let t=a.target.value;t=t.replace(/[0-9]/g,"");const s=t.startsWith("Dr.")?t:`Dr. ${t}`;p(r=>({...r,doctorName:s})),s.length>3&&d(r=>({...r,doctorName:""}))},invalid:!!n.doctorName})}),n.doctorName&&e.jsx("div",{className:"text-danger mt-1",children:n.doctorName})]})," ",e.jsxs(h,{md:6,children:[e.jsxs(f,{children:["License Number",e.jsx("span",{className:"text-danger",children:"*"})]}),e.jsx(I,{value:i.doctorLicence,onChange:a=>{var s;const t=a.target.value;if(p(r=>({...r,doctorLicence:t})),t.trim()){const r=(s=o==null?void 0:o.data)==null?void 0:s.some(l=>l.doctorLicence===t.trim());d(r?l=>({...l,doctorLicence:"This License Number already exists"}):l=>{const C={...l};return delete C.doctorLicence,C})}},invalid:!!(n!=null&&n.doctorLicence)}),(n==null?void 0:n.doctorLicence)&&e.jsx("small",{className:"text-danger",children:n.doctorLicence})]}),e.jsxs(h,{md:6,children:[e.jsx(f,{children:"Gender"}),e.jsxs(R,{value:i.gender,onChange:a=>p(t=>({...t,gender:a.target.value})),children:[e.jsx("option",{value:"",children:"Select Gender"})," ",e.jsx("option",{children:"Female"}),e.jsx("option",{children:"Male"}),e.jsx("option",{children:"Other"})]})]}),e.jsxs(h,{md:6,children:[e.jsxs(f,{children:["Experience (years)",e.jsx("span",{className:"text-danger",children:"*"})]}),e.jsx(I,{type:"number",value:i.experience,onChange:a=>{const t=a.target.value;p(s=>({...s,experience:t})),!isNaN(t)&&Number(t)>=0&&d(s=>({...s,experience:""}))},invalid:!!n.experience}),n.experience&&e.jsx("div",{className:"text-danger mt-1",children:n.experience})]}),e.jsxs(h,{md:6,children:[e.jsxs(f,{children:["Qualification",e.jsx("span",{className:"text-danger",children:"*"})]}),e.jsx(I,{value:i.qualification,onChange:a=>{const t=a.target.value.replace(/[0-9]/g,"");p(s=>({...s,qualification:t})),d(s=>({...s,qualification:t.trim()?"":"Qualification is required"}))},invalid:!!n.qualification}),n.qualification&&e.jsx("div",{className:"text-danger mt-1",children:n.qualification})]}),e.jsxs(h,{md:6,children:[e.jsxs(f,{children:["Specialization",e.jsx("span",{className:"text-danger",children:"*"})]}),e.jsx(I,{value:i.specialization,onChange:a=>{const t=a.target.value.replace(/[0-9]/g,"");p(s=>({...s,specialization:t})),d(s=>({...s,specialization:t.trim()?"":"Specialization is required"}))},invalid:!!n.specialization}),n.specialization&&e.jsx("div",{className:"text-danger mt-1",children:n.specialization})]}),e.jsxs(h,{md:6,children:[e.jsxs(f,{children:["Profile Description",e.jsx("span",{className:"text-danger",children:"*"})]}),e.jsx(ba,{value:i.profileDescription,onChange:a=>{const t=a.target.value.replace(/[0-9]/g,"");p(s=>({...s,profileDescription:t})),d(s=>({...s,profileDescription:t.trim()?"":"Profile description is required"}))},invalid:!!n.profileDescription,rows:4}),n.profileDescription&&e.jsx("div",{className:"text-danger mt-1",children:n.profileDescription})]}),e.jsxs(h,{md:6,children:[e.jsxs(f,{children:["Profile Picture",e.jsx("span",{className:"text-danger",children:"*"})]}),e.jsx(I,{type:"file",accept:"image/jpeg, image/png",onChange:a=>{const t=a.target.files[0];if(t){if(!["image/jpeg","image/png"].includes(t.type)){d(l=>({...l,doctorPicture:"Only JPG and PNG images are allowed"}));return}const r=new FileReader;r.onloadend=()=>{p(l=>({...l,doctorPicture:r.result})),d(l=>({...l,doctorPicture:""}))},r.readAsDataURL(t)}else d(s=>({...s,doctorPicture:"Profile picture is required"}))},invalid:!!n.doctorPicture}),n.doctorPicture&&e.jsx("div",{className:"text-danger mt-1",children:n.doctorPicture})]})]}),e.jsx("hr",{}),e.jsx("h5",{className:"mb-3",children:"Working Schedule"}),e.jsxs($,{className:"g-4 mb-4",children:[e.jsxs(h,{md:6,children:[e.jsxs(f,{children:["Start Day",e.jsx("span",{className:"text-danger",children:"*"})]}),e.jsxs(R,{value:H,onChange:a=>{ee(a.target.value),Ne(a.target.value,"start"),d(t=>({...t,availableDays:""}))},children:[e.jsx("option",{value:"",children:"Select"}),we.map(a=>e.jsx("option",{value:a,children:a},a))]})]}),e.jsxs(h,{md:6,children:[e.jsxs(f,{children:["End Day",e.jsx("span",{className:"text-danger",children:"*"})]}),e.jsxs(R,{value:V,onChange:a=>{ae(a.target.value),Ne(a.target.value,"end"),d(t=>({...t,availableDays:""}))},children:[e.jsx("option",{value:"",children:"Select"}),we.map(a=>e.jsx("option",{value:a,children:a},a))]}),n.availableDays&&e.jsx("div",{className:"text-danger",children:n.availableDays})]}),e.jsxs(h,{md:6,children:[e.jsxs(f,{children:["Start Time",e.jsx("span",{className:"text-danger",children:"*"})]}),e.jsxs(R,{value:B,onChange:a=>{te(a.target.value),Ce(a.target.value,"start"),d(t=>({...t,availableTimes:""}))},children:[e.jsx("option",{value:"",children:"Select"}),Fe.map(a=>e.jsx("option",{value:a,children:a},a))]})]}),e.jsxs(h,{md:6,children:[e.jsxs(f,{children:["End Time",e.jsx("span",{className:"text-danger",children:"*"})]}),e.jsxs(R,{value:G,onChange:a=>{se(a.target.value),Ce(a.target.value,"end"),d(t=>({...t,availableTimes:""}))},children:[e.jsx("option",{value:"",children:"Select"}),Fe.map(a=>e.jsx("option",{value:a,children:a},a))]})]}),n.availableTimes&&e.jsx("div",{className:"text-danger",children:n.availableTimes})]}),e.jsx("hr",{}),e.jsxs($,{className:"g-4 mb-4",children:[e.jsx(h,{xs:12,children:e.jsx("h5",{className:"mb-3",children:"Consultations & Contact"})}),e.jsx(h,{xs:12,children:e.jsxs("div",{className:"d-flex align-items-center flex-wrap gap-4",children:[e.jsx("strong",{children:"Consultation Type:"}),e.jsx(ge,{type:"checkbox",label:"Services & Treatments",checked:k.serviceTreatment,onChange:()=>X("serviceTreatment")}),e.jsx(ge,{type:"checkbox",label:"In-Clinic Consultation",checked:k.inClinic,onChange:()=>X("inClinic")}),e.jsx(ge,{type:"checkbox",label:"Online Consultation",checked:k.online,onChange:()=>X("online")})]})}),e.jsx(h,{xs:12,children:e.jsxs("div",{className:"d-flex gap-4 flex-wrap",children:[e.jsxs("div",{style:{flex:1},children:[e.jsxs(f,{children:["In-Clinic Consultation Fee",e.jsx("span",{className:"text-danger",children:"*"})]}),e.jsx(I,{type:"number",placeholder:"In-Clinic Consultation Fee",disabled:!k.inClinic,value:i.doctorFees.inClinicFee,onChange:a=>{const t=a.target.value;p(s=>({...s,doctorFees:{...s.doctorFees,inClinicFee:t}})),t&&!isNaN(t)&&Number(t)>0&&d(s=>({...s,inClinicFee:""}))}}),n.inClinicFee&&e.jsx("div",{className:"text-danger",children:n.inClinicFee})]}),e.jsxs("div",{style:{flex:1},children:[e.jsxs(f,{children:["Online Consultation Fee",e.jsx("span",{className:"text-danger",children:"*"})]}),e.jsx(I,{type:"number",placeholder:"Online Consultation Fee",disabled:!k.online,value:i.doctorFees.vedioConsultationFee,onChange:a=>{const t=a.target.value;p(s=>({...s,doctorFees:{...s.doctorFees,vedioConsultationFee:t}})),t&&!isNaN(t)&&Number(t)>0&&d(s=>({...s,vedioConsultationFee:""}))}}),n.vedioConsultationFee&&e.jsx("div",{className:"text-danger",children:n.vedioConsultationFee})]})]})}),e.jsxs(h,{md:6,children:[e.jsxs(f,{children:["Contact Number",e.jsx("span",{className:"text-danger",children:"*"})]}),e.jsx(I,{type:"tel",maxLength:10,value:i.doctorMobileNumber,onChange:a=>{const t=a.target.value;/^\d{0,10}$/.test(t)&&(p(s=>({...s,doctorMobileNumber:t})),/^\d{10}$/.test(t)&&d(s=>({...s,doctorMobileNumber:""})))},placeholder:"Enter 10-digit number"}),n.doctorMobileNumber&&e.jsx("div",{className:"text-danger",children:n.doctorMobileNumber})]}),e.jsxs(h,{md:6,children:[e.jsxs(f,{children:["Email Address",e.jsx("span",{className:"text-danger",children:"*"})]}),e.jsx(I,{type:"email",value:i.doctorEmail,onChange:a=>{const t=a.target.value;p(r=>({...r,doctorEmail:t})),/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(t)?d(r=>({...r,doctorEmail:""})):d(r=>({...r,doctorEmail:"Enter a valid email address"}))},placeholder:"Enter doctor email",invalid:!!n.doctorEmail}),n.doctorEmail&&e.jsx("div",{className:"text-danger",children:n.doctorEmail})]})]}),e.jsx("hr",{}),e.jsx("h5",{className:"mb-3",children:"Additional Details"}),e.jsxs($,{children:[e.jsxs(h,{md:6,children:[e.jsx(f,{children:"Association/Membership"}),e.jsx(I,{value:i.associationsOrMemberships,onChange:a=>{const t=a.target.value.replace(/[0-9]/g,"");p(s=>({...s,associationsOrMemberships:t}))}})]}),e.jsxs(h,{md:6,children:[e.jsx(f,{children:"Branch"}),e.jsx(Z,{isMulti:!0,options:Ie,value:Ie.filter(a=>Array.isArray(i.branch)&&i.branch.some(t=>t.branchId===a.value)),onChange:a=>p(t=>({...t,branch:a.map(s=>({branchId:s.value,branchName:s.label}))})),placeholder:"Select branches..."})]})]}),e.jsx(ce,{label:"Area of Expertise",items:i.focusAreas,onAdd:a=>p(t=>({...t,focusAreas:a}))}),e.jsx("div",{className:"mb-3",children:e.jsx(ce,{label:"Languages known",items:i.languages,onAdd:a=>{p(t=>({...t,languages:a})),a.length>0&&d(t=>({...t,languages:""}))}})}),e.jsx(ce,{label:"Achievements / Awards",items:i.highlights,onAdd:a=>p(t=>({...t,highlights:a}))}),e.jsxs(h,{md:6,className:"d-flex align-items-center",style:{gap:"20px"},children:[e.jsxs("div",{style:{flex:1},children:[e.jsxs(f,{htmlFor:"doctorSignature",children:["Doctor Signature(to add in the E-Prescription)",e.jsx("span",{className:"text-danger",children:"*"})]}),e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"10px",border:"1px solid #ccc",borderRadius:"4px",padding:"4px",backgroundColor:"#f8f9fa"},children:[e.jsx(he,{color:"secondary",onClick:()=>document.getElementById("file-input-doctor-signature").click(),children:"Choose File"}),e.jsx("span",{style:{overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},children:i.doctorSignatureFileName||"No file selected"})]}),e.jsx(I,{id:"file-input-doctor-signature",type:"file",accept:"image/jpeg, image/png",style:{display:"none"},onChange:a=>{const t=a.target.files[0];if(t){if(!["image/jpeg","image/png"].includes(t.type)){d(l=>({...l,doctorSignature:"Only JPG and PNG images are allowed"}));return}const r=new FileReader;r.onloadend=()=>{p(l=>({...l,doctorSignature:r.result,doctorPictureFileName:t.name})),d(l=>({...l,doctorSignature:""}))},r.readAsDataURL(t)}else p(s=>({...s,doctorSignature:null,doctorSignatureFileName:null})),d(s=>({...s,doctorSignature:"Profile picture is required"}))},invalid:!!n.doctorSignature}),n.doctorSignature&&e.jsx("div",{className:"text-danger p-2",children:n.doctorSignature})]}),e.jsx("div",{style:{minWidth:"150px"},children:i.doctorSignature?e.jsx("img",{src:i.doctorSignature,alt:"Doctor Signature Preview",style:{width:"150px",height:"auto",border:"1px solid #ccc",borderRadius:"4px",objectFit:"contain"}}):e.jsx("div",{style:{width:"150px",height:"80px",border:"1px dashed #ccc",borderRadius:"4px",display:"flex",justifyContent:"center",alignItems:"center",color:"#999",fontSize:"14px"},children:"No Image"})})]})]}),e.jsxs(ja,{children:[e.jsx(he,{color:"secondary",onClick:()=>j(!1),children:"Cancel"}),e.jsx(he,{color:"info",className:"text-white",onClick:Ye,children:"Submit"})]})]}),e.jsx("style",{children:`
        .add-doctor-wrapper {
          position: fixed;
  bottom: 20px;
  right: 20px;
  z-index: 1000;
        }

        .add-doctor-btn {
          display: flex;
          align-items: center;
          background-color: #fff;
          border: 1px solid #00aaff;
          border-radius: 8px;
          padding: 8px 16px;
          color: #00aaff;
          font-weight: 600;
          font-size: 16px;
          cursor: pointer;
          transition: background-color 0.3s ease;
        }

        .add-doctor-btn:hover {
          background-color: #e0f7ff;
        }

        .add-icon-circle {
          width: 40px;
          height: 40px;
          min-width: 40px;
          min-height: 40px;
          background-color: #e6f7ff;
          border-radius: 50%;
          display: flex;
          align-items: center;
          justify-content: center;
          margin-right: 10px;
          border: 1px solid #00aaff;
        }

        .add-doctor-text {
          color: #00aaff;
        }
          .badge {
  background-color: #e2e3e5;
  color: #000;
}
  .centered-message {
  display: flex;
  justify-content: center;
  align-items: center;
  min-height: 60vh; // Adjust based on your layout
  text-align: center;
  font-size: 1.2rem;
  color:"blue"
}
.label-required::after {
    content:"*";
    color: red;
   
  }

      `})]})};export{ot as default};
