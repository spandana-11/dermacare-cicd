import{j as e,r as i,a as os,R as ls,Q as ds,y as ms,z as us,E as Fe,h as Te,F as we,H as De,I as hs,B as R,J as gs,K as xs}from"./index-CE8wgZIf.js";import"./index.es-BdGNHBXH.js";import{b as k}from"./index.esm-D3SzBvqQ.js";import{b as ps,c as Me,d as ke}from"./index-DYZaLNq4.js";import{C as js,a as me,b as ue,c as he}from"./CAccordionItem-BmfNJSYS.js";import{a,C as p}from"./CRow-CgNpeY14.js";import{C as P,b as F}from"./CFormInput-Po4QMieX.js";import{C as vs}from"./CInputGroup-BXuFQRsy.js";import{C as ys,a as Ns}from"./CListGroupItem-CECD5_Fm.js";import{C as fs}from"./ConfirmationModal-CS0aBXT7.js";import{c as ge}from"./capitalizeWords-CuwF8AcI.js";import{L as bs}from"./loader-CsxI0wUU.js";import{C as Ee}from"./CForm-C9vHVwto.js";import{C as Ve,a as Re,b as $e}from"./CModalHeader-bTJJxI9I.js";import{C as Ge}from"./CModalTitle-B0ZxrCNp.js";import{C as Le}from"./CModalFooter-26nQh_i4.js";import{C as $}from"./CFormSelect-CaEax12Y.js";import{C as Ss}from"./CFormLabel-1p4Lfu_H.js";import{C as As,a as Ps,b as xe,c as G,d as Is,e as M}from"./CTable-D7EOl3_R.js";import{E as Cs}from"./eye-vIkjkHwb.js";import{P as Qs,T as Fs}from"./trash-2-B9Iv_Lgk.js";import"./CNavItem-D_DanzKb.js";const pe=({title:y,qaList:h=[],setQAList:N})=>{const[I,f]=i.useState(""),[T,E]=i.useState(""),[b,w]=i.useState([]),[J,Oe]=i.useState("add"),[L,O]=i.useState(null),D=()=>{T.trim()!==""&&(w([...b,T]),E(""))},c=d=>{w(b.filter(m=>m!==d))},B=()=>{if(I.trim()&&b.length>0){const d=h.findIndex(m=>Object.keys(m)[0]===I);if(L!==null){const m=[...h];m[L]={[I]:b},N(m),O(null)}else if(d!==-1){const m=[...h];m[d]={[I]:b},N(m)}else N([...h,{[I]:b}]);f(""),w([])}},K=d=>{const m=h[d],C=Object.keys(m)[0],W=m[C];f(C),w(W),O(d)},te=d=>{const m=[...h];m.splice(d,1),N(m),L===d&&(f(""),w([]),O(null))};return i.useEffect(()=>{if(h.length>0){const d=h[h.length-1],m=Object.keys(d)[0],C=d[m];f(m),w(C)}},[h]),i.useEffect(()=>{if((J==="edit"||J==="view")&&h.length>0){const d=h[h.length-1],m=Object.keys(d)[0],C=d[m];f(m),w(C)}},[h,J]),e.jsxs(a,{md:12,className:"mt-3",children:[e.jsx("label",{className:"mb-2",children:"Instruction"}),e.jsx(P,{placeholder:"Enter your question",value:I,onChange:d=>f(d.target.value)}),e.jsx("label",{className:"mt-3",children:"Guidelines"}),e.jsxs(vs,{className:"mb-2",children:[e.jsx(P,{placeholder:"Enter answer",value:T,onChange:d=>E(d.target.value)}),e.jsx(k,{color:"success",onClick:D,className:"text-white",children:e.jsx(ps,{})})]}),b.length>0&&e.jsx(ys,{className:"mb-3",children:b.map((d,m)=>e.jsxs(Ns,{className:"d-flex justify-content-between align-items-center",children:[d,e.jsxs("div",{className:"d-flex gap-2",children:[e.jsx(Me,{onClick:()=>{E(d),c(d)},style:{color:"orange",cursor:"pointer"},title:"Edit Answer"}),e.jsx(ke,{onClick:()=>c(d),style:{color:"red",cursor:"pointer"},title:"Delete Answer"})]})]},m))}),e.jsx(k,{color:"info",className:"mb-3 text-white",onClick:B,children:L!==null?"Update Q&A":"Save Q&A"}),h.length>0&&e.jsxs(e.Fragment,{children:[e.jsx("h6",{className:"mt-4",children:"Saved Questions & Answers"}),h.map((d,m)=>{const C=Object.keys(d)[0],W=d[C];return e.jsxs("div",{className:"mb-3",children:[e.jsx("strong",{children:C}),e.jsx("ul",{children:W.map((je,ne)=>e.jsx("li",{children:je},ne))}),e.jsxs("div",{className:"d-flex gap-2",children:[e.jsx(Me,{onClick:()=>K(m),style:{color:"orange",cursor:"pointer"},title:"Edit Q&A"}),e.jsx(ke,{onClick:()=>te(m),style:{color:"red",cursor:"pointer"},title:"Delete Q&A"})]})]},m)})]})]})},Ts=({preQAList:y,setPreQAList:h,procedureQAList:N,setProcedureQAList:I,postQAList:f,setPostQAList:T})=>e.jsxs(js,{default:!0,children:[e.jsxs(me,{itemKey:1,children:[e.jsx(ue,{children:"Pre-Procedure"}),e.jsx(he,{children:e.jsx(pe,{title:"Pre-Procedure",qaList:y,setQAList:h})})]}),e.jsxs(me,{itemKey:2,children:[e.jsx(ue,{children:"Procedure"}),e.jsx(he,{children:e.jsx(pe,{title:"Procedure",qaList:N,setQAList:I})})]}),e.jsxs(me,{itemKey:3,children:[e.jsx(ue,{children:"Post-Procedure"}),e.jsx(he,{children:e.jsx(pe,{title:"Post-Procedure",qaList:f,setQAList:T})})]})]}),xr=()=>{const[y,h]=i.useState([]),[N,I]=i.useState([]),[f,T]=i.useState(!1),[E,b]=i.useState(null),[w,J]=i.useState(""),[Oe,L]=i.useState([]),[O,D]=i.useState(!1),[c,B]=i.useState(null),[K,te]=i.useState(!1),[d,m]=i.useState(""),[C,W]=i.useState(""),[je,ne]=i.useState([]),[ws,ae]=i.useState([]),[ve,ie]=i.useState([]),[U,ye]=i.useState([]),[Be,ce]=i.useState(""),[Ue,He]=i.useState(""),[Ne,Ds]=i.useState(null),{searchQuery:fe,setSearchQuery:Ms}=os(),[H,qe]=i.useState(1),[_,ks]=i.useState(10),[Y,ze]=i.useState({serviceImage:"",viewImage:"",subServiceName:"",serviceName:"",serviceImageFile:null}),[Es,Vs]=i.useState([]),[Rs,$s]=i.useState([]),[Gs,Ls]=i.useState([]),Je={1:"Generic ConsentForm",2:"Procedure ConsentForm"};let be=[];try{typeof y.descriptionQA=="string"?be=JSON.parse(y.descriptionQA):be=y.descriptionQA||[]}catch(s){console.error("Invalid descriptionQA format:",s)}const[r,g]=i.useState({categoryName:"",categoryId:"",serviceName:"",subServiceName:"",description:"",price:"",gst:0,gstAmount:0,consultationFee:0,procedureQA:[],preProcedureQA:[],postProcedureQA:[]}),[q,Se]=i.useState("add"),[Os,Bs]=i.useState(null),[Us,Hs]=i.useState(""),oe=ls.useMemo(()=>{const s=fe.toLowerCase().trim();return s?y.filter(t=>Object.values(t).some(n=>String(n).toLowerCase().includes(s))):y},[fe,y]),Ke=()=>{Se("add"),ae([]),ne([]),m(""),ce(""),g({categoryName:"",categoryId:"",serviceName:"",serviceId:"",subServiceId:"",subServiceName:"",price:"",discount:0,gst:0,gstAmount:0,consultationFee:0,minTime:"",taxPercentage:0,status:"",serviceImage:"",serviceImageFile:null,viewImage:"",viewDescription:"",consentFormType:Fe.consentFormType==="Generic ConsentForm"?"1":"2",platformFeePercentage:0,descriptionQA:[]}),D(!0)},We=async s=>{var Qe;console.log(s.subServiceId),He(s.subServiceId),Se("edit"),D(!0);const t=N.find(A=>A.categoryName===s.categoryName),n=(t==null?void 0:t.categoryId)||"";let o=[];try{o=((Qe=(await Te.get(`/${we}/${n}`)).data)==null?void 0:Qe.data)||[],console.log(o),ie(o)}catch(A){console.error("Error fetching service list:",A)}const l=o.find(A=>A.serviceName===s.serviceName),u=(l==null?void 0:l.serviceId)||"";let j=[];if(u)try{const V=(await De(u)).data;Array.isArray(V)?j=V.flatMap(cs=>cs.subServices||[]):V!=null&&V.subServices&&(j=V.subServices)}catch(A){console.error("Error fetching subservices:",A)}ye({subServices:j});const v=j.find(A=>A.subServiceName===s.subServiceName),Q=(v==null?void 0:v.subServiceId)||"",z=(v==null?void 0:v.subServiceName)||"";ce(Q);const ee=Array.isArray(s.procedureQA)?s.procedureQA:JSON.parse(s.procedureQA||"[]"),se=Array.isArray(s.preProcedureQA)?s.preProcedureQA:JSON.parse(s.preProcedureQA||"[]"),re=Array.isArray(s.postProcedureQA)?s.postProcedureQA:JSON.parse(s.postProcedureQA||"[]"),S=s.serviceImage||"";S.startsWith("data:")||`${S}`,g({subServiceId:Q,subServiceName:z,serviceName:s.serviceName||"",serviceId:u,categoryName:s.categoryName||"",categoryId:n||"",price:s.price||"",discount:s.discountPercentage||0,gst:s.gst||0,gstAmount:s.gstAmount||0,consultationFee:s.consultationFee||0,taxPercentage:s.taxPercentage||0,minTime:s.minTime||"",serviceImage:S,serviceImageFile:null,status:s.status||"",viewDescription:s.viewDescription||"",consentFormType:s.consentFormType?String(s.consentFormType):"",platformFeePercentage:s.platformFeePercentage||0,viewImage:s.viewImage||"",procedureQA:ee,preProcedureQA:se,postProcedureQA:re}),ae(formattedQA)},[_e,le]=i.useState(!1),[Ae,Ye]=i.useState(null),[x,de]=i.useState({subServiceName:"",serviceName:"",serviceId:"",categoryName:"",price:"",status:"",taxPercentage:"",descriptionQA:"",answers:"",minTime:"",discount:"",viewDescription:"",consentFormType:"",serviceImage:"",bannerImage:""}),[qs,zs]=i.useState({}),X=async()=>{T(!0),b(null);try{const s=await ms();if(s.data&&Array.isArray(s.data)){const n=s.data.map(o=>({categoryId:o.categoryId,categoryName:o.categoryName}));I(s.data)}else throw new Error("Invalid category data format");const t=localStorage.getItem("HospitalId");if(t){const n=await us(t);Array.isArray(n)?(h(n),console.log(n)):(h([]),console.warn("No subservices found for this hospital."))}else console.warn("No hospitalId found in localStorage."),h([])}catch(s){console.error("Error fetching data:",s),b("Failed to fetch data. Please try again later.")}finally{T(!1)}};i.useEffect(()=>{X()},[]),i.useEffect(()=>{if(K&&(Y!=null&&Y.descriptionQA)&&typeof Y.descriptionQA=="string")try{ze(s=>({...s,descriptionQA:JSON.parse(s.descriptionQA)}))}catch{console.error("Invalid QA format")}},[K]);const Xe=parseFloat(r.minTime),Ze=()=>{const s={};return r.serviceName||(s.serviceName="Service name is required."),r.categoryName||(s.categoryName="Category is required."),r.price?isNaN(r.price)?s.price="price must be a valid number.":parseFloat(r.price)<0&&(s.price="price cannot be a negative number."):s.price="price is required.",r.status||(s.status="Status is required."),(r.gst===""||isNaN(r.gst)||parseFloat(r.gst)<0)&&(s.gst="GST must be a valid number and not negative."),(r.consultationFee===""||isNaN(r.consultationFee)||parseFloat(r.consultationFee)<0)&&(s.consultationFee="Consultation fee must be a valid number and not negative."),!r.discount&&r.discount!==0?s.discount="Discount is required.":parseFloat(r.discount)<0&&(s.discount="Discount cannot be a negative number."),!r.minTimeValue||isNaN(r.minTimeValue)?s.minTime="Minimum time is required":parseFloat(r.minTimeValue)<=0&&(s.minTime="Minimum time must be greater than zero."),r.viewDescription||(s.viewDescription="View description is Required."),r.consentFormType||(s.consentFormType="consentFormType is Required."),r.serviceImage||(console.log("Service Image in Form:",r.serviceImage),s.serviceImage="Please upload a service image."),r.categoryId||(s.categoryId="Please select a valid category."),de(s),Object.keys(s).length===0},Pe=oe.slice((H-1)*_,H*_),es=async()=>{var se,re;console.log("--- handleAddService START ---");const s=r.price*r.discount/100;r.price*r.gst/100;const t=r.price-s,n=t*r.taxPercentage/100,o=r.gst||0,l=t*(r.platformFeePercentage||0)/100,u=t+n-l,j=u+o+(r.consultationFee||0),v=`${r.minTimeValue} ${r.minTimeUnit}`;console.log("Calculated values:",{discountAmount:s,discountedCost:t,taxAmount:n,platformFee:l,clinicPay:u,finalCost:j});const Q=await Ie(r.serviceImageFile),z=(Q==null?void 0:Q.split(",")[1])||"";if(!Ze()){R.error("Validation failed",{position:"top-right"});return}const ee={hospitalId:localStorage.getItem("HospitalId"),subServiceName:r.subServiceName,subServiceId:r.subServiceId,serviceId:r.serviceId,serviceName:r.serviceName,categoryName:r.categoryName,categoryId:r.categoryId,price:r.price,discountPercentage:r.discount,discountAmount:s,discountedCost:t,taxPercentage:r.taxPercentage,taxAmount:n,platformFeePercentage:r.platformFeePercentage,platformFee:l,clinicPay:u,finalCost:j,gst:r.gst,gstAmount:r.gstAmount,consultationFee:r.consultationFee,minTime:v,status:r.status,subServiceImage:z,procedureQA:r.procedureQA,preProcedureQA:r.preProcedureQA,postProcedureQA:r.postProcedureQA,viewDescription:r.viewDescription,consentFormType:Number(r.consentFormType)};console.log("Payload ready to submit:",ee);try{const S=await gs(ee,r.subServiceId);console.log("Response received:",S),S.status===201&&(R.success(S.data.message,{position:"top-right"}),D(!1),X(),Fe())}catch(S){console.error("Error in handleAddService:",S.response),R.error((re=(se=S.response)==null?void 0:se.data)==null?void 0:re.message,{position:"top-right"})}g({categoryName:"",categoryId:"",serviceName:"",serviceId:"",subServiceId:"",subServiceName:"",price:0,discount:0,gst:0,gstAmount:0,consultationFee:0,taxPercentage:0,minTimeValue:Xe,minTimeUnit:"",status:"",serviceImage:"",viewDescription:"",consentFormType:"",procedureQA:[],preProcedureQA:[],postProcedureQA:[],platformFeePercentage:0,descriptionQA:[]}),ae([]),console.log("--- handleAddService END ---")},ss=s=>{const t=parseInt(s,10);if(isNaN(t))return"Invalid time";if(t<60)return`${t} min`;const n=Math.floor(t/60),o=t%60;return o===0?`${n} hour${n>1?"s":""}`:`${n} hour${n>1?"s":""} ${o} min`},rs=async()=>{var s;try{const t=localStorage.getItem("HospitalId");let n="";r.serviceImageFile?n=(await Ie(r.serviceImageFile)).split(",")[1]:(s=r.serviceImage)!=null&&s.startsWith("data:")?n=r.serviceImage.split(",")[1]:n=r.serviceImage||"";const o=r.price>0?Number(r.price):0,l={hospitalId:t,subServiceName:r.subServiceName||"",viewDescription:r.viewDescription||"",consentFormType:Number(r.consentFormType),status:r.status||"",minTime:r.minTimeValue?`${r.minTimeValue} ${r.minTimeUnit}`:"",procedureQA:Array.isArray(r.procedureQA)?r.procedureQA:[],preProcedureQA:Array.isArray(r.preProcedureQA)?r.preProcedureQA:[],postProcedureQA:Array.isArray(r.postProcedureQA)?r.postProcedureQA:[],price:r.price||0,discountPercentage:r.discount||0,taxPercentage:r.taxPercentage||0,platformFeePercentage:r.platformFeePercentage||0,subServiceImage:n,gst:r.gst||0,gstAmount:r.gstAmount||0,consultationFee:r.consultationFee||0};console.log("Payload for updateSubServiceData:",l);const u=await hs(Ue,t,l);R.success("Procedure updated successfully!",{position:"top-right"}),te(!1),D(!1),X()}catch(t){console.error("Update failed:",t),R.error("Error updating service.",{position:"top-right"})}},Ie=s=>new Promise((t,n)=>{const o=new FileReader;o.readAsDataURL(s),o.onload=()=>t(o.result),o.onerror=l=>n(l)}),ts=async s=>{console.log(s),Ye(s.subServiceId),le(!0)},ns=async()=>{console.log(Ae);const s=localStorage.getItem("HospitalId");try{const t=await xs(Ae,s);console.log("Service deleted:",t),R.success("Procedure deleted successfully!",{position:"top-right"}),X()}catch(t){console.error("Error deleting Procedure:",t)}le(!1)},as=()=>{le(!1),console.log("Service deletion canceled")},Z=s=>{const{name:t,value:n}=s.target;g(o=>{if(t==="categoryName"){const l=N.find(u=>u.categoryName===n);return{...o,[t]:n,categoryId:l?l.categoryId:""}}return t==="gst"||t==="gstAmount"||t==="consultationFee"||t==="price"||t==="discount"||t==="taxPercentage"||t==="minTime"?{...o,[t]:parseFloat(n)||0}:{...o,[t]:n}}),de(o=>({...o,[t]:""}))},is=()=>{g({serviceName:"",categoryName:"",price:"",discount:0,taxPercentage:0,minTime:"",minTimeValue:"",minTimeUnit:"minutes",status:"",serviceImage:"",viewImage:"",viewDescription:"",consentFormType:"",categoryId:""}),D(!1),de({})},Ce=async s=>{var o;const{name:t,value:n}=s.target;if(t==="categoryName"){const l=N.find(u=>u.categoryId===n);g(u=>({...u,categoryName:(l==null?void 0:l.categoryName)||"",categoryId:n,serviceName:"",serviceId:""}));try{const j=((o=(await Te.get(`/${we}/${n}`)).data)==null?void 0:o.data)||[];ie(j)}catch(u){console.error("Failed to fetch services:",u),ie([])}}else if(t==="serviceName"){const l=ve.find(j=>j.serviceName===n),u=(l==null?void 0:l.serviceId)||"";if(g(j=>({...j,serviceName:n,serviceId:u})),u){const v=(await De(u)).data;let Q=[];Array.isArray(v)?Q=v.flatMap(z=>z.subServices||[]):v&&v.subServices&&(Q=v.subServices),ye({subServices:Q})}}else g(l=>({...l,[t]:n}))};return e.jsxs("div",{style:{overflow:"hidden"},children:[e.jsx(ds,{}),e.jsx("div",{children:e.jsx(Ee,{className:"d-flex justify-content-end mb-3",children:e.jsx("div",{className:" w-100",style:{display:"flex",justifyContent:"end",alignContent:"end",alignItems:"end"},children:e.jsx(k,{style:{color:"var(--color-black)",backgroundColor:"var(--color-bgcolor)"},onClick:()=>Ke(),children:"Add Procedure Details"})})})}),c&&e.jsxs(Ve,{visible:!!c,onClose:()=>B(null),size:"xl",children:[e.jsx(Re,{style:{color:"var(--color-black)"},children:e.jsx(Ge,{className:"w-100 text-center  fs-4",children:"Procedure Details"})}),e.jsxs($e,{style:{color:"var(--color-black)"},children:[e.jsxs(p,{className:"mb-3",children:[e.jsxs(a,{sm:6,children:[e.jsx("strong",{children:"Procedure Name:"}),e.jsx("div",{children:c.subServiceName})]}),e.jsxs(a,{sm:6,children:[e.jsx("strong",{children:"Procedure ID:"}),e.jsx("div",{children:c.subServiceId})]})]}),e.jsxs(p,{className:"mb-3",children:[e.jsxs(a,{sm:6,children:[e.jsx("strong",{children:"Service Name:"}),e.jsx("div",{children:c.serviceName})]}),e.jsxs(a,{sm:6,children:[e.jsx("strong",{children:"Service Id:"}),e.jsx("div",{children:c.serviceId})]})]}),e.jsxs(p,{className:"mb-3",children:[e.jsxs(a,{sm:6,children:[e.jsx("strong",{children:"Category Name:"}),e.jsx("div",{children:c.categoryName})]}),e.jsxs(a,{sm:6,children:[e.jsx("strong",{children:"Category Id:"}),e.jsx("div",{children:c.categoryId})]}),e.jsxs(a,{sm:6,children:[e.jsx("strong",{children:"Consent Form Type:"}),e.jsx("div",{children:Je[c.consentFormType]||"N/A"})]})]}),e.jsx(p,{className:"mb-3",children:e.jsxs(a,{sm:6,children:[e.jsx("strong",{children:"Status:"}),e.jsx("div",{children:c.status})]})}),e.jsx("hr",{}),e.jsxs(p,{className:"mb-3",children:[e.jsxs(a,{sm:4,children:[e.jsx("strong",{children:"Price:"}),e.jsxs("div",{children:["â‚¹ ",Math.round(c.price)]})]}),e.jsxs(a,{sm:4,children:[e.jsx("strong",{children:"Discount %:"}),e.jsxs("div",{children:[Math.round(c.discountPercentage),"%"]})]}),e.jsxs(a,{sm:4,children:[e.jsx("strong",{children:"Discount Amount:"}),e.jsxs("div",{children:["â‚¹ ",Math.round(c.discountAmount)]})]})]}),e.jsxs(p,{className:"mb-3",children:[e.jsxs(a,{sm:4,children:[e.jsx("strong",{children:"Discounted Cost:"}),e.jsxs("div",{children:["â‚¹ ",Math.round(c.discountedCost)]})]}),e.jsxs(a,{sm:4,children:[e.jsx("strong",{children:"Tax %:"}),e.jsxs("div",{children:[Math.round(c.taxPercentage),"%"]})]}),e.jsxs(a,{sm:4,children:[e.jsx("strong",{children:"Tax Amount:"}),e.jsxs("div",{children:["â‚¹ ",Math.round(c.taxAmount)]})]})]}),e.jsxs(p,{className:"mb-3",children:[e.jsxs(a,{sm:4,children:[e.jsx("strong",{children:"Platform Fee %:"}),e.jsxs("div",{children:[Math.round(c.platformFeePercentage),"%"]})]}),e.jsxs(a,{sm:4,children:[e.jsx("strong",{children:"Platform Fee:"}),e.jsxs("div",{children:["â‚¹ ",Math.round(c.platformFee)]})]}),e.jsxs(a,{sm:4,children:[e.jsx("strong",{children:"Clinic Pay:"}),e.jsxs("div",{children:["â‚¹ ",Math.round(c.clinicPay)]})]})]}),e.jsxs(p,{className:"mb-3",children:[e.jsxs(a,{sm:4,children:[e.jsx("strong",{children:"GST Amount:"}),e.jsx("div",{children:Math.round(c.gstAmount)})]}),e.jsxs(a,{sm:4,children:[e.jsx("strong",{children:"GST:"}),e.jsx("div",{children:Math.round(c.gst)})]}),e.jsxs(a,{sm:4,children:[e.jsx("strong",{children:"Consultation Fee:"}),e.jsxs("div",{children:["â‚¹ ",c.consultationFee]})]}),e.jsxs(a,{sm:4,children:[e.jsx("strong",{children:"Final Cost:"}),e.jsxs("div",{children:["â‚¹ ",Math.round(c.finalCost)]})]})]}),e.jsx(p,{className:"mb-3",children:e.jsxs(a,{sm:4,children:[e.jsx("strong",{children:"Service Time:"}),e.jsx("div",{children:ss(c.minTime)})]})}),e.jsx("hr",{}),e.jsx(p,{className:"mb-3",children:e.jsxs(a,{sm:12,children:[e.jsx("strong",{className:"mb-3",children:"Pre-Procedure QA:"}),Array.isArray(c.preProcedureQA)&&c.preProcedureQA.length>0?c.preProcedureQA.map((s,t)=>{const n=Object.keys(s)[0],o=s[n];return e.jsxs("div",{style:{marginBottom:"10px"},children:[e.jsx("strong",{children:n}),e.jsx("ul",{children:o.map((l,u)=>e.jsx("li",{children:l},u))})]},t)}):e.jsx("div",{children:"No Pre-Procedure Q&A available"})]})}),e.jsx(p,{className:"mb-3",children:e.jsxs(a,{sm:12,children:[e.jsx("strong",{className:"mb-3",children:"Procedure QA:"}),Array.isArray(c.procedureQA)&&c.procedureQA.length>0?c.procedureQA.map((s,t)=>{const n=Object.keys(s)[0],o=s[n];return e.jsxs("div",{style:{marginBottom:"10px"},children:[e.jsx("strong",{children:n}),e.jsx("ul",{children:o.map((l,u)=>e.jsx("li",{children:l},u))})]},t)}):e.jsx("div",{children:"No Procedure Q&A available"})]})}),e.jsx(p,{className:"mb-3",children:e.jsxs(a,{sm:12,children:[e.jsx("strong",{className:"mb-3",children:"Post-Procedure QA:"}),Array.isArray(c.postProcedureQA)&&c.postProcedureQA.length>0?c.postProcedureQA.map((s,t)=>{const n=Object.keys(s)[0],o=s[n];return e.jsxs("div",{style:{marginBottom:"10px"},children:[e.jsx("strong",{children:n}),e.jsx("ul",{children:o.map((l,u)=>e.jsx("li",{children:l},u))})]},t)}):e.jsx("div",{children:"No Post-Procedure Q&A available"})]})}),e.jsx("hr",{}),e.jsxs(p,{children:[e.jsxs(a,{sm:6,children:[e.jsx("strong",{children:"Service Image:"}),c.subServiceImage?e.jsxs("div",{className:"mt-2",children:[e.jsx("img",{src:`data:image/png;base64,${c.subServiceImage}`,alt:"Service",style:{width:"100%",maxWidth:"250px",borderRadius:"8px"}}),Ne&&e.jsx("img",{src:Ne,alt:"Preview",height:"80",className:"mt-2"})]}):e.jsx("div",{children:"No image available"})]}),e.jsxs(a,{sm:6,children:[e.jsx("strong",{children:"View Description:"}),e.jsx("div",{children:c.viewDescription})]})]})]}),e.jsx(Le,{children:e.jsx(k,{color:"secondary",onClick:()=>B(null),children:"Close"})})]}),e.jsxs(Ve,{visible:O,onClose:()=>D(!1),size:"xl",backdrop:"static",children:[e.jsx(Re,{children:e.jsx(Ge,{style:{textAlign:"center",width:"100%"},children:q==="edit"?"Edit Procedure Details":"Add New Procedure Details"})}),e.jsx($e,{children:e.jsxs(Ee,{children:[e.jsxs(p,{className:"mb-4",children:[e.jsxs(a,{md:4,children:[e.jsxs("h6",{children:["Category Name ",e.jsx("span",{className:"text-danger",children:"*"})]}),e.jsxs($,{value:r.categoryId||"",onChange:Ce,"aria-label":"Select Category",name:"categoryName",disabled:q==="edit",children:[e.jsx("option",{value:"",children:"Select a Category"}),N==null?void 0:N.map(s=>e.jsx("option",{value:s.categoryId,children:s.categoryName},s.categoryId))]}),x.categoryName&&e.jsx(F,{className:"text-danger",children:x.categoryName})]}),e.jsxs(a,{md:4,children:[e.jsxs("h6",{children:["Service Name ",e.jsx("span",{className:"text-danger",children:"*"})]}),e.jsxs($,{name:"serviceName",value:r.serviceName||"",onChange:Ce,disabled:q==="edit",children:[e.jsx("option",{value:"",children:"Select Service"}),ve.map(s=>e.jsx("option",{value:s.serviceName,children:s.serviceName},s.serviceId))]}),x.serviceName&&e.jsx(F,{className:"text-danger",children:x.serviceName})]}),e.jsxs(a,{md:4,children:[e.jsxs("h6",{children:["Procedure Name ",e.jsx("span",{className:"text-danger",children:"*"})]}),e.jsxs($,{name:"subServiceId",value:Be,onChange:s=>{var o;const t=s.target.value;ce(t);const n=(o=U==null?void 0:U.subServices)==null?void 0:o.find(l=>l.subServiceId===t);g(l=>({...l,subServiceId:t,subServiceName:(n==null?void 0:n.subServiceName)||"",preProcedureQA:y.preProcedureQA||[],procedureQA:y.procedureQA||[],postProcedureQA:y.postProcedureQA||[]}))},children:[e.jsx("option",{value:"",children:"Select Procedure"}),Array.isArray(U.subServices)&&U.subServices.map(s=>e.jsx("option",{value:s.subServiceId,children:s.subServiceName},s.subServiceId))]}),x.subServiceName&&e.jsx(F,{className:"text-danger",children:x.subServiceName})]})]}),e.jsxs(p,{className:"mb-4",children:[e.jsxs(a,{md:4,children:[e.jsxs("h6",{children:["Procedure Image ",e.jsx("span",{className:"text-danger",children:"*"})]}),e.jsx(P,{type:"file",accept:"image/*",onChange:s=>{const t=s.target.files[0];if(t){const n=new FileReader;n.onloadend=()=>{var l;const o=((l=n.result)==null?void 0:l.split(",")[1])||"";g(u=>({...u,serviceImage:o,serviceImageFile:t}))},n.readAsDataURL(t)}}}),(r==null?void 0:r.serviceImage)&&e.jsx("img",{src:r.serviceImage.startsWith("data:")?r.serviceImage:`data:image/jpeg;base64,${r.serviceImage}`,alt:"Preview",style:{width:100,height:100,marginTop:10}})]}),e.jsxs(a,{md:4,children:[e.jsxs("h6",{children:["View Description ",e.jsx("span",{className:"text-danger",children:"*"})]}),e.jsx(P,{type:"text",placeholder:"View Description",value:r.viewDescription||"",name:"viewDescription",onChange:Z,maxLength:100}),x.viewDescription&&e.jsx(F,{className:"text-danger",children:x.viewDescription})]}),e.jsxs(a,{md:4,children:[e.jsxs("h6",{children:["Status ",e.jsx("span",{className:"text-danger",children:"*"})]}),e.jsxs($,{value:r.status||"",onChange:Z,name:"status",children:[e.jsx("option",{value:"",children:"Select"}),e.jsx("option",{value:"Active",children:"Active"}),e.jsx("option",{value:"InActive",children:"Inactive"})]}),x.status&&e.jsx(F,{className:"text-danger",children:x.status})]})]}),e.jsxs(p,{className:"mb-4",children:[e.jsxs(a,{md:4,children:[e.jsxs(Ss,{children:["ConsentFormType",e.jsx("span",{className:"text-danger",children:"*"})]}),e.jsxs($,{value:r.consentFormType||"",onChange:s=>g(t=>({...t,consentFormType:s.target.value})),children:[e.jsx("option",{value:"",children:"Select consentFormType"}),e.jsx("option",{value:"1",children:"Generic ConsentForm"}),e.jsx("option",{value:"2",children:"Procedure ConsentForm"})]}),x.consentFormType&&e.jsx(F,{className:"text-danger",children:x.consentFormType})]}),e.jsxs(a,{md:4,children:[e.jsxs("h6",{children:["Consultation Fee",e.jsx("span",{className:"text-danger",children:"*"})]}),e.jsx(P,{type:"number",value:r.consultationFee||"",onChange:s=>g(t=>({...t,consultationFee:Number(s.target.value)}))})]}),e.jsx(a,{children:e.jsxs("div",{className:"mb-4",children:[e.jsxs("h6",{children:["Min Time ",e.jsx("span",{className:"text-danger",children:"*"})]}),e.jsxs("div",{className:"d-flex",children:[e.jsx(P,{type:"number",name:"minTimeValue",value:r.minTimeValue||"",onChange:s=>g({...r,minTimeValue:s.target.value}),placeholder:"Enter time"}),e.jsxs($,{name:"minTimeUnit",className:"ms-2",value:r.minTimeUnit||"",onChange:s=>g({...r,minTimeUnit:s.target.value}),children:[e.jsx("option",{value:"",disabled:!0,children:"Select Time"}),e.jsx("option",{value:"minutes",children:"Minutes"}),e.jsx("option",{value:"hours",children:"Hours"})]})]}),x.minTime&&e.jsx(F,{className:"text-danger",children:x.minTime})]})})]}),e.jsxs(p,{className:"mb-4",children:[e.jsxs(a,{md:3,children:[e.jsxs("h6",{children:["Procedure Price ",e.jsx("span",{className:"text-danger",children:"*"})]}),e.jsx(P,{type:"number",placeholder:"Discount",value:r.price||"",onChange:s=>g(t=>({...t,price:s.target.value}))}),x.price&&e.jsx(F,{className:"text-danger",children:x.price})]}),e.jsxs(a,{md:3,children:[e.jsxs("h6",{children:["Discount (%) ",e.jsx("span",{className:"text-danger",children:"*"})]}),e.jsx(P,{type:"number",placeholder:"Discount",value:r.discount||"",name:"discount",onChange:Z,min:1,onKeyDown:s=>{(s.key==="-"||s.key==="e")&&s.preventDefault()}}),x.discount&&e.jsx(F,{className:"text-danger",children:x.discount})]}),e.jsxs(a,{md:3,children:[e.jsxs("h6",{children:["GST (%)",e.jsx("span",{className:"text-danger",children:"*"})]}),e.jsx(P,{type:"number",placeholder:"GST",value:r.gst||"",onChange:s=>g(t=>({...t,gst:Number(s.target.value)}))})]}),e.jsxs(a,{md:3,children:[e.jsxs("h6",{children:["GST (%)",e.jsx("span",{className:"text-danger",children:"*"})]}),e.jsx(P,{type:"number",placeholder:"GST Amount",value:r.gstAmount||"",onChange:s=>g(t=>({...t,gstAmount:Number(s.target.value)}))})]}),e.jsxs(a,{md:3,children:[e.jsx("h6",{children:"Other Taxes(%)"}),e.jsx(P,{type:"number",placeholder:"Tax Percentage",value:r.taxPercentage||"",name:"taxPercentage",onChange:Z,min:1,onKeyDown:s=>{(s.key==="-"||s.key==="e")&&s.preventDefault()}}),x.taxPercentage&&e.jsx(F,{className:"text-danger",children:x.taxPercentage})]})]}),e.jsx("h6",{className:"m-3",children:"Procedure (Optional)"}),e.jsx(Ts,{preQAList:r.preProcedureQA,setPreQAList:s=>g(t=>({...t,preProcedureQA:s})),procedureQAList:r.procedureQA,setProcedureQAList:s=>g(t=>({...t,procedureQA:s})),postQAList:r.postProcedureQA,setPostQAList:s=>g(t=>({...t,postProcedureQA:s}))})]})}),e.jsxs(Le,{children:[e.jsx(k,{color:"secondary",onClick:is,children:"Cancel"}),e.jsx(k,{color:"info",className:"pink-Btn",onClick:q==="edit"?rs:es,children:q==="edit"?"Update":"Add"})]})]}),f?e.jsx("div",{className:"d-flex justify-content-center align-items-center",children:e.jsx(bs,{message:"Loading Procedure..."})}):E?e.jsx("div",{className:"d-flex justify-content-center align-items-center",style:{height:"50vh",color:"var(--color-black)"},children:E}):e.jsxs(As,{striped:!0,hover:!0,responsive:!0,children:[e.jsx(Ps,{className:"pink-table w-auto",children:e.jsxs(xe,{children:[e.jsx(G,{style:{paddingLeft:"40px"},children:"S.No"}),e.jsx(G,{children:"Procedure Name"}),e.jsx(G,{children:"Servic eName"}),e.jsx(G,{children:"Category Name"}),e.jsx(G,{children:"Price"}),e.jsx(G,{className:"text-end",children:"Actions"})]})}),e.jsx(Is,{className:"pink-table",children:Pe.length>0?Pe.map((s,t)=>e.jsxs(xe,{children:[e.jsx(M,{style:{paddingLeft:"40px"},children:(H-1)*_+t+1}),e.jsx(M,{children:ge(s.subServiceName)}),e.jsx(M,{children:ge(s.serviceName||"NA")}),e.jsx(M,{children:ge(s.categoryName||"NA")}),e.jsx(M,{children:s.price||"NA"}),e.jsx(M,{className:"text-end",children:e.jsxs("div",{className:"d-flex justify-content-end gap-2  ",children:[e.jsx("button",{className:"actionBtn",onClick:()=>B(s),title:"View",children:e.jsx(Cs,{size:18})}),e.jsx("button",{className:"actionBtn",onClick:()=>We(s),title:"Edit",children:e.jsx(Qs,{size:18})}),e.jsx("button",{className:"actionBtn",onClick:()=>ts(s),title:"Delete",children:e.jsx(Fs,{size:18})}),e.jsx(fs,{isVisible:_e,title:"Delete Procedure",message:"Are you sure you want to delete this procedure? This action cannot be undone.",confirmText:"Yes, Delete",cancelText:"Cancel",confirmColor:"danger",cancelColor:"secondary",onConfirm:ns,onCancel:as})]})})]},s.id)):e.jsx(xe,{children:e.jsx(M,{colSpan:5,className:"text-center text-muted",children:'ðŸ” No procedure found"'})})})]}),!f&&e.jsx("div",{className:"d-flex justify-content-end mt-3",style:{marginRight:"40px"},children:Array.from({length:Math.ceil((oe.length?oe.length:y.length)/_)},(s,t)=>e.jsx(k,{style:{margin:"0 5px",padding:"5px 10px",backgroundColor:H===t+1?"var(--color-black)":"#fff",color:H===t+1?"#fff":"var(--color-black)",border:"1px solid #ccc",borderRadius:"5px",cursor:"pointer"},className:"ms-2",onClick:()=>qe(t+1),children:t+1},t))})]})};export{xr as default};
