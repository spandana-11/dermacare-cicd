import{af as w,u as D,h as y,r as o,j as s}from"./index-BQRndUr-.js";import"./jspdf.es.min-cjjzm1pJ.js";import{a as C}from"./appointmentAPI-C6UYTyg4.js";import{a}from"./index.esm-kPg_xJHJ.js";import"./typeof-QjJsDpFa.js";const z=()=>{var i,t,n,m;const{id:j}=w(),g=D(),l=y(),[I,k]=o.useState(!1),[r,u]=o.useState(null),e=(i=g.state)==null?void 0:i.appointment;if(!e)return s.jsxs("div",{className:"text-center mt-4",children:[s.jsxs("h3",{className:"mb-3",children:["No Appointment Data Found for ID: ",j]}),s.jsx(a,{color:"primary",onClick:()=>l(-1),children:"Back"})]});const N=()=>{l("/consent-form",{state:{appointment:e}})};o.useEffect(()=>{(async()=>{var h,x;if(((h=e==null?void 0:e.status)==null?void 0:h.toLowerCase())==="confirmed"||((x=e==null?void 0:e.status)==null?void 0:x.toLowerCase())==="completed"&&(e!=null&&e.doctorId))try{const d=await C(e.doctorId);u(d.data.data)}catch(d){console.error("Failed to fetch doctor details:",d)}})()},[e]);const b=c=>c?c.startsWith("data:image")?c:`data:image/jpeg;base64,${c}`:"/default-doctor.png",f=c=>{switch(c==null?void 0:c.toLowerCase()){case"completed":return"success";case"rejected":return"danger";case"pending":return"warning";case"confirmed":return"info";case"in progress":return"primary";case"rescheduled":return"secondary";default:return"dark"}},v=((t=e==null?void 0:e.status)==null?void 0:t.toLowerCase())==="confirmed"||((n=e==null?void 0:e.status)==null?void 0:n.toLowerCase())==="completed";return s.jsxs("div",{className:"container mt-4",children:[s.jsxs("div",{className:"bg-info text-white p-3 d-flex justify-content-between align-items-center rounded",children:[s.jsxs("h5",{className:"mb-0",children:["Booking ID: ",e.bookingId]}),s.jsx("div",{className:"d-flex gap-2",children:s.jsx(a,{color:"secondary",size:"sm",onClick:()=>l(-1),children:"Back"})})]}),s.jsxs("div",{className:"mt-4 p-4 border rounded shadow-sm bg-white",children:[s.jsxs("div",{className:"d-flex justify-content-between align-items-center border-bottom pb-2 mb-3",children:[s.jsx("h5",{className:"fw-bold text-primary mb-0",children:"Patient Details"}),s.jsx("span",{className:`badge bg-${f(e.status)} text-uppercase px-3 py-2`,children:e.status})]}),s.jsxs("div",{className:"row mb-3",children:[s.jsxs("div",{className:"col-md-4",children:[s.jsx("strong",{children:"Patient Name:"})," ",e==null?void 0:e.name]}),s.jsxs("div",{className:"col-md-4",children:[s.jsx("strong",{children:"Mobile Number:"})," ",e==null?void 0:e.mobileNumber]}),s.jsxs("div",{className:"col-md-4",children:[s.jsx("strong",{children:"Booking For:"})," ",e==null?void 0:e.bookingFor]}),s.jsxs("div",{className:"col-md-4",children:[s.jsx("strong",{children:"Age:"})," ",e==null?void 0:e.age," Yrs"]}),s.jsxs("div",{className:"col-md-4",children:[s.jsx("strong",{children:"Gender:"})," ",e==null?void 0:e.gender]}),s.jsxs("div",{className:"col-12",children:[s.jsx("strong",{children:"Problem:"})," ",s.jsx("span",{className:"text-muted",children:e==null?void 0:e.problem})]})]}),s.jsx("hr",{}),s.jsx("h6",{className:"fw-bold text-secondary mb-3",children:"Slot & Payment Details"}),s.jsxs("div",{className:"row",children:[s.jsxs("div",{className:"col-md-4",children:[s.jsx("strong",{children:"Date:"})," ",e==null?void 0:e.serviceDate]}),s.jsxs("div",{className:"col-md-4",children:[s.jsx("strong",{children:"Time:"})," ",e==null?void 0:e.servicetime]}),s.jsxs("div",{className:"col-md-4",children:[s.jsx("strong",{children:"Paid Amount:"})," ₹",e==null?void 0:e.totalFee]}),s.jsxs("div",{className:"col-md-4",children:[s.jsx("strong",{children:"Consultation Fee:"})," ₹",e==null?void 0:e.consultationFee]})]}),s.jsx("hr",{}),s.jsx("h6",{className:"fw-bold text-secondary mb-3",children:"Doctor & Service Details"}),s.jsxs("div",{className:"row",children:[s.jsxs("div",{className:"col-md-4",children:[s.jsx("strong",{children:"Doctor ID:"})," ",e==null?void 0:e.doctorId]}),s.jsxs("div",{className:"col-md-4",children:[s.jsx("strong",{children:"Consultation Type:"})," ",e==null?void 0:e.consultationType]}),s.jsxs("div",{className:"col-md-4",children:[s.jsx("strong",{children:"Service Name:"})," ",e==null?void 0:e.subServiceName]}),s.jsxs("div",{className:"col-md-4",children:[s.jsx("strong",{children:"Service ID:"})," ",e==null?void 0:e.subServiceId]})]}),v&&s.jsxs(s.Fragment,{children:[s.jsx("div",{className:"mt-4 d-flex justify-content-end",children:s.jsx(a,{color:"primary",onClick:N,children:"Consent Form (Preview & Download)"})}),r&&s.jsxs(s.Fragment,{children:[s.jsx("h6",{className:"fw-bold mt-4",children:"Doctor Details"}),s.jsxs("div",{className:"d-flex align-items-center gap-3 border rounded p-3 shadow-sm",children:[s.jsx("img",{src:b(r.doctorPicture),alt:r.doctorName,width:80,height:80,className:"rounded-circle border"}),s.jsxs("div",{children:[s.jsx("h6",{className:"text-primary fw-bold mb-1",children:r.doctorName}),s.jsxs("p",{className:"mb-1",children:[s.jsx("strong",{children:"Specialization:"})," ",r.specialization]}),s.jsxs("p",{className:"mb-1",children:[s.jsx("strong",{children:"Experience:"})," ",r.experience," years"]}),s.jsxs("p",{className:"mb-1",children:[s.jsx("strong",{children:"Qualification:"})," ",r.qualification]}),s.jsxs("p",{className:"mb-0",children:[s.jsx("strong",{children:"Languages:"})," ",(m=r.languages)==null?void 0:m.join(", ")]})]}),s.jsx("div",{className:"ms-auto",children:s.jsx(a,{color:"primary",size:"sm",className:"px-3",onClick:()=>l(`/doctor/${r.doctorId}`,{state:{doctor:r}}),children:"View Details"})})]})]})]})]})]})};export{z as default};
